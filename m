Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-3.6 required=3.0 tests=AWL,BAYES_00,
	FREEMAIL_FORGED_FROMDOMAIN,FREEMAIL_FROM,HEADER_FROM_DIFFERENT_DOMAINS,
	RCVD_IN_DNSWL_HI,RP_MATCHES_RCVD shortcircuit=no autolearn=ham
	autolearn_force=no version=3.4.0
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id 1D5F3202C1
	for <e@80x24.org>; Sun, 12 Mar 2017 20:36:39 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S935320AbdCLUgf (ORCPT <rfc822;e@80x24.org>);
        Sun, 12 Mar 2017 16:36:35 -0400
Received: from smtp2-g21.free.fr ([212.27.42.2]:6280 "EHLO smtp2-g21.free.fr"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S934692AbdCLUge (ORCPT <rfc822;git@vger.kernel.org>);
        Sun, 12 Mar 2017 16:36:34 -0400
Received: from cayenne.localnet (unknown [IPv6:2a01:e35:2ef1:f910:5006:1621:c385:7777])
        by smtp2-g21.free.fr (Postfix) with ESMTPS id 992D2200382
        for <git@vger.kernel.org>; Sun, 12 Mar 2017 21:36:32 +0100 (CET)
From:   =?ISO-8859-1?Q?Jean=2DNo=EBl?= AVILA <jn.avila@free.fr>
To:     git@vger.kernel.org
Subject: Re: [PATCH] l10n: add framework for localizing the manpages
Date:   Sun, 12 Mar 2017 21:36:32 +0100
Message-ID: <12214955.EmB7ja1MbS@cayenne>
User-Agent: KMail/5.2.3 (Linux/4.9.0-2-amd64; KDE/5.28.0; x86_64; ; )
In-Reply-To: <20170312200248.3610-2-jn.avila@free.fr>
References: <20170312200248.3610-1-jn.avila@free.fr> <20170312200248.3610-2-jn.avila@free.fr>
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

This patch is only a preview and a request for comment. The tool used to 
perform the localization of manpages is po4a (po for anything). This tool 
digests the asciidoc source files and writes a pot file, and then merges back 
the po files into translated asciidoc files, for further processing.

The choice of this workflow is driven by two concerns: manage the tracking of 
the changes in the original files and provide the translators with a format of 
file that they already use. Moreover, I plan to upload the po files to web 
translation platforms such as transifex or weblate to take advantage of crowd 
translation.

In this patch, only one manpage is generated for the git-add command in 
french. po4a already supports extending to other languages, and merges all the 
strings from multiple source manpages into one big pot file. In the next 
version, two files will be included so that the sharing of common strings is 
shown. There are some enhancement needed for better support of other output 
formats.

One problem with this setup is that we don't know before hand which files will 
be generated from the po files and the source files. This depends on the level 
of completion of translation for each language and each target file. To 
circumvent this, the makefile calls itself recursively after running po4a, so 
that the generated files can be enumerated in the downstream targets.

It would be understandable that the git devel list would not like to be 
spammed by the traffic generated by this new activity.If the present proposition 
is accepted,  I'm open to any modus operandi for submitting the changes.

Thanks for reading.
