From: Junio C Hamano <junkio@cox.net>
Subject: Re: [PATCH] Fix rename/copy when dealing with temporarily broken
 pairs.
Date: Mon, 13 Jun 2005 14:01:22 -0700
Message-ID: <7vis0ic6ot.fsf@assigned-by-dhcp.cox.net>
References: <7vfyvpxlqi.fsf@assigned-by-dhcp.cox.net>
	<7vwtp0p6tz.fsf@assigned-by-dhcp.cox.net>
	<2cfc4032050613092462d3a456@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Mon Jun 13 23:02:12 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1Dhw3r-00070Q-Nr
	for gcvg-git@gmane.org; Mon, 13 Jun 2005 23:01:36 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261349AbVFMVFo (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 13 Jun 2005 17:05:44 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261399AbVFMVEn
	(ORCPT <rfc822;git-outgoing>); Mon, 13 Jun 2005 17:04:43 -0400
Received: from fed1rmmtao11.cox.net ([68.230.241.28]:33976 "EHLO
	fed1rmmtao11.cox.net") by vger.kernel.org with ESMTP
	id S261349AbVFMVB0 (ORCPT <rfc822;git@vger.kernel.org>);
	Mon, 13 Jun 2005 17:01:26 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao11.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050613210124.ZJCD12158.fed1rmmtao11.cox.net@assigned-by-dhcp.cox.net>;
          Mon, 13 Jun 2005 17:01:24 -0400
To: jon@blackcubes.dyndns.org
User-Agent: Gnus/5.1007 (Gnus v5.10.7) Emacs/21.4 (gnu/linux)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org

>>>>> "JS" == Jon Seymour <jon.seymour@gmail.com> writes:

JS> I've got a patch series that renames a file, but the patches
JS> generated by your git-format-patch-script fail to rename the
JS> file to the new name.

JS> I wondered if this patch might fix it, but it doesn't seem to.

I doubt the problem you have is related to the problem this
patch addresses.  This is a fix for a case that the machinery
sometimes says rename when it should say copy.

Regular "patch" cannot grok either copy or rename.  If your
recipient uses "patch", then you must not use -C nor -M when you
are preparing a diff for his consumption.

JS> What tool am I meant to be using to apply the patch? 
JS> I am currently using "patch -p1"

As Petr already responded, the git-apply program from the King
Penguin himself should work [*1*].

One thing I just want to make sure is this.  You are not
reporting that the patch you sent that said "rename" should have
been "copy", are you?  

I understand that your change creates traversal.c out of
epoch.c.  Say the output is from between commitA and commitB.

What I would like to know is if commitB still contains epoch.c,
or it does not have epoch.c anymore [*2*].  If it is the former
then I think you spotted a bug in the patch your message is a
response to.  I hope that is not the case.

P.S.  I will be offline shortly and will not be able to offer
further help until perhaps late next week.


[Footnote]

*1* Find the thread in the mailing list archive that contains
this message, which I think would be of help too.

    Date: Sun, 5 Jun 2005 16:17:56 -0700 (PDT)
    From: Linus Torvalds <torvalds@osdl.org>
    To: Junio C Hamano <junkio@cox.net>
    cc: Daniel Barkalow <barkalow@iabervon.org>, git@vger.kernel.org
    Subject: Re: [PATCH-CAREFUL/RENAME] rename git-rpush and git-rpull to git-ssh-push and git-ssh-pull
    Message-ID: <Pine.LNX.4.58.0506051613370.1876@ppc970.osdl.org>
    References: <7vk6l9flzr.fsf@assigned-by-dhcp.cox.net>
     <Pine.LNX.4.21.0506050132590.30848-100000@iabervon.org>
     <7vfyvxb89m.fsf_-_@assigned-by-dhcp.cox.net> <Pine.LNX.4.58.0506051427280.1876@ppc970.osdl.org>
     <7vmzq4zata.fsf@assigned-by-dhcp.cox.net>

    On Sun, 5 Jun 2005, Junio C Hamano wrote:
    > 
    > Here is a rebase.  To apply with git-apply, you need the "Yes,
    > sir" patch to grok "rename from/to".

    Seems to have applied correctly. Very nice.

                    Linus

