From: Yasushi SHOJI <yashi@atmark-techno.com>
Subject: [PATCH] allow guilt to handle binary files
Date: Wed, 4 Mar 2009 23:19:32 +0900
Message-ID: <87vdqpuzj5.wl@mail2.atmark-techno.com>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: git@vger.kernel.org
To: jeffpc@josefsipek.net
X-From: git-owner@vger.kernel.org Wed Mar 04 16:08:12 2009
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1LeshV-0003kR-7w
	for gcvg-git-2@gmane.org; Wed, 04 Mar 2009 16:08:01 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752853AbZCDPG3 (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Wed, 4 Mar 2009 10:06:29 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1752320AbZCDPG3
	(ORCPT <rfc822;git-outgoing>); Wed, 4 Mar 2009 10:06:29 -0500
Received: from mail2.atmark-techno.com ([210.191.215.173]:55518 "EHLO
	mail2.atmark-techno.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1752026AbZCDPG3 (ORCPT <rfc822;git@vger.kernel.org>);
	Wed, 4 Mar 2009 10:06:29 -0500
X-Greylist: delayed 1868 seconds by postgrey-1.27 at vger.kernel.org; Wed, 04 Mar 2009 10:06:28 EST
Received: from wat.atmark-techno.com.atmark-techno.com (dns1.atmark-techno.com [210.191.215.170])
	by mail2.atmark-techno.com (Postfix) with ESMTP id BFE8F6C8FD;
	Wed,  4 Mar 2009 23:35:10 +0900 (JST)
User-Agent: Wanderlust/2.14.0
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/112220>

git plumbings has been working with binary diff for a while.  this one
liner enable guilt to use those capabilities.

Signed-off-by: Yasushi SHOJI <yashi@atmark-techno.com>
---
Hi Jeff,

I just found out that guilt does not yet support binary patch
capability git has for a while.

so, before I leave my office, I just tried guilt with this one liner.
the result was:

 - my local test with biniary files work (pop/push was check with md5), and
 - all regression test completed without any error

I felt that I just send it out. :-) 

# Note: I've googled "guilt bianry" before sending this but could not
# find any.  I'm not following nether git nor guilt development for a
# while. so, let me know if I'm off track.

thanks,

 guilt |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/guilt b/guilt
index c98fd30..17a6288 100755
--- a/guilt
+++ b/guilt
@@ -689,7 +689,7 @@ __refresh_patch()
 		fi
 
 		# get the new patch
-		git diff $diffopts "$2" >> "$TMP_DIFF"
+		git diff --binary $diffopts "$2" >> "$TMP_DIFF"
 
 		# move the new patch in
 		mv "$p" "$p~"
-- 
1.6.1.rc3.51.g5832d
