From: =?utf-8?q?L=C3=A9na=C3=AFc_Huard?= <lenaic@lhuard.fr.eu.org>
Subject: Re: [PATCH] gitweb: provide a way to customize html headers
Date: Mon, 17 Oct 2011 09:28:55 +0200
Message-ID: <201110170928.56075.lenaic@lhuard.fr.eu.org>
Mime-Version: 1.0
Content-Type: Text/Plain; charset=utf-8
Content-Transfer-Encoding: QUOTED-PRINTABLE
Cc: git@vger.kernel.org
To: Jakub Narebski <jnareb@gmail.com>
X-From: git-owner@vger.kernel.org Mon Oct 17 09:29:09 2011
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@lo.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by lo.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1RFhdD-0003O9-Dx
	for gcvg-git-2@lo.gmane.org; Mon, 17 Oct 2011 09:29:07 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752532Ab1JQH3A convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git-2@m.gmane.org>); Mon, 17 Oct 2011 03:29:00 -0400
Received: from freebox.lhuard.fr.eu.org ([88.182.161.122]:43775 "EHLO
	coruscant.lhuard.fr.eu.org" rhost-flags-OK-OK-OK-FAIL)
	by vger.kernel.org with ESMTP id S1751368Ab1JQH27 convert rfc822-to-8bit
	(ORCPT <rfc822;git@vger.kernel.org>);
	Mon, 17 Oct 2011 03:28:59 -0400
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=lhuard.fr.eu.org; s=dkim;
	h=Message-Id:Content-Transfer-Encoding:Content-Type:MIME-Version:In-Reply-To:References:Cc:Date:Subject:To:From; bh=mgVLmdHehrIDoaIsciZvq6Jc4dqP75r2yMwDgWGOoY4=;
	b=G10Z6/ztor1xBHo2a1otR2OY+CGcekAI+PIIm6VtoxVDaya1LbwbhBWXgX2c1v0xYyAHa2yYngdTpIwhe0tEumyKFiWdnywQ44Uj4s33bK5bZQzJB7mpu/MHSgRMAIo2xUZFIWs+m1e47nTvb3l+XDdcjbpB29zhujs/KUd4Mv0=;
Received: from lenaic by coruscant.lhuard.fr.eu.org with local (Exim 4.76)
	(envelope-from <lenaic@lhuard.fr.eu.org>)
	id 1RFhd2-00044m-3s; Mon, 17 Oct 2011 09:28:56 +0200
User-Agent: KMail/1.13.7 (Linux/3.0.0-2-amd64; KDE/4.6.5; x86_64; ; )
References: ???????????????????
In-Reply-To: =?utf-8?b?47Gt442k442k55y35qGv45Cu5pmz5pmA5rGv5o2h5rGo5r2z55Cu5rGv5o2h5rGk?=
 =?utf-8?b?5r2t5oWp5ri+?=
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/183771>

Jakub Narebski <jnareb@gmail.com> writes:

> L=C3=A9na=C3=AFc Huard <lenaic@lhuard.fr.eu.org> writes:

> > This allows web sites to add some specific html headers to the page=
s
> > generated by gitweb.

> What do you need this for?

I want to decorate the gitweb pages with the =E2=80=9CGoogle Analytics=E2=
=80=9D tracking code.
In order to do so, today, Google is recommending to add a <script> tag =
just=20
before the closing </head> tag.

https://www.google.com/support/analyticshelp/bin/answer.py?answer=3D100=
8080&hl=3Den

> > The new variable $site_htmlheader can be set to a filename the cont=
ent
> > of which will be inserted at the end of the <head> section of each
> > page generated by gitweb.

> Hmmm... I wonder if a file with html header fragment (which is quite
> specific subset of HTML) is a best solution.

That=E2=80=99s true. The piece of code to be inserted in <head> is mayb=
e small enough=20
so that we don=E2=80=99t need a file. Maybe $site_htmlheader could cont=
ain directly=20
the html snippet to be inserted in the pages?

> > Signed-off-by: L=3DFE=3DFF=3D00=3DE9na=3DFE=3DFF=3D00=3DEFc Huard <=
lenaic@lhuard.fr.eu.or=3D
g>
> > ---
> >  gitweb/INSTALL     |    3 +++

> Nb. there is patch in flight adding gitweb.conf(5) and gitweb(1)
> manpages...

Ok. So, I=E2=80=99ll update them once a decision will be taken concerni=
ng this=20
$site_htmlheader.
--=20
L=C3=A9na=C3=AFc Huard
