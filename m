X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.176.0/21
X-Spam-Status: No, score=-3.5 required=3.0 tests=BAYES_00,
	HEADER_FROM_DIFFERENT_DOMAINS,MSGID_FROM_MTA_HEADER,RP_MATCHES_RCVD
	shortcircuit=no autolearn=ham autolearn_force=no version=3.4.0
From: Catalin Marinas <catalin.marinas@arm.com>
Subject: Re: StGit metadata grabbing with git clone
Date: Thu, 23 Nov 2006 10:47:09 +0000
Message-ID: <tnxslgawic2.fsf@arm.com>
References: <87ac2jwutu.fsf@neumann.lab.ossystems.com.br>
Reply-To: Catalin Marinas <catalin.marinas@gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
NNTP-Posting-Date: Thu, 23 Nov 2006 10:47:53 +0000 (UTC)
Cc: git@vger.kernel.org
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
In-Reply-To: <87ac2jwutu.fsf@neumann.lab.ossystems.com.br> (Otavio
 Salvador's message of "Wed, 22 Nov 2006 10:05:01 -0200")
User-Agent: Gnus/5.1007 (Gnus v5.10.7) Emacs/21.4 (gnu/linux)
X-OriginalArrivalTime: 23 Nov 2006 10:47:22.0873 (UTC) FILETIME=[C1BBCE90:01C70EEC]
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/32135>
Received: from vger.kernel.org ([209.132.176.167]) by ciao.gmane.org with
 esmtp (Exim 4.43) id 1GnC7R-0003nq-Fh for gcvg-git@gmane.org; Thu, 23 Nov
 2006 11:47:49 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand id
 S933572AbWKWKrq (ORCPT <rfc822;gcvg-git@m.gmane.org>); Thu, 23 Nov 2006
 05:47:46 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S933573AbWKWKrq
 (ORCPT <rfc822;git-outgoing>); Thu, 23 Nov 2006 05:47:46 -0500
Received: from cam-admin0.cambridge.arm.com ([193.131.176.58]:31456 "EHLO
 cam-admin0.cambridge.arm.com") by vger.kernel.org with ESMTP id
 S933572AbWKWKrp (ORCPT <rfc822;git@vger.kernel.org>); Thu, 23 Nov 2006
 05:47:45 -0500
Received: from cam-owa2.Emea.Arm.com (cam-owa2.emea.arm.com [10.1.105.18]) by
 cam-admin0.cambridge.arm.com (8.12.6/8.12.6) with ESMTP id kANAlBYo026838;
 Thu, 23 Nov 2006 10:47:11 GMT
Received: from localhost.localdomain ([10.1.255.211]) by
 cam-owa2.Emea.Arm.com with Microsoft SMTPSVC(6.0.3790.0); Thu, 23 Nov 2006
 10:47:22 +0000
To: Otavio Salvador <otavio@debian.org>
Sender: git-owner@vger.kernel.org

Otavio Salvador <otavio@debian.org> wrote:
> I'm a happy user of stgit together with git to maintain a patch queue
> while I or the company team is working on patches that will be send
> for merging. Both works great but we're having troubles when we try to
> clone a stgit repository.
>
> When I clone the repository it grab the source but it loses the
> metadata. I would like to grab those too. Does anybody has a solution
> or a trick how I can do that?

Most of the StGIT metadata can be generated by "uncommit" (the reason
I still keep a lot of this metadata like author etc. is for
speed). However, I'm not sure how well this would work since you can
nor synchronise the patches afterwards. StGIT works well for sharing
patches via e-mail but you might want to consider topic branches
instead of patches (though StGIT seems more convenient).

Another idea is to export the patches (stg export) to a common place
and import them in the other tree (stg import --series --replace). I
could also add a --sync option to "import", instead of --replace,
which would perform a three-way merge with the coresponding local
patches so that it grabs any additional changes in both repositories
or branches (similar to "pick --fold", option which I added for the
same reason).

Yet another idea is a "stg import" command for remote repositories or
branches which would bring in the StGIT metadata.

At the bottom of the TODO list is something that would solve this,
only that I've never found the time to think about it properly. I work
on several branches (and even separate trees) and share patches
between them. It would be nice to be able to synchronise the changes
to these patches.

-- 
