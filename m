Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-3.6 required=3.0 tests=AWL,BAYES_00,
	FREEMAIL_FORGED_FROMDOMAIN,FREEMAIL_FROM,HEADER_FROM_DIFFERENT_DOMAINS,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_HI shortcircuit=no autolearn=ham
	autolearn_force=no version=3.4.2
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id 067271F453
	for <e@80x24.org>; Mon, 21 Jan 2019 14:53:19 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729599AbfAUOxR (ORCPT <rfc822;e@80x24.org>);
        Mon, 21 Jan 2019 09:53:17 -0500
Received: from mout.gmx.net ([212.227.15.18]:38817 "EHLO mout.gmx.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1729072AbfAUOxR (ORCPT <rfc822;git@vger.kernel.org>);
        Mon, 21 Jan 2019 09:53:17 -0500
Received: from [192.168.0.129] ([37.201.193.149]) by mail.gmx.com (mrgmx001
 [212.227.17.190]) with ESMTPSA (Nemesis) id 0MKprU-1glawq2SRM-00051J; Mon, 21
 Jan 2019 15:53:12 +0100
Date:   Mon, 21 Jan 2019 15:52:56 +0100 (STD)
From:   Johannes Schindelin <Johannes.Schindelin@gmx.de>
X-X-Sender: virtualbox@gitforwindows.org
To:     "Khurshid, Beenish" <Beenish.Khurshid@thisisant.com>
cc:     "git@vger.kernel.org" <git@vger.kernel.org>
Subject: RE: git commits unstaged files
In-Reply-To: <738f3d692f534c21af34256f391744b4@thisisant.com>
Message-ID: <nycvar.QRO.7.76.6.1901211535321.41@tvgsbejvaqbjf.bet>
References: <19f764a20b384e099372921d76ec4f73@thisisant.com> <nycvar.QRO.7.76.6.1901181129310.41@tvgsbejvaqbjf.bet> <738f3d692f534c21af34256f391744b4@thisisant.com>
User-Agent: Alpine 2.21.1 (DEB 209 2017-03-23)
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
X-Provags-ID: V03:K1:+HdNCoVGf51bEJzZn/y9yhQM04NL+0HhZgGK0dAQMBRbwrK+uAX
 0XpjxkWGAWmMxNcClQsflEumxucoU1ZoK/sQXjSeM1xIeilyFnMgF7M6fbT5OvCu8cffpBy
 RpRn0zKOdKedejGpAxzHhKbHEyCXObePpZLrOtGGchRuzmTWlEVg/4puHCYcTzZtwdUm7+D
 glN7u34Bs77Dl4spzgXnw==
X-UI-Out-Filterresults: notjunk:1;V03:K0:hG+uCgqVRg0=:ydV3Pmlwg2B92gX3QTLBCf
 sJpRZdKBB+AvlUpxWVKvMFYCFug2BYvJC4zbpF/aktSf6SweO+AIiR2q9D265SPmelfqPI4zk
 4kzql5ygZwTCATx7f30Whf4sEArsZQ/W6w3g7yPlvwkZvEv17/4H7B01bS3qzyDD7O7w804JP
 w1GS5RoCCLRSuhRDysWu9AVGnViah365v6i4yHG0wSbbW5mr4mvTi4mdJ3Y2d/6wNri+H/ajm
 7SO5lXeF4zzRMju1Nq28aa7ZdCZG2l4kpAhCbqx1L3bq7SeIzrdKS7pl1Ojn3+wMGQ0ZOjEsY
 BcUvzZKwb91QTE0++BSu04SNEUNvyHCnnFWw1a3KGF0C8mL1B1yXDgZ1GqPwNx5tCGAXR+BI6
 lPqNzVqYOZy0aGjV4cFOcoD+xm5rRknjG6/h7sE1wH6yfYFHNH5pNUM11mCRA6VlFAeAu3ftp
 tjCaivKilK5HvD6YfKBtBn753bRtlxpXhpM00hRQB3VE64LDdH3v/yf5lj0R4VfrMBXCTVu1r
 Gwch+O3RrF5JbjkjIzMWhn6hBzdpzQvGjTL/tvAAXXNyYzYJcsbuqQZM6VOyz+tjU4GDp+KwT
 YGv1Ys8cxBPa5/4KJLaVoVUvtRtW8NHa0QfKt7vCf91u2fh7Jh+RZG9SDUrsFDA3jdzxiAqra
 VYAxYwEI+XA4//gVzfo8rdyGOtu17yxMsIbauRQY1g1lkAOEZex5WCbK0xOG+GUuyoPm/B3l0
 buIUwKdwLnIIEHQDk2TFZLXcFBd4xYxvs+k54r0R7ucE9TthiQXjcl9SwibzSz1ADOkVnA24J
 FhPvopweO61rFH2GfCFG1vUShoXDv3L2kcCbi+BY9aBTNKu4DT8ZrBIT6Z0SP2BOUzF0oH5Ah
 lnPRQBJfXHGTb/ZndlSs8LXC1kRW8yzEcWjFZiA2AQhsB660LNyPCHdvAa5i/h/iL4M5PUrXu
 m1ZDK/TXJ7w==
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

Hi Beenish,

On Fri, 18 Jan 2019, Khurshid, Beenish wrote:

> Thanks so much for your response!
> 
> As I went down the path of trying to prove the problem via an MCVE, and found that the problem was not reproducing as I was expecting, I found out that one of the pre-commit hooks had a bug for a corner case that I regularly traverse, and that the bug had been fixed in an updated version of the hook.

Excellent!

> Appreciate your guidance, and my sincere apologies for wasting your time on this issue!

No need to apologize: you did the right thing by writing up a detailed bug
report (even if it turned out to miss one crucial detail, the pre-commit
hook). That is so much better than what I often deal with. Would you
believe that some users are under the impression that Twitter is a
perfectly fine medium to report bugs [*1*]?

> Sincere respect for all the work you do for Git for Windows, and thus software devs the world over.

Thank you for that lovely note. It means a lot to me.

Ciao,
Johannes

Footnote *1*: https://twitter.com/jessfraz/status/765016243854192641

> Kind Regards,
> Beenish
> 
> -----Original Message-----
> From: Johannes Schindelin <Johannes.Schindelin@gmx.de>
> Sent: January 18, 2019 3:33 AM
> To: Khurshid, Beenish <Beenish.Khurshid@thisisant.com>
> Cc: git@vger.kernel.org
> Subject: Re: git commits unstaged files
> 
> Hi Beenish,
> 
> On Thu, 17 Jan 2019, Khurshid, Beenish wrote:
> 
> > I frequently use 'git add -p' to filter changes before committing.
> > This usually works, but on many occasions, the use of add and commit
> > results in unstaged chunks and files being committed.
> >
> > Steps to reproduce:
> > 1. Create unstaged changes
> > 2. Use add -p to add some of those changes 3. Use git commit to commit
> > the staged changes
> >
> > Expectation: Only added chunks are committed.
> >
> > Result:
> > 1. When editing the commit message, the added files appear staged in
> > the comments at the end of the commit message, and the unstage files appear unstaged. (expected behaviour) 2. All unstaged changes and files are committed.
> > 3. Once git enters this state, even git add produces the same result: Using git add to only add some files (and not chunks), and subsequently committing, results in unstaged files also being committed.
> > 4. Even after restarting git bash, the behaviour persists.
> > 5. The same behaviour occurs when adding and committing a file, while
> > leaving other files unstaged, when using Git GUI instead of Git Bash
> >
> > Environment:
> > Git version 2.12.2.windows.2
> 
> That's almost two years old. We're at v2.20.1.windows.1 now.
> 
> > Windows 10 enterprise
> > Hooks: commit-msg, and pre-commit
> > Changes were being committed, reset, and rebased prior to this add -p
> > attempt
> 
> I cannot reproduce.
> 
> FWIW I sometimes have the same problem, but in all those cases the problem is my muscle memory that makes me add the `-a` option to `git commit` before I can stop myself.
> 
> > If more information is needed, please do not hesitate to contact me.
> > Since this is a significant part of my workflow, the failure of the
> > command to work in the expected way is fairly disruptive to my workflow.
> 
> You could investigate further by setting GIT_TRACE=1 to see whether any other Git command is run from your hooks.
> 
> In any case, if you desire help, the best way forward would be to generate a Minimal, Complete & Verifiable Example (MCVE,
> https://stackoverflow.com/help/mcve) that in particular does not require your particular setup such as hooks, specific Git version, etc.
> 
> Ciao,
> Johannes
> 
> >
> > Any help or thoughts would be appreciated!
> >
> > Kind Regards,
> > Beenish Khurshid, E.I.T I Applications Engineer ANT Wireless | 124 -
> > 30 Bow Street Common, Cochrane, AB, Canada T4C 2N1
> > P: 587.493.4156 | F: 403.932.6521
> >
> >
> >
> >
> >
> >
> 
> ________________________________
> 
> CONFIDENTIALITY NOTICE: This email and any attachments are for the sole use of the intended recipient(s) and contain information that may be Garmin confidential and/or Garmin legally privileged. If you have received this email in error, please notify the sender by reply email and delete the message. Any disclosure, copying, distribution or use of this communication (including attachments) by someone other than the intended recipient is prohibited. Thank you.
> 
