From: Jeff King <peff@peff.net>
Subject: Re: [PATCH] INSTALL: minor typo fix
Date: Tue, 27 Jan 2015 12:17:44 -0500
Message-ID: <20150127171743.GA2313@peff.net>
References: <1422375312-3798-1-git-send-email-kuleshovmail@gmail.com>
 <CAFOYHZBiMvU5=EpX7qn0wwrUwfZ2xzATKqRo4zPH+xmro7wVbA@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Cc: Alexander Kuleshov <kuleshovmail@gmail.com>,
	Junio C Hamano <gitster@pobox.com>, GIT <git@vger.kernel.org>
To: Chris Packham <judge.packham@gmail.com>
X-From: git-owner@vger.kernel.org Tue Jan 27 18:17:51 2015
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1YG9lu-0007ga-9A
	for gcvg-git-2@plane.gmane.org; Tue, 27 Jan 2015 18:17:50 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1757910AbbA0RRq (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Tue, 27 Jan 2015 12:17:46 -0500
Received: from cloud.peff.net ([50.56.180.127]:42402 "HELO cloud.peff.net"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with SMTP
	id S1755212AbbA0RRp (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 27 Jan 2015 12:17:45 -0500
Received: (qmail 3015 invoked by uid 102); 27 Jan 2015 17:17:45 -0000
Received: from Unknown (HELO peff.net) (10.0.1.1)
    by cloud.peff.net (qpsmtpd/0.84) with SMTP; Tue, 27 Jan 2015 11:17:45 -0600
Received: (qmail 2667 invoked by uid 107); 27 Jan 2015 17:18:13 -0000
Received: from sigill.intra.peff.net (HELO sigill.intra.peff.net) (10.0.0.7)
    by peff.net (qpsmtpd/0.84) with SMTP; Tue, 27 Jan 2015 12:18:13 -0500
Received: by sigill.intra.peff.net (sSMTP sendmail emulation); Tue, 27 Jan 2015 12:17:44 -0500
Content-Disposition: inline
In-Reply-To: <CAFOYHZBiMvU5=EpX7qn0wwrUwfZ2xzATKqRo4zPH+xmro7wVbA@mail.gmail.com>
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/263079>

On Wed, Jan 28, 2015 at 06:09:52AM +1300, Chris Packham wrote:

> On Wed, Jan 28, 2015 at 5:15 AM, Alexander Kuleshov
> <kuleshovmail@gmail.com> wrote:
> > Signed-off-by: Alexander Kuleshov <kuleshovmail@gmail.com>
> > ---
> >  INSTALL | 2 +-
> >  1 file changed, 1 insertion(+), 1 deletion(-)
> >
> > diff --git a/INSTALL b/INSTALL
> > index ffb071e..6f1c3d5 100644
> > --- a/INSTALL
> > +++ b/INSTALL
> > @@ -53,7 +53,7 @@ or
> >
> >  As a caveat: a profile-optimized build takes a *lot* longer since the
> >  git tree must be built twice, and in order for the profiling
> > -measurements to work properly, ccache must be disabled and the test
> > +measurements to work properly, cache must be disabled and the test
> >  suite has to be run using only a single CPU.  In addition, the profile
> >  feedback build stage currently generates a lot of additional compiler
> >  warnings.
> > --
> 
> That's not a typo ccache[1] is a compiler cache tool that can be used
> to speed up rebuilding object files. I don't know anything about the
> profile enabled builds but I imagine it has something to do with
> needing the 2nd build to produce difference object files from the
> first (with ccache enabled I imagine the 2nd build would result in
> identical output since on source files are changed between builds).

Yes, ccache creates a cache key for each file based on the command line
flags to the compiler, and the output of the pre-processor when run on
the file. The profiling data generated by the first run is outside of
what ccache knows about, so it can't include that information in its
cache key (and consequently, we get false cache hits).

So yeah. Not a typo.

-Peff
