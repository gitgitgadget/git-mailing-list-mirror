From: Michael Haggerty <mhagger@alum.mit.edu>
Subject: Idea: "git format-patch" should get more information out of git
Date: Sat, 27 Aug 2011 07:12:32 +0200
Message-ID: <4E587CC0.4090508@alum.mit.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
To: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sat Aug 27 07:14:35 2011
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@lo.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by lo.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1QxBE2-0004p0-Pn
	for gcvg-git-2@lo.gmane.org; Sat, 27 Aug 2011 07:14:35 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750882Ab1H0FMf (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Sat, 27 Aug 2011 01:12:35 -0400
Received: from einhorn.in-berlin.de ([192.109.42.8]:35218 "EHLO
	einhorn.in-berlin.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1750758Ab1H0FMf (ORCPT <rfc822;git@vger.kernel.org>);
	Sat, 27 Aug 2011 01:12:35 -0400
X-Envelope-From: mhagger@alum.mit.edu
Received: from [192.168.69.134] (p54BED1A9.dip.t-dialin.net [84.190.209.169])
	(authenticated bits=0)
	by einhorn.in-berlin.de (8.13.6/8.13.6/Debian-1) with ESMTP id p7R5CWnZ010965
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <git@vger.kernel.org>; Sat, 27 Aug 2011 07:12:33 +0200
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.20) Gecko/20110805 Lightning/1.0b2 Thunderbird/3.1.12
X-Scanned-By: MIMEDefang_at_IN-Berlin_e.V. on 192.109.42.8
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/180221>

It is a nuisance that the emails for a patch series have to be
hand-edited after they are generated by "git format-patch".  Some of the
problems with this workflow are

1. The extra information typed into the email series is not archived in
the git repository, and therefore the emails have to be kept around.

2. If it is discovered between "git format-patch" and "git send-email"
that one of the patches needs a tweak, then the email series has to be
generated anew and all of the hand-edits need to be redone.

3. If a "v2" of the patch series has to be created, all of the
hand-edits have to be done again.

4. There is no place to store the "additional information" (the part
that comes in patch emails between the "---" and the diffstat) while
working on the patch series; it all has to be remembered or noted
somewhere else until just before sending off the patch emails.

Wouldn't it be nice if more of the information needed by "git
format-patch" could be extracted from the git repository?  For example:

* The subject and body of the cover letter could be written to the log
message of an annotated tag at the tip of the patch series.  "git
format-patch" could retrieve it if the "--cover-letter" option is used.

* The CC and ACK lists could be written as specially-formatted lines in
the annotated tag's log message, or perhaps in a git note.

* The "additional information" could be written to git notes.

I don't know whether git notes are the right vessel for such
information.  For example, are they carried along when a commit is rebased?

I don't have time to implement any of this, but perhaps somebody thinks
this is a good idea and is inspired to work on it.

Michael

-- 
Michael Haggerty
mhagger@alum.mit.edu
http://softwareswirl.blogspot.com/
