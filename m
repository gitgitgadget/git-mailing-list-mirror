X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.176.0/21
X-Spam-Status: No, score=-3.5 required=3.0 tests=BAYES_00,
	HEADER_FROM_DIFFERENT_DOMAINS,MSGID_FROM_MTA_HEADER,RP_MATCHES_RCVD
	shortcircuit=no autolearn=ham autolearn_force=no version=3.4.0
From: Carl Worth <cworth@cworth.org>
Subject: Re: Avoiding uninteresting merges in Cairo
Date: Thu, 14 Dec 2006 20:01:13 -0800
Message-ID: <87slfh4xkm.wl%cworth@cworth.org>
References: <20061215020629.GK26202@spearce.org>
	<87tzzx4zm7.wl%cworth@cworth.org>
	<20061215032530.GM26202@spearce.org>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Thu_Dec_14_20:01:13_2006-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
NNTP-Posting-Date: Fri, 15 Dec 2006 04:02:42 +0000 (UTC)
Cc: git@vger.kernel.org
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
In-Reply-To: <20061215032530.GM26202@spearce.org>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/34468>
Received: from vger.kernel.org ([209.132.176.167]) by dough.gmane.org with
 esmtp (Exim 4.50) id 1Gv4HK-0002Nj-QF for gcvg-git@gmane.org; Fri, 15 Dec
 2006 05:02:35 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand id
 S965064AbWLOECZ (ORCPT <rfc822;gcvg-git@m.gmane.org>); Thu, 14 Dec 2006
 23:02:25 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S965065AbWLOECZ
 (ORCPT <rfc822;git-outgoing>); Thu, 14 Dec 2006 23:02:25 -0500
Received: from cworth.org ([217.160.249.188]:37190 "EHLO theworths.org"
 rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP id S965064AbWLOECY
 (ORCPT <rfc822;git@vger.kernel.org>); Thu, 14 Dec 2006 23:02:24 -0500
Received: (qmail 5162 invoked from network); 14 Dec 2006 23:02:23 -0500
Received: from localhost (HELO raht.cworth.org) (127.0.0.1) by localhost with
 SMTP; 14 Dec 2006 23:02:23 -0500
To: Shawn Pearce <spearce@spearce.org>
Sender: git-owner@vger.kernel.org

--pgp-sign-Multipart_Thu_Dec_14_20:01:13_2006-1
Content-Type: text/plain; charset=US-ASCII

On Thu, 14 Dec 2006 22:25:30 -0500, Shawn Pearce wrote:
> I saw three things happen to poor jwatt that really threw him for
> a loop, and I think they are all more likely related to Git than
> to the Cairo project specifically:

Yes. Also a fourth one was a filesystem case-insensitivity issue. We
recently imported an external library into cairo that had some
filenames with capital letters. We then renamed them to the
all-lowercase filenames we like. Poor jwatt was unlucky enough to have
cloned with a capitalized filename, and then was trying to pull the
latest with the lowercase filename and he got:

	fatal: Untracked working tree file 'test/pdiff/lpyramid.h'
	would be overwritten by merge

This was in some sense worse than the other problems since it stopped
him cold and gave him no idea what was wrong nor how to fix it.

>  * His user.name/user.email is probably not what he wanted;
>
>  * His Cygwin/Windows system made some *.c/*.c files 0755 without
>    him realizing it;

Those two issues did silently put garbage in the commits. I don't know
how to best fix the name/email thing. Maybe on the first commit with
no user.name and user.email configuration git could create them,
announce them to the user, and instruct them on how to change them:

	No name or email configuration exists. Using:

		U-JONATHAN-X60S\jonathan <jonathan@Jonathan-X60s.(none)>

	You can change these with the following commands:

		git repo-config user.name Your Name
		git repo-config user.email user@example.com

And maybe mention --global as well.

As for the filemode setting, shouldn't that be configured by default
the right way for Windows git?

>  * gitweb made it appear as though a whole lot of Carl's recent
>    work was somehow undone in the merge.

That looks like a simple gitweb bug. None of the other tools, (gitk,
git log -p), consider a trivial merge commit like this as having
anything interesting in it worth displaying.

-Carl

--pgp-sign-Multipart_Thu_Dec_14_20:01:13_2006-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQBFgh4J6JDdNq8qSWgRAm49AJsHv6dAo5i9aL6qgOm6qUuwWRrEIQCgqlw1
X/zIRDkMvaA0eJ6fD5UxECo=
=tetG
-----END PGP SIGNATURE-----

