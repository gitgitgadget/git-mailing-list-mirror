From: "=?UTF-8?Q?Andr=C3=A9_Goddard_Rosa?=" <andre.goddard@gmail.com>
Subject: [Resend Trivial PATCH] Print the real filename whose opening failed.
Date: Sun, 25 Nov 2007 19:38:09 -0200
Message-ID: <b8bf37780711251338p500797e7h3633dd3189311101@mail.gmail.com>
References: <b8bf37780711211700g48a738b1xa147d1e7000ee76@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_33514_17209788.1196026689334"
Cc: "Git Mailing List" <git@vger.kernel.org>
To: "Junio C Hamano" <gitster@pobox.com>
X-From: git-owner@vger.kernel.org Sun Nov 25 22:38:36 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1IwPBS-0001eV-9e
	for gcvg-git-2@gmane.org; Sun, 25 Nov 2007 22:38:34 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753930AbXKYViM (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Sun, 25 Nov 2007 16:38:12 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1753491AbXKYViM
	(ORCPT <rfc822;git-outgoing>); Sun, 25 Nov 2007 16:38:12 -0500
Received: from ug-out-1314.google.com ([66.249.92.175]:11116 "EHLO
	ug-out-1314.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1753387AbXKYViL (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 25 Nov 2007 16:38:11 -0500
Received: by ug-out-1314.google.com with SMTP id z38so808378ugc
        for <git@vger.kernel.org>; Sun, 25 Nov 2007 13:38:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=CYtlnTa6rPX9WtTqND0jw0B1ace/TmKSUuCYQN5wLWs=;
        b=g4MzPNSS95iuv7ttRjI8fyze16aTyfLBV9w0f+PxjHxQvSEOtTD33csKVYvQPhN13q1ZP3Vn1rYgtCFNB3ZbFnwAAvee8z82ta1MmLEmC4f8FlJbZ93mG5fCyoY2Ti+rsdwlJCKRj+dgC9Gfg8OT1JkscNqudw78DTCSMarSvJ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=EpfuS+GHFZT9pFgrEpVhqSkezC4nVEJDOtL97LQhlAqZun/z3h0tQdnIx458t4QNxSBeHKBFq7DwW7zew+L475cM6ldicC+6b3SlfcPqFFg9fNH4DW/kOnyRAF3fiu2RXypvF4oGeUUJ8g3jT9d6Nd7MTRnGFrFuZmlUgWq0NKs=
Received: by 10.78.122.16 with SMTP id u16mr2121539huc.1196026689341;
        Sun, 25 Nov 2007 13:38:09 -0800 (PST)
Received: by 10.78.120.18 with HTTP; Sun, 25 Nov 2007 13:38:09 -0800 (PST)
In-Reply-To: <b8bf37780711211700g48a738b1xa147d1e7000ee76@mail.gmail.com>
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/66009>

------=_Part_33514_17209788.1196026689334
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksIGFsbCEKCiAgICBQcmludCB0aGUgZmlsZW5hbWUgd2hvc2Ugb3BlbmluZyBmYWlsZWQuCgpG
cm9tIDg4YjdiZDg3M2I5N2JkODFlODU0ODI3YzljZDhmM2MzMDZkM2MzYWYgTW9uIFNlcCAxNyAw
MDowMDowMCAyMDAxCkZyb206ID0/dXRmLTg/cT9BbmRyPUMzPUE5PTIwR29kZGFyZD0yMFJvc2E/
PSA8YW5kcmUuZ29kZGFyZEBnbWFpbC5jb20+CkRhdGU6IFdlZCwgMjEgTm92IDIwMDcgMTg6NTk6
MTQgLTAyMDAKU3ViamVjdDogW1BBVENIXSBQcmludCB0aGUgcmVhbCBmaWxlbmFtZSB3aG9zZSBv
cGVuaW5nIGZhaWxlZC4KTUlNRS1WZXJzaW9uOiAxLjAKQ29udGVudC1UeXBlOiB0ZXh0L3BsYWlu
OyBjaGFyc2V0PXV0Zi04CkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDhiaXQKClNpZ25lZC1v
ZmYtYnk6IEFuZHLDqSBHb2RkYXJkIFJvc2EgPGFuZHJlLmdvZGRhcmRAZ21haWwuY29tPgotLS0K
IGh0dHAtcHVzaC5jICAgfCAgICA0ICsrLS0KIGh0dHAtd2Fsa2VyLmMgfCAgICA0ICsrLS0KIHNl
cnZlci1pbmZvLmMgfCAgICAyICstCiAzIGZpbGVzIGNoYW5nZWQsIDUgaW5zZXJ0aW9ucygrKSwg
NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9odHRwLXB1c2guYyBiL2h0dHAtcHVzaC5jCmlu
ZGV4IDkzMTQ2MjEuLmU2NzVjYTYgMTAwNjQ0Ci0tLSBhL2h0dHAtcHVzaC5jCisrKyBiL2h0dHAt
cHVzaC5jCkBAIC00MzMsNyArNDMzLDcgQEAgc3RhdGljIHZvaWQgc3RhcnRfZmV0Y2hfcGFja2Vk
KHN0cnVjdAp0cmFuc2Zlcl9yZXF1ZXN0ICpyZXF1ZXN0KQogICAgICAgIHBhY2tmaWxlID0gZm9w
ZW4ocmVxdWVzdC0+dG1wZmlsZSwgImEiKTsKICAgICAgICBpZiAoIXBhY2tmaWxlKSB7CiAgICAg
ICAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIlVuYWJsZSB0byBvcGVuIGxvY2FsIGZpbGUgJXMg
Zm9yIHBhY2siLAotICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSk7CisgICAgICAgICAg
ICAgICAgICAgICAgIHJlcXVlc3QtPnRtcGZpbGUpOwogICAgICAgICAgICAgICAgcmVtb3RlLT5j
YW5fdXBkYXRlX2luZm9fcmVmcyA9IDA7CiAgICAgICAgICAgICAgICBmcmVlKHVybCk7CiAgICAg
ICAgICAgICAgICByZXR1cm47CkBAIC05NDEsNyArOTQxLDcgQEAgc3RhdGljIGludCBmZXRjaF9p
bmRleCh1bnNpZ25lZCBjaGFyICpzaGExKQogICAgICAgIGluZGV4ZmlsZSA9IGZvcGVuKHRtcGZp
bGUsICJhIik7CiAgICAgICAgaWYgKCFpbmRleGZpbGUpCiAgICAgICAgICAgICAgICByZXR1cm4g
ZXJyb3IoIlVuYWJsZSB0byBvcGVuIGxvY2FsIGZpbGUgJXMgZm9yIHBhY2sgaW5kZXgiLAotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lKTsKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB0bXBmaWxlKTsKCiAgICAgICAgc2xvdCA9IGdldF9hY3RpdmVfc2xvdCgpOwogICAg
ICAgIHNsb3QtPnJlc3VsdHMgPSAmcmVzdWx0czsKZGlmZiAtLWdpdCBhL2h0dHAtd2Fsa2VyLmMg
Yi9odHRwLXdhbGtlci5jCmluZGV4IDQ0NGFlYmYuLmEzZmI1OTYgMTAwNjQ0Ci0tLSBhL2h0dHAt
d2Fsa2VyLmMKKysrIGIvaHR0cC13YWxrZXIuYwpAQCAtNDA1LDcgKzQwNSw3IEBAIHN0YXRpYyBp
bnQgZmV0Y2hfaW5kZXgoc3RydWN0IHdhbGtlciAqd2Fsa2VyLApzdHJ1Y3QgYWx0X2Jhc2UgKnJl
cG8sIHVuc2lnbmVkIGNoCiAgICAgICAgaW5kZXhmaWxlID0gZm9wZW4odG1wZmlsZSwgImEiKTsK
ICAgICAgICBpZiAoIWluZGV4ZmlsZSkKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcigiVW5h
YmxlIHRvIG9wZW4gbG9jYWwgZmlsZSAlcyBmb3IgcGFjayBpbmRleCIsCi0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmlsZW5hbWUpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRt
cGZpbGUpOwoKICAgICAgICBzbG90ID0gZ2V0X2FjdGl2ZV9zbG90KCk7CiAgICAgICAgc2xvdC0+
cmVzdWx0cyA9ICZyZXN1bHRzOwpAQCAtNzcwLDcgKzc3MCw3IEBAIHN0YXRpYyBpbnQgZmV0Y2hf
cGFjayhzdHJ1Y3Qgd2Fsa2VyICp3YWxrZXIsCnN0cnVjdCBhbHRfYmFzZSAqcmVwbywgdW5zaWdu
ZWQgY2hhCiAgICAgICAgcGFja2ZpbGUgPSBmb3Blbih0bXBmaWxlLCAiYSIpOwogICAgICAgIGlm
ICghcGFja2ZpbGUpCiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IoIlVuYWJsZSB0byBvcGVu
IGxvY2FsIGZpbGUgJXMgZm9yIHBhY2siLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZp
bGVuYW1lKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBmaWxlKTsKCiAgICAgICAg
c2xvdCA9IGdldF9hY3RpdmVfc2xvdCgpOwogICAgICAgIHNsb3QtPnJlc3VsdHMgPSAmcmVzdWx0
czsKZGlmZiAtLWdpdCBhL3NlcnZlci1pbmZvLmMgYi9zZXJ2ZXItaW5mby5jCmluZGV4IDBkMTMx
MmMuLmEwNTFlNDkgMTAwNjQ0Ci0tLSBhL3NlcnZlci1pbmZvLmMKKysrIGIvc2VydmVyLWluZm8u
YwpAQCAtMzUsNyArMzUsNyBAQCBzdGF0aWMgaW50IHVwZGF0ZV9pbmZvX3JlZnMoaW50IGZvcmNl
KQogICAgICAgIHNhZmVfY3JlYXRlX2xlYWRpbmdfZGlyZWN0b3JpZXMocGF0aDApOwogICAgICAg
IGluZm9fcmVmX2ZwID0gZm9wZW4ocGF0aDEsICJ3Iik7CiAgICAgICAgaWYgKCFpbmZvX3JlZl9m
cCkKLSAgICAgICAgICAgICAgIHJldHVybiBlcnJvcigidW5hYmxlIHRvIHVwZGF0ZSAlcyIsIHBh
dGgwKTsKKyAgICAgICAgICAgICAgIHJldHVybiBlcnJvcigidW5hYmxlIHRvIHVwZGF0ZSAlcyIs
IHBhdGgxKTsKICAgICAgICBmb3JfZWFjaF9yZWYoYWRkX2luZm9fcmVmLCBOVUxMKTsKICAgICAg
ICBmY2xvc2UoaW5mb19yZWZfZnApOwogICAgICAgIGFkanVzdF9zaGFyZWRfcGVybShwYXRoMSk7
Ci0tCjEuNS4zLjYuODYxLmdkNzk0LWRpcnR5CgoKCi0tIApbXXMsCkFuZHLDqSBHb2RkYXJkCg==
------=_Part_33514_17209788.1196026689334
Content-Type: text/x-patch;
 name=0005-Print-the-real-filename-whose-opening-failed.patch
Content-Transfer-Encoding: base64
X-Attachment-Id: f_f9aks9ew0
Content-Disposition: attachment;
 filename=0005-Print-the-real-filename-whose-opening-failed.patch

RnJvbSA4OGI3YmQ4NzNiOTdiZDgxZTg1NDgyN2M5Y2Q4ZjNjMzA2ZDNjM2FmIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiA9P3V0Zi04P3E/QW5kcj1DMz1BOT0yMEdvZGRhcmQ9MjBSb3Nh
Pz0gPGFuZHJlLmdvZGRhcmRAZ21haWwuY29tPgpEYXRlOiBXZWQsIDIxIE5vdiAyMDA3IDE4OjU5
OjE0IC0wMjAwClN1YmplY3Q6IFtQQVRDSF0gUHJpbnQgdGhlIHJlYWwgZmlsZW5hbWUgd2hvc2Ug
b3BlbmluZyBmYWlsZWQuCk1JTUUtVmVyc2lvbjogMS4wCkNvbnRlbnQtVHlwZTogdGV4dC9wbGFp
bjsgY2hhcnNldD11dGYtOApDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA4Yml0CgpTaWduZWQt
b2ZmLWJ5OiBBbmRyw6kgR29kZGFyZCBSb3NhIDxhbmRyZS5nb2RkYXJkQGdtYWlsLmNvbT4KLS0t
CiBodHRwLXB1c2guYyAgIHwgICAgNCArKy0tCiBodHRwLXdhbGtlci5jIHwgICAgNCArKy0tCiBz
ZXJ2ZXItaW5mby5jIHwgICAgMiArLQogMyBmaWxlcyBjaGFuZ2VkLCA1IGluc2VydGlvbnMoKyks
IDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvaHR0cC1wdXNoLmMgYi9odHRwLXB1c2guYwpp
bmRleCA5MzE0NjIxLi5lNjc1Y2E2IDEwMDY0NAotLS0gYS9odHRwLXB1c2guYworKysgYi9odHRw
LXB1c2guYwpAQCAtNDMzLDcgKzQzMyw3IEBAIHN0YXRpYyB2b2lkIHN0YXJ0X2ZldGNoX3BhY2tl
ZChzdHJ1Y3QgdHJhbnNmZXJfcmVxdWVzdCAqcmVxdWVzdCkKIAlwYWNrZmlsZSA9IGZvcGVuKHJl
cXVlc3QtPnRtcGZpbGUsICJhIik7CiAJaWYgKCFwYWNrZmlsZSkgewogCQlmcHJpbnRmKHN0ZGVy
ciwgIlVuYWJsZSB0byBvcGVuIGxvY2FsIGZpbGUgJXMgZm9yIHBhY2siLAotCQkJZmlsZW5hbWUp
OworCQkJcmVxdWVzdC0+dG1wZmlsZSk7CiAJCXJlbW90ZS0+Y2FuX3VwZGF0ZV9pbmZvX3JlZnMg
PSAwOwogCQlmcmVlKHVybCk7CiAJCXJldHVybjsKQEAgLTk0MSw3ICs5NDEsNyBAQCBzdGF0aWMg
aW50IGZldGNoX2luZGV4KHVuc2lnbmVkIGNoYXIgKnNoYTEpCiAJaW5kZXhmaWxlID0gZm9wZW4o
dG1wZmlsZSwgImEiKTsKIAlpZiAoIWluZGV4ZmlsZSkKIAkJcmV0dXJuIGVycm9yKCJVbmFibGUg
dG8gb3BlbiBsb2NhbCBmaWxlICVzIGZvciBwYWNrIGluZGV4IiwKLQkJCSAgICAgZmlsZW5hbWUp
OworCQkJICAgICB0bXBmaWxlKTsKIAogCXNsb3QgPSBnZXRfYWN0aXZlX3Nsb3QoKTsKIAlzbG90
LT5yZXN1bHRzID0gJnJlc3VsdHM7CmRpZmYgLS1naXQgYS9odHRwLXdhbGtlci5jIGIvaHR0cC13
YWxrZXIuYwppbmRleCA0NDRhZWJmLi5hM2ZiNTk2IDEwMDY0NAotLS0gYS9odHRwLXdhbGtlci5j
CisrKyBiL2h0dHAtd2Fsa2VyLmMKQEAgLTQwNSw3ICs0MDUsNyBAQCBzdGF0aWMgaW50IGZldGNo
X2luZGV4KHN0cnVjdCB3YWxrZXIgKndhbGtlciwgc3RydWN0IGFsdF9iYXNlICpyZXBvLCB1bnNp
Z25lZCBjaAogCWluZGV4ZmlsZSA9IGZvcGVuKHRtcGZpbGUsICJhIik7CiAJaWYgKCFpbmRleGZp
bGUpCiAJCXJldHVybiBlcnJvcigiVW5hYmxlIHRvIG9wZW4gbG9jYWwgZmlsZSAlcyBmb3IgcGFj
ayBpbmRleCIsCi0JCQkgICAgIGZpbGVuYW1lKTsKKwkJCSAgICAgdG1wZmlsZSk7CiAKIAlzbG90
ID0gZ2V0X2FjdGl2ZV9zbG90KCk7CiAJc2xvdC0+cmVzdWx0cyA9ICZyZXN1bHRzOwpAQCAtNzcw
LDcgKzc3MCw3IEBAIHN0YXRpYyBpbnQgZmV0Y2hfcGFjayhzdHJ1Y3Qgd2Fsa2VyICp3YWxrZXIs
IHN0cnVjdCBhbHRfYmFzZSAqcmVwbywgdW5zaWduZWQgY2hhCiAJcGFja2ZpbGUgPSBmb3Blbih0
bXBmaWxlLCAiYSIpOwogCWlmICghcGFja2ZpbGUpCiAJCXJldHVybiBlcnJvcigiVW5hYmxlIHRv
IG9wZW4gbG9jYWwgZmlsZSAlcyBmb3IgcGFjayIsCi0JCQkgICAgIGZpbGVuYW1lKTsKKwkJCSAg
ICAgdG1wZmlsZSk7CiAKIAlzbG90ID0gZ2V0X2FjdGl2ZV9zbG90KCk7CiAJc2xvdC0+cmVzdWx0
cyA9ICZyZXN1bHRzOwpkaWZmIC0tZ2l0IGEvc2VydmVyLWluZm8uYyBiL3NlcnZlci1pbmZvLmMK
aW5kZXggMGQxMzEyYy4uYTA1MWU0OSAxMDA2NDQKLS0tIGEvc2VydmVyLWluZm8uYworKysgYi9z
ZXJ2ZXItaW5mby5jCkBAIC0zNSw3ICszNSw3IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2luZm9fcmVm
cyhpbnQgZm9yY2UpCiAJc2FmZV9jcmVhdGVfbGVhZGluZ19kaXJlY3RvcmllcyhwYXRoMCk7CiAJ
aW5mb19yZWZfZnAgPSBmb3BlbihwYXRoMSwgInciKTsKIAlpZiAoIWluZm9fcmVmX2ZwKQotCQly
ZXR1cm4gZXJyb3IoInVuYWJsZSB0byB1cGRhdGUgJXMiLCBwYXRoMCk7CisJCXJldHVybiBlcnJv
cigidW5hYmxlIHRvIHVwZGF0ZSAlcyIsIHBhdGgxKTsKIAlmb3JfZWFjaF9yZWYoYWRkX2luZm9f
cmVmLCBOVUxMKTsKIAlmY2xvc2UoaW5mb19yZWZfZnApOwogCWFkanVzdF9zaGFyZWRfcGVybShw
YXRoMSk7Ci0tIAoxLjUuMy42Ljg2MS5nZDc5NC1kaXJ0eQoK
------=_Part_33514_17209788.1196026689334--
