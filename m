From: Takashi Iwai <tiwai@suse.de>
Subject: Re: [GIT PULL] sound fixes for 3.6-rc6
Date: Thu, 13 Sep 2012 15:25:47 +0200
Message-ID: <s5hligeyrz8.wl%tiwai@suse.de>
References: <s5h392m1728.wl%tiwai@suse.de>
	<CA+55aFyo6do-dZiZMiwZkN1Ko+W58+4-zkbfJnpQR+ufw=+8ig@mail.gmail.com>
	<s5hzk4uyvsr.wl%tiwai@suse.de>
	<s5hvcfiyum4.wl%tiwai@suse.de>
	<20120913130344.GC4287@sigill.intra.peff.net>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: Linus Torvalds <torvalds@linux-foundation.org>,
	linux-kernel@vger.kernel.org, Junio C Hamano <gitster@pobox.com>,
	Git Mailing List <git@vger.kernel.org>
To: Jeff King <peff@peff.net>
X-From: linux-kernel-owner@vger.kernel.org Thu Sep 13 15:26:06 2012
Return-path: <linux-kernel-owner@vger.kernel.org>
Envelope-to: glk-linux-kernel-3@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-kernel-owner@vger.kernel.org>)
	id 1TC9Qg-000755-1q
	for glk-linux-kernel-3@plane.gmane.org; Thu, 13 Sep 2012 15:26:02 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753525Ab2IMNZv (ORCPT <rfc822;glk-linux-kernel-3@m.gmane.org>);
	Thu, 13 Sep 2012 09:25:51 -0400
Received: from cantor2.suse.de ([195.135.220.15]:42744 "EHLO mx2.suse.de"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751260Ab2IMNZu (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 13 Sep 2012 09:25:50 -0400
Received: from relay1.suse.de (unknown [195.135.220.254])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTP id 1A39CA329E;
	Thu, 13 Sep 2012 15:25:48 +0200 (CEST)
In-Reply-To: <20120913130344.GC4287@sigill.intra.peff.net>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/24.1
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/205369>

At Thu, 13 Sep 2012 09:03:44 -0400,
Jeff King wrote:
> 
> On Thu, Sep 13, 2012 at 02:28:51PM +0200, Takashi Iwai wrote:
> 
> > > FWIW, it was an output from git-pull-request, which fell back to the
> > > equivalent branch.  Usually I check it manually but I forgot it at
> > > this time just before going to a meeting.
> > > 
> > > This was with git 1.7.11.5.  I'll check whether this still happens
> > > with 1.7.12.
> > 
> > The same problem still happens with git 1.7.12.
> > This is rather annoying than useful.
> 
> I can't reproduce here. What is your exact request-pull invocation? Is
> request-pull showing a warning like:
> 
>   warn: You locally have sound-3.6 but it does not (yet)
>   warn: appear to be at git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound.git
>   warn: Do you want to push it there, perhaps?

Hm, it looks like the check is performed only for tag objects.
In the example below, no warning appears:
    % git tag mytest for-next
    % git request-pull mytest~ git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound.git mytest

With an annotated or a signed tag, git seems giving a warning like
above, indeed.  So my test seemed wrong.  Sorry for the noise.

In the previous case, I don't know what really screwed up, since it
was against a signed tag.  Maybe I overlooked the warning as I'm
redirecting the output to a file.

> (it should do so since v1.7.11.2). Maybe we need to make it possible to
> bump that warning to a fatal error?

Yes, please!  It's easily overlooked.
Better to be "strict but correct" than "friendly but wrong".

Just give an option to ignore the error if people really want to
ignore it.


thanks,

Takashi
