From: =?ISO-8859-1?Q?S=E9bastien?= Cevey <seb@cine7.net>
Subject: [PATCH v3 0/3] gitweb: Optional grouping of projects by category
Date: Thu, 04 Dec 2008 01:39:18 +0100
Message-ID: <87ljuw22q1.wl%seb@cine7.net>
References: <87wsei1uvp.wl%seb@cine7.net>
	<200812030036.13562.jnareb@gmail.com>
	<87prk91got.wl%seb@cine7.net>
	<7viqq0c1pg.fsf@gitster.siamese.dyndns.org>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
Cc: Jakub Narebski <jnareb@gmail.com>, git@vger.kernel.org,
	Petr Baudis <pasky@suse.cz>,
	Gustavo Sverzut Barbieri <barbieri@profusion.mobi>
To: Junio C Hamano <gitster@pobox.com>
X-From: git-owner@vger.kernel.org Thu Dec 04 01:39:40 2008
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1L82Fk-0004ms-98
	for gcvg-git-2@gmane.org; Thu, 04 Dec 2008 01:39:36 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751790AbYLDAiT convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git-2@m.gmane.org>); Wed, 3 Dec 2008 19:38:19 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751449AbYLDAiT
	(ORCPT <rfc822;git-outgoing>); Wed, 3 Dec 2008 19:38:19 -0500
Received: from smtp.nimag.net ([62.220.136.11]:35707 "EHLO smtp.nimag.net"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751254AbYLDAiS convert rfc822-to-8bit (ORCPT
	<rfc822;git@vger.kernel.org>); Wed, 3 Dec 2008 19:38:18 -0500
Received: from crookshanks.cine7.net (85-218-46-136.dclient.lsne.ch [85.218.46.136])
	by smtp.nimag.net (Postfix) with ESMTP id 4FF4ECB0A89;
	Thu,  4 Dec 2008 01:38:13 +0100 (CET)
In-Reply-To: <7viqq0c1pg.fsf@gitster.siamese.dyndns.org>
User-Agent: Wanderlust/2.14.0 (Africa)
X-Message-Flag: OUTLOOK ERROR: Large chicken feathers stuck in power supply fan.
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/102310>

At Wed, 03 Dec 2008 14:51:07 -0800, Junio C Hamano wrote:

Good evening,

> I am not sure if always sorting the categories alphabetically is a
> severe enough restriction, but if it was, you can use
> @project_list_categories array that disables the feature when empty
> and otherwise enumerates the categories in order.  Just an idle
> thought.

I could add that if requested to, though Jakub seems to think
alphabetical order is also fine.  I'll be pushing v3 in a minute with
commits split by feature update and the rename to
git_get_file_or_project_config.

All this gymnastics helped me getting more familiar with add -i and
other fun workflow, thanks for the exercise[1] ;-)

> > - When displaying a subset of all the projects, only the categories=
 with
> >   projects in the chosen subset are displayed.
>=20
> Could you clarify this bit?
>=20
> It is not very clear to me how this subset selection happens.  As far=
 as I
> can see, the user does not choose the category to view, but lets the =
usual
> page limiting to decide at which project to start and stop placing on=
 the
> page

Right,

> and only show the ones in the same category as the one that happened
> to be the first on the page.

I'm not sure I understand what you meant by this.

What I meant is that, as you said, the subset of projects to display
is defined by the usual $from/$to mechanism.  And that the category
header for all the displayed projects is present; in other words, the
header for some category C is shown iff one or more of the projects in
C is present on the page.  It's really that simple.

It also means that we might only see a subset of the projects in the
first and last category but hey, if you asked for range N-M of the
projects, that's what you get!

I hope I did not confuse you further.


[1] OT: I didn't find a simple command to do this:

    $ git diff ..the-end-state > finish.patch
    $ patch -p1 < finish.patch
    $ git commit -a -s

    (where the original HEAD and the-end-state have an older MRCA with
     rewritten history inbetween, and I don't want to apply that
     history and solve conflicts, just "get my tree to the end state".)

    Any tip?

--=20
S=E9bastien Cevey / inso.cc

" Rest is for the weak and the dead. "
