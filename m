Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.1 (2015-04-28) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-3.5 required=3.0 tests=AWL,BAYES_00,
	FREEMAIL_FORGED_FROMDOMAIN,FREEMAIL_FROM,HEADER_FROM_DIFFERENT_DOMAINS,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_HI shortcircuit=no autolearn=ham
	autolearn_force=no version=3.4.1
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id 0308A1F453
	for <e@80x24.org>; Fri,  9 Nov 2018 12:31:11 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727731AbeKIWLe (ORCPT <rfc822;e@80x24.org>);
        Fri, 9 Nov 2018 17:11:34 -0500
Received: from mout.gmx.net ([212.227.15.18]:39801 "EHLO mout.gmx.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1727560AbeKIWLe (ORCPT <rfc822;git@vger.kernel.org>);
        Fri, 9 Nov 2018 17:11:34 -0500
Received: from [192.168.0.129] ([37.201.193.149]) by mail.gmx.com (mrgmx001
 [212.227.17.190]) with ESMTPSA (Nemesis) id 0LfTVx-1fjV901qSf-00p93n; Fri, 09
 Nov 2018 13:31:07 +0100
Date:   Fri, 9 Nov 2018 13:31:06 +0100 (STD)
From:   Johannes Schindelin <Johannes.Schindelin@gmx.de>
X-X-Sender: virtualbox@gitforwindows.org
To:     Jeffrey Walton <noloader@gmail.com>
cc:     Git List <git@vger.kernel.org>
Subject: Re: GPG signing is bent on WIndows
In-Reply-To: <CAH8yC8ngjy_NGhgepRu+331L_=QQ4bpvMe5T4OtjLXJR3OZ-NQ@mail.gmail.com>
Message-ID: <nycvar.QRO.7.76.6.1811091328350.39@tvgsbejvaqbjf.bet>
References: <CAH8yC8ngjy_NGhgepRu+331L_=QQ4bpvMe5T4OtjLXJR3OZ-NQ@mail.gmail.com>
User-Agent: Alpine 2.21.1 (DEB 209 2017-03-23)
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
X-Provags-ID: V03:K1:GFD9szRT1TQnWv9QwCeAFfhrD5GkyyrHFJcse6XZeiR8KUUoeHd
 HGKZmFwDllgfkvB7lYocvd8TcCNr29s34PDMDeIU4xEpe18EEcdik3tnEErgcFnWlSZQx70
 GqR5rRjYmjVL0YLln7p4g+K16BpW80XYb+9ZEHnLSfyqNZGB6cpKNdwWId7q9QNWH5GY2uO
 dgSmXGmBFIw31BBolDexw==
X-UI-Out-Filterresults: notjunk:1;V01:K0:zx/9/iuz58Q=:kN4dC8VqdIGrmo7xAF+AWa
 w7tEUVbMUc9Mcp9wuCddVbG4JkWJE/a6jCQR36c534uhfwd5+adlDUY6eSlHF7HpiJcPW0grn
 Gkw2QQaknmfgLTZN32t/tSRFvzPh291jLB3El+agnXkM0NYvIvAcyVoHvvdA/korL59ZSSVyq
 lHNGXCvDrSRnZS+ZzXq6pOGg+gQf7M5UystHD7fn9UHw1kcLj7Tbf8TH5WntuJ1hcaTA8OfJ4
 V4WhnV8ZsNnzh0Py4jcXCvyx09UJCQPrrvyP3pok5OQp3WAo7FCEadznt2b8gjG8GIJ1wefdQ
 lSJYAXVkN1Nr+VrRwhOiXEhLiMpDPk4FvuVrMUro9Pw8xxNP8xP/HbJwINfXR5CfGjlODw70i
 PrQ4FUZ1e2vpUA5ULErr7belhkt21LaATMCHT5EOsjCCv34TwN9jpuAodUY8c5n9xgS839clP
 iLfFZMBbdzbkatWD5BHq0hWFtuSTnvwYduJRPLf2040kfm1mIL1Zl/EQW9omONF/WP/M0n/fh
 n5A95CndxBPrFtiRrHDppYMXTe+73DmFKcZH8PRHEdv574YSIqRkPM6j/blshZFpayegtbE+T
 7uV1nIduZdRHw0sjxvaOi1A2QxVszQQSZZOTK+Mw+l2meaIh2Mb6s7AnIImKk+E88AYwEVYHF
 NncaAefoc61V9a+kXPUsu0vDDNlLvyHzfTNQvDUkqjVVDDmCAof2x0foVomt+WEBnZjCih8eo
 3zVLcv6ZPrl8sBz7Cy2OkkkDieqbSGUFB+HDK+SEVnVHq3hXt0zpazuJd+UHW1Oo7QSup+Ip+
 wu6ZhKVNOkRXVyZ0byOyYyOBfT0/i1J68zoX++MV9RsIB7LEyvs6t4PBZZRX3iiq2qojbmG+R
 6wy0iRNsUZG8Gx73DraOZXnyKem9UUwgo+fupGFsNBnyPvLkC7ASRWSKoI4uCcdJZYhiyAreI
 WTQ96oKIOEw==
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

Hi Jeff,

On Wed, 26 Sep 2018, Jeffrey Walton wrote:

> Several weeks ago I updated to the latest Git for Windows (when
> prompted by the version check). At the time I noticed:
> 
> $ git commit -S -am "Fix unset MAKE variable in test scripts"
> gpg: signing failed: No pinentry
> gpg: signing failed: No pinentry
> error: gpg failed to sign the data
> fatal: failed to write commit object
> 
> I got to look at it today. On Windows:
> 
> $ cat ~/.gnupg/gpg-agent.conf
> pinentry-program
> /usr/local/MacGPG2/libexec/pinentry-mac.app/Contents/MacOS/pinentry-mac

Git for Windows is partially based off of MSYS2, which upgraded GPG from
v1 to v2, and one of the consequences is that v2 handles interaction with
the user differently.

My guess is that you copied your config from a Mac, and the path is simply
incorrect. I would wager a bet that it starts working when you remove that
line with the incorrect path, as the default should work plenty fine for
you.

Ciao,
Johannes
