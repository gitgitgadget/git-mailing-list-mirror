From: Martin Waitz <tali@admingilde.org>
Subject: Re: [PATCH] Make sure an autogenerated version has at least four parts
Date: Fri, 25 May 2007 11:47:43 +0200
Message-ID: <20070525094743.GO5412@admingilde.org>
References: <11797159411969-git-send-email-sam.vilain@catalyst.net.nz> <20070521073650.GV5412@admingilde.org> <46563CE1.9020007@vilain.net>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="Fh0SynPkUvrWGMR0"
Cc: Sam Vilain <sam.vilain@catalyst.net.nz>,
	Junio C Hamano <junkio@cox.net>, git@vger.kernel.org
To: Sam Vilain <sam@vilain.net>
X-From: git-owner@vger.kernel.org Fri May 25 11:47:52 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1HrWOl-0008R9-UW
	for gcvg-git@gmane.org; Fri, 25 May 2007 11:47:52 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751389AbXEYJrq (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Fri, 25 May 2007 05:47:46 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751163AbXEYJrq
	(ORCPT <rfc822;git-outgoing>); Fri, 25 May 2007 05:47:46 -0400
Received: from mail.admingilde.org ([213.95.32.147]:58603 "EHLO
	mail.admingilde.org" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751389AbXEYJrq (ORCPT <rfc822;git@vger.kernel.org>);
	Fri, 25 May 2007 05:47:46 -0400
Received: from martin by mail.admingilde.org with local  (Exim 4.50 #1)
	id 1HrWOd-0000zE-Ab; Fri, 25 May 2007 11:47:43 +0200
Content-Disposition: inline
In-Reply-To: <46563CE1.9020007@vilain.net>
X-PGP-Fingerprint: B21B 5755 9684 5489 7577  001A 8FF1 1AC5 DFE8 0FB2
User-Agent: Mutt/1.5.9i
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/48348>


--Fh0SynPkUvrWGMR0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

hoi :)

On Fri, May 25, 2007 at 01:33:21PM +1200, Sam Vilain wrote:
> Martin Waitz wrote:
> > On Mon, May 21, 2007 at 02:52:21PM +1200, Sam Vilain wrote:
> >> Otherwise, a custom "v1.5.2.42.gd00b" is considered newer than a
> >> "v1.5.2.1.69.gcafe".
> >=20
> > or just use git describe output without replacing "-" with "."?
>=20
> dpkg uses "-" in version numbers for its own uses - to delimit the
> packager's packaging version from the software version.

But you can also have "-" in the upstream version without problems.
Only the last "-" is used as deliminator and therefore the Debian
version part must not contain a "-"; it's no problem for the upstream
part.


> The change I posted keeps original behaviour - just fills out the
> .0's.
> Perhaps the munging should go in git-describe instead?

If we want to be able to separate the software version as it is defined
by the project maintainer from the additional Git information we should
do so with a clear separator, not by changing the software version.

Maybe have some Makefile magic which creates a nice version,
but interpreting and changing the tagged version in git-describe sounds
wrong to me.

--=20
Martin Waitz

--Fh0SynPkUvrWGMR0
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)

iD8DBQFGVrC/j/Eaxd/oD7IRAq4+AJ4xX6QSvGlTgixDed3UvzeAvdM9wwCdH9xE
DPA7326Z21X+5kmS3pUBDZc=
=DRWf
-----END PGP SIGNATURE-----

--Fh0SynPkUvrWGMR0--
