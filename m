From: =?UTF-8?B?SmFrdWIgTmFyxJlic2tp?= <jnareb@gmail.com>
Subject: Re: git instaweb - share all project files
Date: Wed, 10 Apr 2013 19:03:23 +0200
Message-ID: <51659B5B.6000707@gmail.com>
References: <CAMg8Y2pFXrbh8cz6m5z=LsksRijLVcV4fTk-TBx+9yaQTtAzpA@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: QUOTED-PRINTABLE
Cc: git@vger.kernel.org
To: "Trenton D. Adams" <trenton.d.adams@gmail.com>
X-From: git-owner@vger.kernel.org Wed Apr 10 19:03:34 2013
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1UPyQm-0003ou-LV
	for gcvg-git-2@plane.gmane.org; Wed, 10 Apr 2013 19:03:32 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S934896Ab3DJRD2 convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git-2@m.gmane.org>); Wed, 10 Apr 2013 13:03:28 -0400
Received: from mail-ee0-f54.google.com ([74.125.83.54]:63652 "EHLO
	mail-ee0-f54.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1755371Ab3DJRD1 (ORCPT <rfc822;git@vger.kernel.org>);
	Wed, 10 Apr 2013 13:03:27 -0400
Received: by mail-ee0-f54.google.com with SMTP id e51so352806eek.41
        for <git@vger.kernel.org>; Wed, 10 Apr 2013 10:03:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:cc
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=XNXu5Ph0CcZNtWS3KoRiLDE54VzR12bcSTugpAk8/0U=;
        b=AvQYG6I511tuzYYJzjySkd0xnIfM4rGV4i8X84iVy+oUQY0XTiblR40LDlc/8xu4gE
         EY8e7BsBxeFUWefB3I+lss6l6v5EnlqZlZ9RIzb3Gm/u+zRRBsTZgLzFa4iYqcP9eCuZ
         oxF3b4pFCtUzWni4MypgyXoA2M1cracaoPFi0QkLqKNbwJxnZq/9hzasnH9OpIU2+HWn
         TJXe14xBq6NA/CU9/0s7JRRrYKSyaf0r/Y84PMqe54nKjK5Iaob3mUH8fZrGCDtTedU4
         HyDmyIh8gXrg8ahJzNErsYh2Pw453n5lJOklqGIAj5GOkgRzu9JUf8SGNHatCcyYrDsB
         rJmw==
X-Received: by 10.14.182.137 with SMTP id o9mr7376100eem.13.1365613406137;
        Wed, 10 Apr 2013 10:03:26 -0700 (PDT)
Received: from [192.168.1.14] (edx151.neoplus.adsl.tpnet.pl. [83.21.9.151])
        by mx.google.com with ESMTPS id d47sm888486eem.9.2013.04.10.10.03.24
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 10 Apr 2013 10:03:25 -0700 (PDT)
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130329 Thunderbird/17.0.5
In-Reply-To: <CAMg8Y2pFXrbh8cz6m5z=LsksRijLVcV4fTk-TBx+9yaQTtAzpA@mail.gmail.com>
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/220706>

W dniu 07.04.2013 05:02, Trenton D. Adams pisze:

> On that first page that shows up, it shows the .git folder.  It would
> be kind of nice if it shared out both the git repo and the actual
> current project files.  I frequently have stuff I'd like to see in a
> web browser, and even requires one (i.e. Navigating to
> file:///home/blah/blah doesn't work; ajax requests for example)

There are a few possible solutions, from simplest to most complicated:

1. Configure gitweb ran by git-instaweb to have 'worktree' link in
   the action bar pointing to 'file:///path/to/repo' (or rather
   'file:///path/to/workdir') via 'actions' feature, adding e.g.

     $feature{'actions'}{'default'} =3D
     	[('worktree', 'file:///path/to/repo', 'summary')];

   to gitweb_config.perl / gitweb.conf used by git-instaweb's gitweb.

   This of course works only for local use, so either git-instaweb
   or gitweb (in config) should check that we use it locally
   (e.g. if hostname is 'localhost' or equivalent).

2. In the web server configuration generated by git-instaweb, perhaps
   as an option, add serving of worktree (with mod_autoindex aka.
   'Options +Indexes' for Apache2, and equivalent solutions for *all*
   other supported web servers: lighttpd, mongoose, plack, webrick).

   This may require some fiddling with URI rewriting, or change of
   gitweb URI, to be able to have both worktree index and gitweb
   script (gitweb is now under '/'), so it should probably be protected
   by an option to git-instaweb.

3. Add proper support to gitweb: add 'worktree' action (similar to
   'tree' action / view).  Probably needs to be made somewhat
   configurable (and of course enabled in git-instaweb).


Unfortunately solution 1.) which is simplest is not enough for your
situation...

I can add 3.) to my gitweb TODO, but I don't know when I would be able
to get to implementing it.
--=20
Jakub Nar=C4=99bski
