From: Carl Worth <cworth@cworth.org>
Subject: Re: Importing from tarballs; add, rm, update-index?
Date: Sat, 13 Jan 2007 11:32:55 -0800
Message-ID: <87wt3qwwm0.wl%cworth@cworth.org>
References: <6efbd9b70701120541n5dc4d0e1va50ae96543d8c80@mail.gmail.com>
	<7virfct737.fsf@assigned-by-dhcp.cox.net>
	<slrneqfnb8.a6s.Peter.B.Baumann@xp.machine.xx>
	<7vejq0t4ij.fsf@assigned-by-dhcp.cox.net>
	<20070112210403.GB6262@xp.machine.xx>
	<7v7ivrpx9y.fsf@assigned-by-dhcp.cox.net>
	<87y7o6x60w.wl%cworth@cworth.org>
	<Pine.LNX.4.64.0701131340040.2577@xanadu.home>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Sat_Jan_13_11:32:43_2007-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: Junio C Hamano <junkio@cox.net>,
	Peter Baumann <waste.manager@gmx.de>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sat Jan 13 20:35:21 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1H5oen-0007M3-QK
	for gcvg-git@gmane.org; Sat, 13 Jan 2007 20:35:14 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1422769AbXAMTfK (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sat, 13 Jan 2007 14:35:10 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1422768AbXAMTfK
	(ORCPT <rfc822;git-outgoing>); Sat, 13 Jan 2007 14:35:10 -0500
Received: from mx1.redhat.com ([66.187.233.31]:40923 "EHLO mx1.redhat.com"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1422769AbXAMTfI (ORCPT <rfc822;git@vger.kernel.org>);
	Sat, 13 Jan 2007 14:35:08 -0500
Received: from int-mx1.corp.redhat.com (int-mx1.corp.redhat.com [172.16.52.254])
	by mx1.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id l0DJZ1BP027246;
	Sat, 13 Jan 2007 14:35:01 -0500
Received: from mail.boston.redhat.com (mail.boston.redhat.com [172.16.76.12])
	by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id l0DJZ090012795;
	Sat, 13 Jan 2007 14:35:00 -0500
Received: from raht.cworth.org (sebastian-int.corp.redhat.com [172.16.52.221])
	by mail.boston.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id l0DJYxq7019148;
	Sat, 13 Jan 2007 14:34:59 -0500
To: Nicolas Pitre <nico@cam.org>
In-Reply-To: <Pine.LNX.4.64.0701131340040.2577@xanadu.home>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/36767>

--pgp-sign-Multipart_Sat_Jan_13_11:32:43_2007-1
Content-Type: text/plain; charset=US-ASCII

On Sat, 13 Jan 2007 13:54:20 -0500 (EST), Nicolas Pitre wrote:
> The fact is that there is no strong reason why they shouldn't.  But
> there are good reasons why they should.  The most important one being
> that the user doesn't need to bother deciding which one of the two
> commands should be used in any given situation.  And because a single
> command can cover two _technically_ different cases transparently is a
> pretty good reason for not imposing this technical issue to the user.

But that same reasoning could be extended to say there shouldn't be
separate "add" and "rm", because a single command can transparently
cover these two technically different cases transparently, (that would
be update-index without --add and --remove safety checks). But nobody
has been proposing that that would be a good direction to go.

So there are at least three cases one could identify for updating
content into the index:

1. Adding content for a path that didn't previously exist in the index

2. Updating content for a path that does already exist in the index

3. Removing a path and its content from the index

As things stand currently, git's providing a first-class operation
("git add") that provides (1) and (2) and another operation ("git rm")
for (3).

However, "commit -a" is implicitly performing operations from (2) and
(3).

So the documentation of "commit -a" being implemented with "add" just
plain doesn't make sense---and this is causing confusion.

I'd love to see _something_ get accepted to resolve that
confusion. What I was proposing was a command that did (1) and another
that did (2) or (3), (and "commit -a" could then be documented as
using this command).

But there are probably other ways to fix the problem.

-Carl

--pgp-sign-Multipart_Sat_Jan_13_11:32:43_2007-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQBFqTPn6JDdNq8qSWgRAiEYAJ9bqyBPzmWhEUUCwg5im8V+ypQvXACcCG7a
uQDqEkoEU2XzWjuBRvDJxCI=
=jy1Q
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Sat_Jan_13_11:32:43_2007-1--
