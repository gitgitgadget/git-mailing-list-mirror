From: Eric Wong <normalperson@yhbt.net>
Subject: Re: [PATCH 4/4] Move initialization of Git::SVN variables into
 Git::SVN.
Date: Fri, 27 Jul 2012 11:59:59 +0000
Message-ID: <20120727115959.GA31784@dcvr.yhbt.net>
References: <1343344945-3717-1-git-send-email-schwern@pobox.com>
 <1343344945-3717-5-git-send-email-schwern@pobox.com>
 <7vhast3hpb.fsf@alter.siamese.dyndns.org>
 <20120727053800.GC4685@burratino>
 <7v394d3ffc.fsf@alter.siamese.dyndns.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Jonathan Nieder <jrnieder@gmail.com>,
	"Michael G. Schwern" <schwern@pobox.com>, git@vger.kernel.org,
	robbat2@gentoo.org, bwalton@artsci.utoronto.ca
To: Junio C Hamano <gitster@pobox.com>
X-From: git-owner@vger.kernel.org Fri Jul 27 14:00:10 2012
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1SujDE-0001bq-V2
	for gcvg-git-2@plane.gmane.org; Fri, 27 Jul 2012 14:00:09 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751646Ab2G0MAA (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Fri, 27 Jul 2012 08:00:00 -0400
Received: from dcvr.yhbt.net ([64.71.152.64]:57280 "EHLO dcvr.yhbt.net"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751004Ab2G0MAA (ORCPT <rfc822;git@vger.kernel.org>);
	Fri, 27 Jul 2012 08:00:00 -0400
Received: from localhost (dcvr.yhbt.net [127.0.0.1])
	by dcvr.yhbt.net (Postfix) with ESMTP id 79B8B580B5;
	Fri, 27 Jul 2012 11:59:59 +0000 (UTC)
Content-Disposition: inline
In-Reply-To: <7v394d3ffc.fsf@alter.siamese.dyndns.org>
User-Agent: Mutt/1.5.20 (2009-06-14)
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/202352>

Junio C Hamano <gitster@pobox.com> wrote:
> The result will be queued tentatively near the tip of 'pu', but as
> this is primarily about git-svn, I would prefer a copy that is
> vetted by Eric to be fed from him.

OK.  I've signed-off on the 7 patches you have in pu.  Will look at the
other series in a few hours.

The following changes since commit cdd159b2f56c9e69e37bbb8f5af301abd93e5407:

  Merge branch 'jc/test-lib-source-build-options-early' (2012-07-25 15:47:08 -0700)

are available in the git repository at:

  git://bogomips.org/git-svn master

for you to fetch changes up to 8d1ddbdc877cf1f430ea8e79bf800ce806875565:

  Move initialization of Git::SVN variables into Git::SVN. (2012-07-27 11:29:21 +0000)

----------------------------------------------------------------
Michael G. Schwern (7):
      Quiet warning if Makefile.PL is run with -w and no --localedir
      Don't lose Error.pm if $@ gets clobbered.
      The Makefile.PL will now find .pm files itself.
      Extract some utilities from git-svn to allow extracting Git::SVN.
      Prepare Git::SVN for extraction into its own file.
      Extract Git::SVN from git-svn into its own .pm file.
      Move initialization of Git::SVN variables into Git::SVN.

 git-svn.perl                   | 2340 +---------------------------------------
 perl/Git/SVN.pm                | 2324 +++++++++++++++++++++++++++++++++++++++
 perl/Git/SVN/Utils.pm          |   59 +
 perl/Makefile                  |    2 +
 perl/Makefile.PL               |   35 +-
 t/Git-SVN/00compile.t          |    9 +
 t/Git-SVN/Utils/can_compress.t |   11 +
 t/Git-SVN/Utils/fatal.t        |   34 +
 8 files changed, 2476 insertions(+), 2338 deletions(-)
 create mode 100644 perl/Git/SVN.pm
 create mode 100644 perl/Git/SVN/Utils.pm
 create mode 100644 t/Git-SVN/00compile.t
 create mode 100644 t/Git-SVN/Utils/can_compress.t
 create mode 100644 t/Git-SVN/Utils/fatal.t

> Thanks.
> 
> P.S.
> 
> t91XX series seem to fail in 'pu' with "Can't locate Git/SVN.pm in
> @INC" for me.  I see perl/blib/lib/Git/SVN/ directory and files
> under it, but there is no perl/blib/lib/Git/SVN.pm installed.  I see
> Git/I18N.pm and Git/SVN/Ra.pm (and friends) mentioned in
> perl/perl.mak generated by MakeMaker, but Git/SVN.pm does not appear
> anywhere.
> 
> I think it is some interaction with other topics, as the tip of
> ms/git-svn-pm topic that parks this series does not exhibit the
> symptom, but it is getting late for me already, so I won't dig into
> this further.

I think your proposed patch in the followup should work.  We should
probably squash that into this series avoid breaking bisect in the
future.
