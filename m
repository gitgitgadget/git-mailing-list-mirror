From: Jakub Narebski <jnareb@gmail.com>
Subject: Re: [PATCH 2] autoconf: Use ./configure script in git *.spec file
Date: Mon, 03 Jul 2006 13:05:21 +0200
Organization: At home
Message-ID: <e8atkm$ipg$1@sea.gmane.org>
References: <200607030156.50455.jnareb@gmail.com> <200607030202.55919.jnareb@gmail.com> <7vodw7zgt2.fsf@assigned-by-dhcp.cox.net> <e89ock$gks$1@sea.gmane.org> <7vslljwiat.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-From: git-owner@vger.kernel.org Mon Jul 03 13:05:28 2006
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1FxMEu-00064f-DQ
	for gcvg-git@gmane.org; Mon, 03 Jul 2006 13:05:16 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750863AbWGCLFM convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git@m.gmane.org>); Mon, 3 Jul 2006 07:05:12 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1750867AbWGCLFM
	(ORCPT <rfc822;git-outgoing>); Mon, 3 Jul 2006 07:05:12 -0400
Received: from main.gmane.org ([80.91.229.2]:13806 "EHLO ciao.gmane.org")
	by vger.kernel.org with ESMTP id S1750863AbWGCLFK (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 3 Jul 2006 07:05:10 -0400
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FxMEi-00063N-3k
	for git@vger.kernel.org; Mon, 03 Jul 2006 13:05:04 +0200
Received: from host-81-190-27-124.torun.mm.pl ([81.190.27.124])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <git@vger.kernel.org>; Mon, 03 Jul 2006 13:05:04 +0200
Received: from jnareb by host-81-190-27-124.torun.mm.pl with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <git@vger.kernel.org>; Mon, 03 Jul 2006 13:05:04 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: git@vger.kernel.org
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host-81-190-27-124.torun.mm.pl
Mail-Copies-To: jnareb@gmail.com
User-Agent: KNode/0.10.2
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/23169>

As I see it, we have the following options with respect to autoconf rel=
ated
files and use of ./configure script


1. Use autoconf and ./configure script generated by it as optional way =
to
configure installation process. Have configure.ac and config.mak.in in =
main
directory of git.git repository. Do not use ./configure script in
git.spec.in, i.e. do not apply this patch... perhaps put _patch_ in the
contrib/. Leave changes to *.spec file to distributions, documenting it
somewhere.

2. Use autoconf and ./configure script generated by it as optional way =
to
configure installation process _and_ in git.spec.in, i.e. in the RPM
building. Ship generated 'configure' script with distribution (source)
tarball or make patch creating 'configure' script and use it instead in
git.spec.in (avoids shipping 'configure' in source tarball). This has t=
he
consequence that autoconf would be build dependence for creating RPM at
least. Perhaps we can have automatically build configure script in sepa=
rate
branch, similarly to 'man' and 'html branches of git.git.

3. Write our own ./configure script, put it under version control, and =
put
autoconf related files in contrib/ as an alternative. Advantages: we ca=
n
customize it to git needs and git build process conventions. Disadvanta=
ges:
duplication of work put into autoconf to make generated ./configure scr=
ipt
portable (which is also the case why atoconf generated shel script
'configure' is not very readable, and probably should be not under vers=
ion
control; html and man documentation aren't either). Use %configure in
git.spec.in file. Plan for the future?=20


I am partially to [*1*], if just because I wouldn't need to take care
autoconf in git. [*2*] has disadvantage in that generated ./configure n=
eeds
to be put in main directory to work, either by hand (which complicates
using this way of building and installing git) or by script (which viol=
ates
unsaid rule that contrib/ doesn't interfere in top directory). [*3*] wo=
uld
be probably the best, but it is additional work, duplication of autocon=
f
efforts, and need someone (not me) well versed in git compiling woes _a=
nd_
shell script portability.

--=20
Jakub Nar=C4=99bski
ShadeHawk on #git
