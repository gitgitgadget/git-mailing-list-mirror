Return-Path: <git-owner@kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
	aws-us-west-2-korg-lkml-1.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-8.8 required=3.0 tests=BAYES_00,
	HEADER_FROM_DIFFERENT_DOMAINS,INCLUDES_PATCH,MAILING_LIST_MULTI,SPF_HELO_NONE,
	SPF_PASS,URIBL_BLOCKED autolearn=ham autolearn_force=no version=3.4.0
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
	by smtp.lore.kernel.org (Postfix) with ESMTP id 76C56C433DB
	for <git@archiver.kernel.org>; Fri, 26 Mar 2021 03:50:59 +0000 (UTC)
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.kernel.org (Postfix) with ESMTP id 363B661A33
	for <git@archiver.kernel.org>; Fri, 26 Mar 2021 03:50:59 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230304AbhCZDu0 (ORCPT <rfc822;git@archiver.kernel.org>);
        Thu, 25 Mar 2021 23:50:26 -0400
Received: from smtp38.hk.chengmail.me ([113.10.190.104]:37243 "EHLO
        smtp38.hk.chengmail.me" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S230239AbhCZDuC (ORCPT <rfc822;git@vger.kernel.org>);
        Thu, 25 Mar 2021 23:50:02 -0400
X-CHENGMAILHOST: 113.10.190.104
X-CHENGMAIL-INSTANCEID: 322f.605d59df.740a5.0
Date:   Fri, 26 Mar 2021 11:49:52 +0800
From:   "lilinchao@oschina.cn" <lilinchao@oschina.cn>
To:     "Junio C Hamano" <gitster@pobox.com>,
        "Li Linchao via GitGitGadget" <gitgitgadget@gmail.com>
Cc:     git <git@vger.kernel.org>, "Derrick Stolee" <stolee@gmail.com>,
        dscho <johannes.schindelin@gmx.de>,
        "Jonathan Tan" <jonathantanmy@google.com>
Subject: Re: Re: [PATCH v7] builtin/clone.c: add --reject-shallow option
References: <pull.865.v6.git.1614878345754.gitgitgadget@gmail.com>, 
        <pull.865.v7.git.1616670558261.gitgitgadget@gmail.com>, 
        <7a71c96c8dbd11eb8bb0d4ae5278bc1296681@pobox.com>
X-Priority: 3
X-GUID: 6CAF5D4E-12F3-434A-A7FC-8CB414630342
X-Has-Attach: no
X-Mailer: Foxmail 7.2.19.158[cn]
Mime-Version: 1.0
X-source-message-id: <2021032611485180646623@oschina.cn>
Content-Type: text/plain;
        charset="utf-8"
Content-Transfer-Encoding: base64
Message-ID: <552b26168de611eb8af90024e87935e7@oschina.cn>
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

VGhhbmtzIGZvciB5b3VyIHJldmlldy4KCgotLS0tLS0tLS0tLS0tLQpsaWxpbmNoYW9Ab3NjaGlu
YS5jbgo+IkxpIExpbmNoYW8gdmlhIEdpdEdpdEdhZGdldCIgPGdpdGdpdGdhZGdldEBnbWFpbC5j
b20+IHdyaXRlczoKPgo+PiBAQCAtMTIxNiw2ICsxMjM0LDEwIEBAIGludCBjbWRfY2xvbmUoaW50
IGFyZ2MsIGNvbnN0IGNoYXIgKiphcmd2LCBjb25zdCBjaGFyICpwcmVmaXgpCj4+wqAgaWYgKGZp
bHRlcl9vcHRpb25zLmNob2ljZSkKPj7CoCB3YXJuaW5nKF8oIi0tZmlsdGVyIGlzIGlnbm9yZWQg
aW4gbG9jYWwgY2xvbmVzOyB1c2UgZmlsZTovLyBpbnN0ZWFkLiIpKTsKPj7CoCBpZiAoIWFjY2Vz
cyhta3BhdGgoIiVzL3NoYWxsb3ciLCBwYXRoKSwgRl9PSykpIHsKPj4gKwlpZiAocmVqZWN0X3No
YWxsb3cpCj4+ICsJZGllKF8oInNvdXJjZSByZXBvc2l0b3J5IGlzIHNoYWxsb3csIHJlamVjdCB0
byBjbG9uZS4iKSk7Cj4+ICsJZWxzZQo+PiArCXdhcm5pbmcoXygic291cmNlIHJlcG9zaXRvcnkg
aXMgc2hhbGxvdy4iKSk7Cj4KPkhtcGgsIGlzIGl0IGFuIGltcHJvdmVtZW50IHRvIHdhcm4oKSB3
aGVuIHRoZSB1c2VyIGRvZXMgbm90IG1pbmQKPmNsb25pbmcgYSBzaGFsbG93IHJlcG9zaXRvcnk/
Cj4gClVoLCB0aGUgaWRlYSB0byB3YXJuIGNvbWVzIGZyb20gcHJldmlvdXMgY29tbWVudHMgSSB3
cm90ZSAyNSBkYXlzIGFnbzoKCsKgICJhbmQgbWF5YmUgd2UgY291bGQgd2FybiBjbGllbnQgaW4g
ZmV0Y2gtcGFjayBzdGFnZSwgaWYgd2UgZG9uJ3TCoGNob29zZSAKwqAgwqB0byByZWplY3Qgc2hh
bGxvdyBjbG9uaW5nLiIKCnRoZW4gbm8gb25lIHJlc3BvbnNlIHRvIHRoYXQgcG9pbnQsIHNvIEkg
dGhpbmsgaXMgb2sgdG8gYXBwbHkgaXQuCk5vdywgaXQgc2VlbXMgbGlrZSBhIGJhZCBpZGVhLiBJ
IHdpbGwgcmVtb3ZlIGl0LgoKCj4JJCBnaXQgY2xvbmUgLS1kZXB0aD0zICRVUkwgY2xvbmUtMQo+
CSQgZ2l0IGNsb25lIGZpbGU6Ly8kKHB3ZCkvY2xvbmUtMSBjbG9uZS0yCj4KPndvdWxkIGdpdmUg
dXMgY2xvbmUtMiB0aGF0IGlzIGp1c3QgYXMgZnVuY3Rpb25hbCBhcyBjbG9uZS0xIGlzLCBubz8K
PmNsb25lLTEgbWF5IGJlIG1pc3Npbmcgb2JqZWN0cyB0aGF0IGlzIG5lZWRlZCBmYXIgaW50byB0
aGUgcGFzdCwgYW5kCj5jbG9uZS0yIHdvdWxkIGxhY2sgdGhlIHNhbWUgc2V0IG9mIG9iamVjdHMg
YXMgY2xvbmUtMSBkb2VzLCBidXQgYQo+dXNlciB3aG8gaXMgaGFwcGlseSB1c2luZyBjbG9uZS0x
IHdvdWxkIGJlIGhhcHB5IHdpdGggY2xvbmUtMiB0aGUKPnNhbWUgd2F5LCBubz8KPgo+PiBkaWZm
IC0tZ2l0IGEvZmV0Y2gtcGFjay5jIGIvZmV0Y2gtcGFjay5jCj4+IGluZGV4IGZiMDRhNzZjYTI2
My4uNzJiMzc4NDQ5YTA3IDEwMDY0NAo+PiAtLS0gYS9mZXRjaC1wYWNrLmMKPj4gKysrIGIvZmV0
Y2gtcGFjay5jCj4+IEBAIC0xMTI5LDkgKzExMjksMTMgQEAgc3RhdGljIHN0cnVjdCByZWYgKmRv
X2ZldGNoX3BhY2soc3RydWN0IGZldGNoX3BhY2tfYXJncyAqYXJncywKPj7CoCBpZiAoYXJncy0+
ZGVlcGVuKQo+PsKgIHNldHVwX2FsdGVybmF0ZV9zaGFsbG93KCZzaGFsbG93X2xvY2ssICZhbHRl
cm5hdGVfc2hhbGxvd19maWxlLAo+PsKgIE5VTEwpOwo+PiAtCWVsc2UgaWYgKHNpLT5ucl9vdXJz
IHx8IHNpLT5ucl90aGVpcnMpCj4+ICsJZWxzZSBpZiAoc2ktPm5yX291cnMgfHwgc2ktPm5yX3Ro
ZWlycykgewo+PiArCWlmIChhcmdzLT5yZW1vdGVfc2hhbGxvdykKPj4gKwlkaWUoXygic291cmNl
IHJlcG9zaXRvcnkgaXMgc2hhbGxvdywgcmVqZWN0IHRvIGNsb25lLiIpKTsKPgo+U3RvcHBpbmcg
ZWFybHkgYmVmb3JlIGNhbGxpbmcgZ2V0X3BhY2soKSB3b3VsZCBzaWduaWZpY2FudGx5IHJlZHVj
ZQo+dGhlIG92ZXJoZWFkLCB3aGljaCBpcyBnb29kLgo+Cj4+ICsJZWxzZQo+PiArCXdhcm5pbmco
Xygic291cmNlIHJlcG9zaXRvcnkgaXMgc2hhbGxvdy4iKSk7Cj4KPlRoZSBzYW1lIHF1ZXN0aW9u
IG9uIHRoZSB3aXNkb20gb2Ygd2FybmluZyBoZXJlLiAKPgo+PiBAQCAtMTQ5OCwxMCArMTUwMiwx
NCBAQCBzdGF0aWMgdm9pZCByZWNlaXZlX3NoYWxsb3dfaW5mbyhzdHJ1Y3QgZmV0Y2hfcGFja19h
cmdzICphcmdzLAo+PsKgICogcmVqZWN0ZWQgKHVubGVzcyAtLXVwZGF0ZS1zaGFsbG93IGlzIHNl
dCk7IGRvIHRoZSBzYW1lLgo+PsKgICovCj4+wqAgcHJlcGFyZV9zaGFsbG93X2luZm8oc2ksIHNo
YWxsb3dzKTsKPj4gLQlpZiAoc2ktPm5yX291cnMgfHwgc2ktPm5yX3RoZWlycykKPj4gKwlpZiAo
c2ktPm5yX291cnMgfHwgc2ktPm5yX3RoZWlycykgewo+PiArCWlmIChhcmdzLT5yZW1vdGVfc2hh
bGxvdykKPj4gKwlkaWUoXygic291cmNlIHJlcG9zaXRvcnkgaXMgc2hhbGxvdywgcmVqZWN0IHRv
IGNsb25lLiIpKTsKPj4gKwllbHNlCj4+ICsJd2FybmluZyhfKCJzb3VyY2UgcmVwb3NpdG9yeSBp
cyBzaGFsbG93LiIpKTsKPgo+T0ssIHNvLCB0aGlzIGlzIHRoZSBlcXVpdmFsZW50IG9mIHRoZSBh
Ym92ZSBmb3IgcHJvdG9jb2wtdjI/wqAgVGhlCj5zYW1lIGNvbW1lbnRzIGFwcGx5LCB0aGVuLiAK
ClllcywgdGhpcyBpcyBmb3IgcHJvdG9jb2wgdjIuCj4KPj4gZGlmZiAtLWdpdCBhL3QvdDU2MDYt
Y2xvbmUtb3B0aW9ucy5zaCBiL3QvdDU2MDYtY2xvbmUtb3B0aW9ucy5zaAo+PiBpbmRleCA0Mjhi
MGFhYzkzZmEuLjI4NjNiOGIyOGQ0NCAxMDA3NTUKPj4gLS0tIGEvdC90NTYwNi1jbG9uZS1vcHRp
b25zLnNoCj4+ICsrKyBiL3QvdDU2MDYtY2xvbmUtb3B0aW9ucy5zaAo+PiBAQCAtNSw2ICs1LDgg
QEAgR0lUX1RFU1RfREVGQVVMVF9JTklUSUFMX0JSQU5DSF9OQU1FPW1haW4KPj7CoCBleHBvcnQg
R0lUX1RFU1RfREVGQVVMVF9JTklUSUFMX0JSQU5DSF9OQU1FCj4+wqAKPj7CoCAuIC4vdGVzdC1s
aWIuc2gKPj4gKy4gIiRURVNUX0RJUkVDVE9SWSIvbGliLWh0dHBkLnNoCj4+ICtzdGFydF9odHRw
ZAo+PsKgCj4+wqAgdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAnICcKPj7CoAo+PiBAQCAtNDUs
NiArNDcsNTEgQEAgdGVzdF9leHBlY3Rfc3VjY2VzcyAnZGlzYWxsb3dzIC0tYmFyZSB3aXRoIC0t
c2VwYXJhdGUtZ2l0LWRpcicgJwo+PsKgCj4+wqAgJwo+PsKgCj4+ICt0ZXN0X2V4cGVjdF9zdWNj
ZXNzICdmYWlsIHRvIGNsb25lIGh0dHAgc2hhbGxvdyByZXBvc2l0b3J5JyAnCj4KPnMvZmFpbCB0
byBjbG9uZS9yZWplY3QgY2xvbmluZy8sIHBlcmhhcHMuIAoKT2ssIHdpbGwgZG8uCj4KPj4gK3Rl
c3RfZXhwZWN0X3N1Y2Nlc3MgJ2Nsb25lIHNoYWxsb3cgcmVwb3NpdG9yeSB3aXRoIC0tbm8tcmVq
ZWN0LXNoYWxsb3cnICcKPj4gKwlybSAtcmYgc2hhbGxvdy1yZXBvICYmCj4+ICsJZ2l0IGNsb25l
IC0tZGVwdGg9MSAtLW5vLWxvY2FsIHBhcmVudCBzaGFsbG93LXJlcG8gJiYKPj4gKwlnaXQgY2xv
bmUgLS1uby1yZWplY3Qtc2hhbGxvdyAtLW5vLWxvY2FsIHNoYWxsb3ctcmVwbyBjbG9uZS1yZXBv
Cj4KPk9LLsKgIEFsc28gd2l0aG91dCAiLS1uby1yZWplY3Qtc2hhbGxvdyIgb3B0aW9uLCB0aGUg
Y29tbWFuZCB3b3VsZAo+c3VjY2Vzc2Z1bGx5IGNsb25lIGZyb20gdGhlIHNoYWxsb3ctcmVwbywg
SSBwcmVzdW1lPyAKClllcywgZXhhY3RseS4KPgo+VGhlIGNoYW5nZXMgbG9vayBtb3JlLW9yLWxl
c3MgZ29vZCB0byBtZSwgZXhjZXB0IGZvciB0aGUgIndhcm5pbmcoKSIKPmJpdCwgd2hpY2ggSSBk
byBub3QgdGhpbmsgaXMgYSBnb29kIGlkZWEuIAoKSSB3aWxsIHJlbW92ZSB0aGUgdW5uZWNlc3Nh
cnkgd2FybmluZygpIHBhcnQuCgpUaGFua3MhCgoK

