From: =?UTF-8?Q?Ren=c3=a9_Scharfe?= <l.s.r@web.de>
Subject: Re: git archive should use vendor extension in pax header
Date: Tue, 26 Jan 2016 23:06:25 +0100
Message-ID: <56A7EDE1.1020909@web.de>
References: <20160124155909.GA16847@fuz.su>
Mime-Version: 1.0
Content-Type: text/plain; charset=windows-1252;
	format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE
To: fuz@fuz.su, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Jan 26 23:06:53 2016
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1aOBlF-0005Dm-8x
	for gcvg-git-2@plane.gmane.org; Tue, 26 Jan 2016 23:06:53 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752651AbcAZWGq convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git-2@m.gmane.org>); Tue, 26 Jan 2016 17:06:46 -0500
Received: from mout.web.de ([212.227.17.12]:53165 "EHLO mout.web.de"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751524AbcAZWGm (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 26 Jan 2016 17:06:42 -0500
Received: from [192.168.178.36] ([79.237.59.34]) by smtp.web.de (mrweb103)
 with ESMTPSA (Nemesis) id 0MZUS9-1agWtR1JjZ-00LHEP; Tue, 26 Jan 2016 23:06:40
 +0100
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.5.1
In-Reply-To: <20160124155909.GA16847@fuz.su>
X-Provags-ID: V03:K0:smxVm55i4YQ1abWLHJXB3+YAI8g40EcVehJocC8G3gtifKsaql2
 jvLvOvKDMbbn1kUxuOhxXaaN9Q9//gvAnFHRmf7DFK6WuL3yD+lczY7zh0Hap8zrnY0clAo
 bqD3C/hd1y+Om3A/DHB1kjxcjGpgu8kjShxr2Z5AGVXH7KPRck0r/YoLZIabkAbyZekUBPu
 iVRVmLMW5h5m8GhWzJ87Q==
X-UI-Out-Filterresults: notjunk:1;V01:K0:f1xzHDjoeQ8=:8kWhAJm7/jb59zf/T0Fe4j
 ylN5FCdmk7UyzSh5je3xaHwil5ghRgyAYZdPqZb6guCvLYWkJh7tvlilwh8rkHTTI3AOOUl2d
 kla+PWknOPFp9e/+K4YY0GXcXyo5Ay6DDGACl/kXVZTlqkAViABdj3FHIShycene5hj8DdfmK
 0NomtAjKqsheGYxuOsUvQZaCZqbj+GX7AnJhU16Gw9awJR0cYsgN4aRlwgGCscKvDR45Fpluy
 toFFEcWKFI1RnccimQfHK+74bXwEFNqBFjlix2iqPWTElbEiIkym5yGpbPv6P63kCdBLxJQxd
 2karAPn6VOGYMjPaxnxZOANxUXEGsSm1H6rDx8B6BI2MlBE03rqRn1lGbPZJb+Wcj2b/Cp7lB
 It5VQh06PJMBGpL5oOEpEI61RM90VNMF1uk0aGcZ6kwqvlf+1U1JI4W7Cah27PCZKN46Mmkty
 eNJtRgWqj5V/seQ0PMIET8ZmiciyuZF61vnTqS5pTPK3xF2fd4d+WV4HZ/P9b/6f+lSWd5BBf
 Mt1lHyxP/foXr+4qCsCxHAVHQ/r+2Emt5SF1RLgMsdEY+tl/+T4uCiTY5KoknIlymzowillgv
 F3gmeoN57wFRLrGliGjfVSZ9FJkdiu1uLtq8pdoUgT5rm6RSmfHCLVka+jwhqqkH9RICw7FbF
 lQyN+5DI6VJM1Shon+BslPQ3U9M7aBZiRNUjYOA9YNrtXDDvkIBI8QsjOMOhySxiv/x0l8B2E
 ZhJA5dcrQ7riH8SPTUQ69BbHt8y2WWm60QCNlEcs8ryKk1UMDanOK3/4Ke2NIM0cOt+6liyk 
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/284862>

Am 24.01.2016 um 16:59 schrieb fuz@fuz.su:
> Right now, git archive creates a pax global header of the form
>
>      comment=3D57ca140635bf157354124e4e4b3c8e1bde2832f1
>
> in tar archives it creates. This is suboptimal as as comments are
> specified to be ignored by extraction software. It is impossible to
> find out in an automatic way (short of guessing) that this is suppose=
d
> to be a commit hash.

This is only a problem if you don't know how a given tar files was=20
created (or modified later).  How did you get into this situation?  Or=20
in other words: Please tell me more about your use case.

> It would be much more useful if git created a
> custom key. As per POSIX suggestions, something like this would be
> appropriate:
>
>      GIT.commit=3D57ca140635bf157354124e4e4b3c8e1bde2832f1

This would be included in addition to the comment in order to avoid=20
breaking existing users, I guess.

If you have a random archive and want to know if it was generated by gi=
t=20
then your next question might be which options and substitutions were=20
used.  That reminds me of this thread regarding verifiable archives:

     http://article.gmane.org/gmane.comp.version-control.git/240244

Thanks,
Ren=E9
