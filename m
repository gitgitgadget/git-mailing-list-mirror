From: Hitoshi Mitake <mitake.hitoshi@gmail.com>
Subject: Re: [PATCH 0/2] imap-send: fixes for CRAM-MD5 authentication
Date: Sat, 09 Apr 2016 15:29:30 +0900
Message-ID: <87mvp35m7p.wl%mitake.hitoshi@gmail.com>
References: <20160408140218.GA13469@chikuwa.rhe.jp>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: git@vger.kernel.org, Hitoshi Mitake <mitake@dcl.info.waseda.ac.jp>
To: Kazuki Yamaguchi <k@rhe.jp>
X-From: git-owner@vger.kernel.org Sat Apr 09 08:29:41 2016
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1aomOq-0000dr-G1
	for gcvg-git-2@plane.gmane.org; Sat, 09 Apr 2016 08:29:40 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752240AbcDIG3e (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Sat, 9 Apr 2016 02:29:34 -0400
Received: from mail-pf0-f193.google.com ([209.85.192.193]:35266 "EHLO
	mail-pf0-f193.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751958AbcDIG3e (ORCPT <rfc822;git@vger.kernel.org>);
	Sat, 9 Apr 2016 02:29:34 -0400
Received: by mail-pf0-f193.google.com with SMTP id r187so10902753pfr.2
        for <git@vger.kernel.org>; Fri, 08 Apr 2016 23:29:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=date:message-id:from:to:cc:subject:in-reply-to:references
         :user-agent:mime-version;
        bh=8x0vjw1Y+oAER5NuXDdSueJZ0qy+VESO8+bTQRKPrCw=;
        b=ZfzPz7jIU+FRO5eCsLFxWhMR3DSXngp1YGdyVUVNy/NMWGKTkZrLliNZOWFuRhDbvQ
         x52pLPvXRLZEnRE/gAO7goRj8WP7jH+80fAr1CamnhsBcOiq8GTp+0rQM2QwRaUDkCtX
         P7DVp8V8+B2EPE5xr/ZP0rEVR5LCBql7PxCCDVcwgG6jAxVCLmjnnHXr/L4aUt5Ud9Zi
         qn/uJhs9NzKg6K45HKv4fyG2VToBahQV4ASAh3s/VAN5sz+zD7j8GbgW7oFDMxem4K8Q
         X5/XkMEmV04QKFYNhZm69/HL6CekPsGsau3Fb7wtzmcRqEIOArCaKz1bVJU7T393pfjD
         qhNA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:date:message-id:from:to:cc:subject:in-reply-to
         :references:user-agent:mime-version;
        bh=8x0vjw1Y+oAER5NuXDdSueJZ0qy+VESO8+bTQRKPrCw=;
        b=eM1Aq8ZQ1dNJjr2VwRyjv3xNNH8DqS1E81pIyyU52WSZzSRzBvh3jAF4x+EMiL0HaL
         i8DVfBIMyvsb+4uWeS03HcBNyXMczLQaY1t874rpDXJe/5Q0GnfqZb/SSdoNpoK3nqI3
         Vbq4u7oFnTY2uLxhx93SeJ2TzDAiJjXvcBkOxfIj8bqv1dLdSgVGpCVpja7he/GprDmr
         ZAEIrNnUFpJDV1Zy9FbfeOlBsYUfFYmArcnPYEYRBHY+7+pkXhYiK7psgRUd5UAowdp3
         DiDXBAX0yEzAFMo+bAO8ee/NZfu7q0QUXtlngY3jfJr1eUy3DGqUEDC/5ggHCua3ntHH
         Mk0w==
X-Gm-Message-State: AD7BkJJYODnD4j4VWdgDlkS57l8kAe/A6buCjv1LYdYczjpEsbA4N5Y/LWi9bFf47Cr/Vg==
X-Received: by 10.98.33.203 with SMTP id o72mr18005309pfj.96.1460183373269;
        Fri, 08 Apr 2016 23:29:33 -0700 (PDT)
Received: from i5.gmail.com (i118-20-131-34.s42.a013.ap.plala.or.jp. [118.20.131.34])
        by smtp.gmail.com with ESMTPSA id bu17sm22575078pac.25.2016.04.08.23.29.31
        (version=TLS1_2 cipher=AES128-SHA bits=128/128);
        Fri, 08 Apr 2016 23:29:32 -0700 (PDT)
In-Reply-To: <20160408140218.GA13469@chikuwa.rhe.jp>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?ISO-2022-JP-2?B?R29qGyQoRCtXGyhC?=) APEL/10.8 Emacs/24.3
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/291083>

At Fri, 8 Apr 2016 23:02:18 +0900,
Kazuki Yamaguchi wrote:
> 
> [1/2]
> Check for LOGINDISABLED capability only when using LOGIN command, as it
> is unrelated to authentication with CRAM-MD5.
> 
> [2/2]
> Remove extra + 1, which is probably mistakenly added. Without this patch
> I can't open my IMAP server (Dovecot 2.2).
> 
> Thanks,
> 
> Kazuki Yamaguchi (2):
>   imap-send: check for NOLOGIN capability only when using LOGIN command
>   imap-send: fix CRAM-MD5 response calculation
> 
>  imap-send.c | 12 ++++++------
>  1 file changed, 6 insertions(+), 6 deletions(-)

Yamaguchi-san, thanks for your patches and letting me know. The
CRAM-MD5 feature would have problems as you pointed. I just
implemented it for my own usecase years ago (at that time I used
Cyrus) and am not using it for now. The code is old but not tested
well yet (I'm not sure how many people are using it).

Unfortunately I can't test the patches because I don't have an IMAP
server that is suitable for testing. But I think the patches are worth
to apply because they are valuable for your usecase. Sorry for my
irresponible answer :(
