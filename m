From: "Jonas Fonseca" <jonas.fonseca@gmail.com>
Subject: Re: A typesetting problem with git man pages
Date: Wed, 29 Oct 2008 21:14:35 +0100
Message-ID: <2c6b72b30810291314n75154276ma226cccc1ea07504@mail.gmail.com>
References: <87skqfus7v.fsf@iki.fi>
	 <20081029193958.GA12856@sigill.intra.peff.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Cc: "Teemu Likonen" <tlikonen@iki.fi>, git@vger.kernel.org
To: "Jeff King" <peff@peff.net>
X-From: git-owner@vger.kernel.org Wed Oct 29 21:15:52 2008
connect(): Connection refused
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1KvHSK-0001rf-1f
	for gcvg-git-2@gmane.org; Wed, 29 Oct 2008 21:15:52 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753521AbYJ2UOj (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Wed, 29 Oct 2008 16:14:39 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1753466AbYJ2UOj
	(ORCPT <rfc822;git-outgoing>); Wed, 29 Oct 2008 16:14:39 -0400
Received: from mu-out-0910.google.com ([209.85.134.187]:60540 "EHLO
	mu-out-0910.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1753358AbYJ2UOi (ORCPT <rfc822;git@vger.kernel.org>);
	Wed, 29 Oct 2008 16:14:38 -0400
Received: by mu-out-0910.google.com with SMTP id g7so147983muf.1
        for <git@vger.kernel.org>; Wed, 29 Oct 2008 13:14:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=EzOO71mxQDIDkskYuFxL7YgezjVhm8G5siMTunE7UMw=;
        b=Ma3pP8t4pyIRBePphuNmkBSLAcBnKDNu8Qd8VV9CAyjpH9h7n2YzxscfqU5RSTR/zm
         fm28p3XGiQNBjqVFAQMPqovj6DsIt0AFjlchSYgciTnWMmBkgrzqMiEcCDhZfdB5Eawl
         wIb74gnKog1osF6vIekcq3hVWKn30B3Hfw0Zw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=k496CffBDJ5Pw9sAXWnbvZP5G4BaJrqW56qd4BAE8cZT6BXxZQ5BkuyW2+gD2B4FU6
         HHzJMh6rqTydQSyWdOwqaZmfQM27QCv5j+QE29fC5FCJ9j2Ennq85wpll80Z/mujgMSR
         1XcpbO/7nXOnxKvpg2YUa1Eeh/7rNWoPuU5x4=
Received: by 10.181.48.4 with SMTP id a4mr2509005bkk.6.1225311276003;
        Wed, 29 Oct 2008 13:14:36 -0700 (PDT)
Received: by 10.181.228.16 with HTTP; Wed, 29 Oct 2008 13:14:35 -0700 (PDT)
In-Reply-To: <20081029193958.GA12856@sigill.intra.peff.net>
Content-Disposition: inline
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/99400>

On Wed, Oct 29, 2008 at 20:39, Jeff King <peff@peff.net> wrote:
> so the problem is the extra \&. But I don't know why that is being
> generated. It _should_ be part of the character entity, I thought, but
> xmlto seems to be rendering it as the newline character entity _plus_
> the ampersand.
>
> So it seems like a bug to me in the XML parser, but it is more likely
> that I'm somehow clueless about XML.

The way I understand it is that the DocBook XSL (stylesheet) doing the
conversion from xml to the manpage ensures that possible problematic
characters that could break the manpage are escaped. A dot in the
start of a line is problematic since it could be interpreted as markup
by the manpage viewer and in the mentioned case, the code was not
generated by the stylesheet, thus it must be escaped. So IMO, the
stylesheet is hardly to blame, the problem is that the asciidoc.conf
file defines a macro for literallayout, in which it expects manpage
code to be passed through unescaped.

-- 
Jonas Fonseca
