From: Ray Lehtiniemi <rayl@mail.com>
Subject: bug in "git diff -w" output?
Date: Wed, 11 Oct 2006 22:28:10 -0600
Message-ID: <200610112228.10597.rayl@mail.com>
Reply-To: rayl@mail.com
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Thu Oct 12 06:30:58 2006
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1GXsC7-0004RP-3o
	for gcvg-git@gmane.org; Thu, 12 Oct 2006 06:29:19 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1161048AbWJLE3Q (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 12 Oct 2006 00:29:16 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S965260AbWJLE3Q
	(ORCPT <rfc822;git-outgoing>); Thu, 12 Oct 2006 00:29:16 -0400
Received: from shawidc-mo1.cg.shawcable.net ([24.71.223.10]:63755 "EHLO
	pd3mo1so.prod.shaw.ca") by vger.kernel.org with ESMTP
	id S965223AbWJLE3P (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 12 Oct 2006 00:29:15 -0400
Received: from pd2mr4so.prod.shaw.ca
 (pd2mr4so-qfe3.prod.shaw.ca [10.0.141.107]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0J7000KIR9RM3230@l-daemon> for git@vger.kernel.org; Wed,
 11 Oct 2006 22:28:34 -0600 (MDT)
Received: from pn2ml2so.prod.shaw.ca ([10.0.121.146])
 by pd2mr4so.prod.shaw.ca (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar
 15 2004)) with ESMTP id <0J70000HJ9RLFC21@pd2mr4so.prod.shaw.ca> for
 git@vger.kernel.org; Wed, 11 Oct 2006 22:28:34 -0600 (MDT)
Received: from s0106001109ed07db.cg.shawcable.net ([68.147.121.172])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0J7000IVU9RLJM60@l-daemon> for git@vger.kernel.org; Wed,
 11 Oct 2006 22:28:33 -0600 (MDT)
To: git@vger.kernel.org
Content-disposition: inline
User-Agent: KMail/1.8.2
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/28770>


hi all

i'm not sure i understand the output of "git diff -w" in the example below.  
to my eye, it seems incorrect around lines 53 and 54.

this example was done using the git version which originally introduced the -w 
and -b flags to diff.  the "dirty" in the version is a modified prefix in 
Makefile. similar output is generated by the latest git version 
1.4.3.rc2.ge19ff.

     1	$ git version 1.4.1.rc1.g0d21e-dirty
     2	
     3	$ git init-db
     4	defaulting to local storage area

     5	$ cat <<EOF > x
     6	do {
     7	   nothing;
     8	} while (0);
     9	EOF

    10	$ git add x
    11	$ git commit -m "foo" x
    12	Committing initial tree 30cd2f91b2797cd3b657a5a03f3e7468253d8dce

    13	$ cat <<EOF > x
    14	do
    15	  {
    16	     nothing;
    17	}
    18	while (0);
    19	EOF

    20	$ git diff
    21	diff --git a/x b/x
    22	index adf3937..64671c6 100644
    23	--- a/x
    24	+++ b/x
    25	@@ -1,3 +1,5 @@
    26	-do {
    27	-   nothing;
    28	-} while (0);
    29	+do
    30	+  {
    31	+     nothing;
    32	+}
    33	+while (0);

    34	$ git diff -b
    35	diff --git a/x b/x
    36	index adf3937..64671c6 100644
    37	--- a/x
    38	+++ b/x
    39	@@ -1,3 +1,5 @@
    40	-do {
    41	+do
    42	+  {
    43	    nothing;
    44	-} while (0);
    45	+}
    46	+while (0);

    47	$ git diff -w
    48	diff --git a/x b/x
    49	index adf3937..64671c6 100644
    50	--- a/x
    51	+++ b/x
    52	@@ -1,3 +1,5 @@
    53	 do {
    54	+  {
    55	    nothing;
    56	-} while (0);
    57	+}
    58	+while (0);


ray
