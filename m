From: Vitaly Mayatskikh <v.mayatskih@gmail.com>
Subject: Re: [PATCH] git-send-email: parse all messages in mbox
Date: Thu, 14 May 2009 20:41:21 +0200
Message-ID: <87fxf7zfvy.wl%vmayatsk@redhat.com>
References: <873abbeoqc.wl%vmayatsk@redhat.com>
	<76718490905140748n390d0e85t8349b69fc6debc2a@mail.gmail.com>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: Vitaly Mayatskikh <v.mayatskih@gmail.com>, git@vger.kernel.org
To: Jay Soffian <jaysoffian@gmail.com>
X-From: git-owner@vger.kernel.org Thu May 14 20:41:40 2009
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1M4fs4-0006b2-I5
	for gcvg-git-2@gmane.org; Thu, 14 May 2009 20:41:32 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752745AbZENSlX (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Thu, 14 May 2009 14:41:23 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1752484AbZENSlX
	(ORCPT <rfc822;git-outgoing>); Thu, 14 May 2009 14:41:23 -0400
Received: from mail-fx0-f158.google.com ([209.85.220.158]:51343 "EHLO
	mail-fx0-f158.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751388AbZENSlW (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 14 May 2009 14:41:22 -0400
Received: by fxm2 with SMTP id 2so1492808fxm.37
        for <git@vger.kernel.org>; Thu, 14 May 2009 11:41:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:message-id:from:to:cc
         :subject:in-reply-to:references:user-agent:mime-version:content-type;
        bh=R8PhuG7RrmUX2itILnRUshJNF/W5pfIT0nVzm8o7VPM=;
        b=tseqKlwWxI3eOD2LXXpNUrPCQPH/nyEcRixs9is1gnYU6s0BxkmMk4+KuIlrbqIi4H
         y0MOO6bQGaG/e+euN8GPGEjQj97zMSQMhC7QGSSs+1Vn6eMcbegy3n1U5LCItMCNvnLU
         G7kv3nW7/OUAsnAn6taCKH6wvku5rOoaXveuM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:message-id:from:to:cc:subject:in-reply-to:references
         :user-agent:mime-version:content-type;
        b=ANmCX5BtBjBjuUchf3Il8TgKdtcBmOysC9fWU2W+Cp0O9DMEtB5mHEV5V3cKeQEYxl
         ApMuJAxiLQio/qkegq2IQqOi9ROJ0giKeOT4nIRNi0M92fAgVF96Ke2HSAiQvtssZhni
         r/8jw5l/TBFaAzImHj3Bi2rVGjxjUFDOGEf4Y=
Received: by 10.86.80.5 with SMTP id d5mr2828058fgb.59.1242326482698;
        Thu, 14 May 2009 11:41:22 -0700 (PDT)
Received: from gravicappa.englab.brq.redhat.com (r9df13.net.upc.cz [78.102.109.13])
        by mx.google.com with ESMTPS id l19sm6021097fgb.7.2009.05.14.11.41.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 14 May 2009 11:41:22 -0700 (PDT)
In-Reply-To: <76718490905140748n390d0e85t8349b69fc6debc2a@mail.gmail.com>
User-Agent: Wanderlust/2.15.6 (Almost Unreal) Emacs/22.3 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/119212>

At Thu, 14 May 2009 10:48:33 -0400, Jay Soffian wrote:

> On Mon, May 11, 2009 at 9:46 AM, Vitaly Mayatskikh
> <v.mayatskih@gmail.com> wrote:
> > Currently git-send-email sends all mbox in one email. This seems to be wrong,
> > because mbox can contain several messages. For example,
> > `git format-patch --stdout' forms mbox file with all patches in it.
> 
> Just out of curiosity, what is the motivation for this patch?
> 
> By default, format-patch generates a file per commit, which is what
> send-email currently expects. You can also specify one or more commits
> to send-email directly, in which case it runs format-patch on your
> behalf. And, send-email cannot handle messages on stdin, so "git
> format-patch | git send-email" is not a valid workflow, even after
> this patch.
> 
> So the only way I can see this being useful is if you're doing something like:
> 
> $ git format-patch --stdout > mbox
> $ git send-email mbox
> 
> Or you can combine those in bash with:
> 
> $ git send-email <(git format-patch --stdout)
> 
> But, why? The only way this patch would make any sense to me is if it
> _also_ extended send-email to read its messages from stdin.

Because I want to edit cover letter, make --dry-run, etc. And it's
more handy to me to have one entity (file) then a dozen of separate
patches.

-- 
wbr, Vitaly
