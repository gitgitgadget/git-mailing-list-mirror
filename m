Return-Path: <SRS0=fhRL=6M=vger.kernel.org=git-owner@kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
	aws-us-west-2-korg-lkml-1.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.8 required=3.0 tests=HEADER_FROM_DIFFERENT_DOMAINS,
	MAILING_LIST_MULTI,SPF_HELO_NONE,SPF_PASS,URIBL_BLOCKED autolearn=no
	autolearn_force=no version=3.4.0
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
	by smtp.lore.kernel.org (Postfix) with ESMTP id A3A79C83000
	for <git@archiver.kernel.org>; Tue, 28 Apr 2020 21:07:53 +0000 (UTC)
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.kernel.org (Postfix) with ESMTP id 8C3A62072A
	for <git@archiver.kernel.org>; Tue, 28 Apr 2020 21:07:53 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726644AbgD1VHw (ORCPT <rfc822;git@archiver.kernel.org>);
        Tue, 28 Apr 2020 17:07:52 -0400
Received: from cloud.peff.net ([104.130.231.41]:43024 "HELO cloud.peff.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with SMTP
        id S1726274AbgD1VHv (ORCPT <rfc822;git@vger.kernel.org>);
        Tue, 28 Apr 2020 17:07:51 -0400
Received: (qmail 23789 invoked by uid 109); 28 Apr 2020 21:07:51 -0000
Received: from Unknown (HELO peff.net) (10.0.1.2)
 by cloud.peff.net (qpsmtpd/0.94) with SMTP; Tue, 28 Apr 2020 21:07:51 +0000
Authentication-Results: cloud.peff.net; auth=none
Received: (qmail 7194 invoked by uid 111); 28 Apr 2020 21:19:15 -0000
Received: from coredump.intra.peff.net (HELO sigill.intra.peff.net) (10.0.0.2)
 by peff.net (qpsmtpd/0.94) with (TLS_AES_256_GCM_SHA384 encrypted) ESMTPS; Tue, 28 Apr 2020 17:19:15 -0400
Authentication-Results: peff.net; auth=none
Date:   Tue, 28 Apr 2020 17:07:50 -0400
From:   Jeff King <peff@peff.net>
To:     Danh Doan <congdanhqx@gmail.com>
Cc:     Johannes Schindelin <Johannes.Schindelin@gmx.de>,
        Junio C Hamano <gitster@pobox.com>,
        Sibi Siddharthan <sibisiddharthan.github@gmail.com>,
        Sibi Siddharthan via GitGitGadget <gitgitgadget@gmail.com>,
        git@vger.kernel.org
Subject: Re: [PATCH 0/8] CMake build system for git
Message-ID: <20200428210750.GE4000@coredump.intra.peff.net>
References: <pull.614.git.1587700897.gitgitgadget@gmail.com>
 <xmqqv9lod85m.fsf@gitster.c.googlers.com>
 <CAKiG+9V_nZUXf2a689vZ54rG+xTCFMGcJe_7Av-khaxxuijERg@mail.gmail.com>
 <xmqq8sikblv2.fsf@gitster.c.googlers.com>
 <nycvar.QRO.7.76.6.2004251354390.18039@tvgsbejvaqbjf.bet>
 <20200427200852.GC1728884@coredump.intra.peff.net>
 <20200427201228.GD1728884@coredump.intra.peff.net>
 <20200428135222.GB31366@danh.dev>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
In-Reply-To: <20200428135222.GB31366@danh.dev>
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

On Tue, Apr 28, 2020 at 08:52:37PM +0700, Danh Doan wrote:

> On 2020-04-27 16:12:28-0400, Jeff King <peff@peff.net> wrote:
> > On Mon, Apr 27, 2020 at 04:08:52PM -0400, Jeff King wrote:
> > 
> > > Skimming the patches, I do wish I didn't see so much repetition with the
> > > existing Makefile. I know that some of the logic will just have to be
> > > ported manually, but surely we could be pulling things like the list of
> > > libgit_SOURCES from the Makefile as the single source of truth?
> > 
> > Thinking I surely couldn't be the only one to think of this, I dug
> > further into some of the sub-threads. And indeed, it seems like you are
> > on the same page here.
> > 
> > IMHO it is worth making the cmake file depend as much as possible on
> > what's in the Makefile.
> 
> Please correct me if I were wrong (I recall this from my memory
> without checking anything).
> 
> The worst thing about CMake is we can't override (Make's) variable
> in Makefile generated by CMake.

I really don't know enough about cmake to say one way or the other. I
can well believe there are parts of the Makefile that will need to be
manually translated, and that it may not ever hit full parity.

But as long as it just a tool for people using Visual Studio, and if
they are happier being able to use that tool, even with a few
deficiencies, then it may still be worth doing.

-Peff
