From: Carl Worth <cworth@cworth.org>
Subject: Re: [PATCH] Detached HEAD (experimental)
Date: Tue, 02 Jan 2007 15:34:24 -0800
Message-ID: <87odphgfzz.wl%cworth@cworth.org>
References: <7vac11yirf.fsf@assigned-by-dhcp.cox.net>
	<87ps9xgkjo.wl%cworth@cworth.org>
	<7virfprquo.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Tue_Jan__2_15:34:18_2007-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Wed Jan 03 00:36:06 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1H1tAn-00063c-6i
	for gcvg-git@gmane.org; Wed, 03 Jan 2007 00:36:01 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S965009AbXABXf4 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 2 Jan 2007 18:35:56 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1752672AbXABXf4
	(ORCPT <rfc822;git-outgoing>); Tue, 2 Jan 2007 18:35:56 -0500
Received: from cworth.org ([217.160.249.188]:43050 "EHLO theworths.org"
	rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
	id S1752638AbXABXfy (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 2 Jan 2007 18:35:54 -0500
Received: (qmail 6545 invoked from network); 2 Jan 2007 18:35:53 -0500
Received: from localhost (HELO raht.cworth.org) (127.0.0.1)
  by localhost with SMTP; 2 Jan 2007 18:35:53 -0500
To: Junio C Hamano <junkio@cox.net>
In-Reply-To: <7virfprquo.fsf@assigned-by-dhcp.cox.net>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/35837>

--pgp-sign-Multipart_Tue_Jan__2_15:34:18_2007-1
Content-Type: text/plain; charset=US-ASCII

On Tue, 02 Jan 2007 14:44:31 -0800, Junio C Hamano wrote:
> We could do two things, and I think disallowing commits is not
> necessarily a better option of the two.  We could allow commits
> and prevent the user from switching out of the detached HEAD
> state without an explicit action instead.

Yeah, that would be fine too. Personally, I'd be happy with either
approach.

> "git-checkout" but there may be other cases.  In either way, we
> need a safety valve, which the experimental code does not have.

OK. I guess I misinterpreted things. I was afraid that you were
proposing a safety valve on _entering_ the detached state, (perhaps
the -d option to checkout itself). It was the requirement of something
extra to checkout a tag (as opposed to checkout of a branch) that I
disliked.

> In any case, I did this because I got tired of waiting for it to
> happen (I thought you wanted to hack on this over the long
> week^W yearend, so I deliberately stayed away from doing this)
> and I was bored.  This will not be in 'next' in the current
> shape.

I'm glad you went ahead. I ended up almost not touching computers at
all from December 23 to January 2 [*].

> You've thought about the issue long enough to write your
> commentary and I agree to most of your points (including
> favoring "no commit allowed in this state" over "allow commits
> and merges to help advanced usage" for its simplicity), so if
> you code it up with a clean patch, I would not reject it on the
> basis of its design.

I don't actually prefer "no commit allowed". I just didn't want the
user to have to explicitly disable the safety before being able to
perform a checkout based on a tag.

I am still interested in this feature, so I will try to find time to
come back with a revised version of your patch with the missing safety
check (and without requiring -d on checkout). Thanks again for this
initial take on the problem. (Though if anyone else beats me to it, I
certainly will not be offended.)

-Carl

[*] I did play some nice new (to me) board games, (Zendo and DVONN
being standouts), but thats a topic for elsewhere I suppose.

--pgp-sign-Multipart_Tue_Jan__2_15:34:18_2007-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQBFmuwA6JDdNq8qSWgRAi3OAKCSPZsFWP+eFkS+7UpRgnQviveGeQCfRbxT
Y9kUgWe/cSu2coO0Sq2g050=
=cR2G
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Tue_Jan__2_15:34:18_2007-1--
