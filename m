From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: Add a "git-describe" command
Date: Sat, 24 Dec 2005 19:46:22 -0800 (PST)
Message-ID: <Pine.LNX.4.64.0512241939490.14098@g5.osdl.org>
References: <Pine.LNX.4.64.0512241339120.14098@g5.osdl.org>
 <7v4q4yq7f2.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Dec 25 04:46:49 2005
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1EqMqI-0002DW-Ih
	for gcvg-git@gmane.org; Sun, 25 Dec 2005 04:46:42 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750772AbVLYDq2 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sat, 24 Dec 2005 22:46:28 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1750789AbVLYDq2
	(ORCPT <rfc822;git-outgoing>); Sat, 24 Dec 2005 22:46:28 -0500
Received: from smtp.osdl.org ([65.172.181.4]:42926 "EHLO smtp.osdl.org")
	by vger.kernel.org with ESMTP id S1750772AbVLYDq2 (ORCPT
	<rfc822;git@vger.kernel.org>); Sat, 24 Dec 2005 22:46:28 -0500
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id jBP3kMDZ005655
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Sat, 24 Dec 2005 19:46:23 -0800
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id jBP3kMCT021305;
	Sat, 24 Dec 2005 19:46:22 -0800
To: Junio C Hamano <junkio@cox.net>
In-Reply-To: <7v4q4yq7f2.fsf@assigned-by-dhcp.cox.net>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.57__
X-MIMEDefang-Filter: osdl$Revision: 1.129 $
X-Scanned-By: MIMEDefang 2.36
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/14043>



On Sat, 24 Dec 2005, Junio C Hamano wrote:
>
> I wonder if some tags are more important than others (we may
> want to pick a signed tag that is a bit further down than an
> autogenerated snapshot -git47 tag), but that depends on the
> usage.  For bug hunting -git47 is more useful than sparsely done
> signed tags e.g. -rc4.

I considered just printing every tag I could reach, and then you could do 

	git-describe xyz | head -1

to get the closest one.

But then I decided that almost always, you just want the most recent one. 
But we could add a "--history" cmd line option to show all the reachable 
ones (or limit it to <n> tags shown or something)..

But there's already some logic to cull out uninteresting references (ie 
the "--all" flag enables all kinds of references, normally we only look at 
tags), and yes, we could also just add some other culling logic. For 
example, maybe we only care about annotated tags (ie real tag objects with 
a message, rather than just direct references to commits).

My real goal was to see a real meaningful version when I do "git 
--version". I just hate how it normally just says it's version "1.0.GIT", 
and I have no idea how new/old it really is.

			Linus
