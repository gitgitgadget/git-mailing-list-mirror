From: Carl Worth <cworth@cworth.org>
Subject: Re: [PATCH] git-status: wording update to deal with deleted files.
Date: Thu, 11 Jan 2007 15:56:57 -0800
Message-ID: <87ac0pxgl2.wl%cworth@cworth.org>
References: <87bql5cok3.fsf@morpheus.local>
	<7vejq12nlu.fsf@assigned-by-dhcp.cox.net>
	<7vsleh16ey.fsf_-_@assigned-by-dhcp.cox.net>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Thu_Jan_11_15:56:56_2007-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: David =?ISO-8859-1?Q?K=E5gedal?= <davidk@lysator.liu.se>,
	git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Jan 12 00:59:07 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1H59p3-0005iE-K8
	for gcvg-git@gmane.org; Fri, 12 Jan 2007 00:59:05 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751519AbXAKX7C (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 11 Jan 2007 18:59:02 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751525AbXAKX7C
	(ORCPT <rfc822;git-outgoing>); Thu, 11 Jan 2007 18:59:02 -0500
Received: from mx1.redhat.com ([66.187.233.31]:49568 "EHLO mx1.redhat.com"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751517AbXAKX7B (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 11 Jan 2007 18:59:01 -0500
Received: from int-mx1.corp.redhat.com (int-mx1.corp.redhat.com [172.16.52.254])
	by mx1.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id l0BNwtr4031756;
	Thu, 11 Jan 2007 18:58:55 -0500
Received: from mail.boston.redhat.com (mail.boston.redhat.com [172.16.76.12])
	by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id l0BNwn0g014815;
	Thu, 11 Jan 2007 18:58:50 -0500
Received: from raht.cworth.org (sebastian-int.corp.redhat.com [172.16.52.221])
	by mail.boston.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id l0BNwmiY027928;
	Thu, 11 Jan 2007 18:58:49 -0500
To: Junio C Hamano <junkio@cox.net>
In-Reply-To: <7vsleh16ey.fsf_-_@assigned-by-dhcp.cox.net>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/36638>

--pgp-sign-Multipart_Thu_Jan_11_15:56:56_2007-1
Content-Type: text/plain; charset=US-ASCII

All very good stuff Junio, thanks.

In light of the big long message I just wrote, let me comment on the
changes you just made here.

On Thu, 11 Jan 2007 15:37:41 -0800, Junio C Hamano wrote:
> we used to say "git add ... to add content to commit".  But
> suggsting "git add" to record the deletion of a file is simply
> insane.

I'm very happy to hear you agree that would be insane.

>  - The section header is the old "Changed but not updated",
>    instead of "Changed but not added";

Again, not only deletion, but another place where "add" doesn't work
universally. As I mentioned in my other thread, the experiment in
using "add" as a first-class porcelain for all index updating just
doesn't work everywhere.

The caution I would point out here is that we are now introducing a
term ("update") into the output-side of git's user-interface, but that
there's no corresponding "update" on the input side, (at least as far
as porcelain is concerned). So conceptually, the user can be left
with, "hmm... it's not updated, but how the heck do I update it?".

>  - Suggestion is "git add ... to update what will be committed",
>    instead of "... to add content to commit";
>
>  - If there are removed paths, the above suggestion becomes "git
>    add/rm ... to update what will be committed";

Here now we do start providing the user with some mechanisms for
"update". Sometimes we suggest using "add" to update, and sometimes we
suggest using "add" or "rm" to update. But as you yourself have
pointed out, you consider "rm" a totally pointless command.

Wouldn't git be simpler if it only provided one porcelain command for
updating content into the index? I proposed "stage" in my preceding
email---but I don't care what the actual term used is. But it should
definitely be a term that's consistent with the terms that git-status
uses to describe the state of these files.

>  - For untracked files, the suggestion is "git add ... to
>    include in what will be committed".

And here is where git-status points out that "git add" has another use
that's conceptually distinct from updating content. I think that
distinction should be made more clear by "git add" being a separate
command from whatever the porcelain for "update content into the
index" becomes.

-Carl

--pgp-sign-Multipart_Thu_Jan_11_15:56:56_2007-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQBFps7J6JDdNq8qSWgRAu1gAKCEx3NjsO3xU0t+DjHDwUMoJf8udQCeKd6h
ZDbjiBSq9JqeV28xu6FuUfE=
=IjgJ
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Thu_Jan_11_15:56:56_2007-1--
