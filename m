From: Carl Worth <cworth@cworth.org>
Subject: Re: [PATCH] gitweb: configurable home link string
Date: Tue, 15 Aug 2006 13:24:40 -0700
Message-ID: <87mza5ycfr.wl%cworth@cworth.org>
References: <11555958491891-git-send-email-yashi@atmark-techno.com>
	<ebsrsn$tgq$1@sea.gmane.org>
	<20060815192737.GA14459@admingilde.org>
	<8fe92b430608151236l35ff169cjea6580250182b5ef@mail.gmail.com>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Tue_Aug_15_13:24:33_2006-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: "Martin Waitz" <tali@admingilde.org>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Aug 15 22:26:08 2006
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1GD5TO-00008Y-5D
	for gcvg-git@gmane.org; Tue, 15 Aug 2006 22:25:14 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750913AbWHOUYy (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 15 Aug 2006 16:24:54 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751173AbWHOUYy
	(ORCPT <rfc822;git-outgoing>); Tue, 15 Aug 2006 16:24:54 -0400
Received: from cworth.org ([217.160.249.188]:34436 "EHLO theworths.org")
	by vger.kernel.org with ESMTP id S1750913AbWHOUYx (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 15 Aug 2006 16:24:53 -0400
Received: (qmail 22072 invoked from network); 15 Aug 2006 16:24:51 -0400
Received: from localhost (HELO raht.cworth.org) (127.0.0.1)
  by localhost with SMTP; 15 Aug 2006 16:24:51 -0400
To: "Jakub Narebski" <jnareb@gmail.com>
In-Reply-To: <8fe92b430608151236l35ff169cjea6580250182b5ef@mail.gmail.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/25479>

--pgp-sign-Multipart_Tue_Aug_15_13:24:33_2006-1
Content-Type: text/plain; charset=US-ASCII

On Tue, 15 Aug 2006 21:36:43 +0200, "Jakub Narebski" wrote:
> On 8/15/06, Martin Waitz <tali@admingilde.org> wrote:
> >
> > doesn't it make more sense to make it more easy to use the same URL for
> > git:, http: and gitweb?
>
> It is not always possible to use the same URL for gitweb and http://
> access, for example gitweb might require /cgi-bin/ in path. git:// and
> git+ssh:// access migh need different path than http:// access.
>
> With PATH_INFO for 'project' parameter actually used gitweb link would
> be the same as http:// access link;

And for someone who has enough control to make consistent URLs happen,
could anyone provide guidance on how to make this work? Specifically,
I'm interested in getting at the PATH_INFO for project functionality.

Currently I've got gitweb running at the root URL on its own domain
with the following apache configuration:

	ScriptAlias / /usr/lib/cgi-bin/gitweb

So I can currently browse a project with something like:

	http://gitweb.freedesktop.org/?p=cairo.git

But if I try to put the project name as part of the path:

	http://gitweb.freedesktop.org/cairo.git

Then I just get a 404. So what do I need to configure to get the
PATH_INFO stuff to work?

Also, is there support in gitweb for not requiring the ".git" suffix
even though that exists in the directory on the filesystem? The URL I
really want to use is:

	http://gitweb.freedesktop.org/cairo

Finally, once I get that working, I would like gitweb to generate URLs
of this form in the link it generates. Does it have that capability
yet? (It would also be nice if it didn't append options that are the
default anyway, such as ";a=summary").

Thanks in advance,

-Carl

PS. Oh, and then the final thing I'd want is to allow someone to cut
and paste a gitweb URL such as the above to "git clone" and then some
magic would forward things such that the git daemon would serve the
data. Has anyone got that working? And for bonus points, it would also
fail over to http:// cloning if git:// cloning weren't possible for
some reason.

--pgp-sign-Multipart_Tue_Aug_15_13:24:33_2006-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQBE4i2I6JDdNq8qSWgRAn9zAKCDYLK/rxtv4IVL2l+BK9DKzjb2OwCeKRwY
+67ii2fvNC51Nlbsl2aPTjA=
=FSU1
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Tue_Aug_15_13:24:33_2006-1--
