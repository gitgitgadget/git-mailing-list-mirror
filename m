From: Carl Worth <cworth@cworth.org>
Subject: Re: [RFC] git-clone: add --track <headname> support
Date: Thu, 12 Apr 2007 16:24:05 -0700
Message-ID: <87slb5tbvu.wl%cworth@cworth.org>
References: <1176372539871-git-send-email-martin@catalyst.net.nz>
	<87veg1tuuv.wl%cworth@cworth.org>
	<461EA8C5.1070503@catalyst.net.nz>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Thu_Apr_12_16:23:58_2007-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: git@vger.kernel.org, junkio@cox.net
To: Martin Langhoff <martin@catalyst.net.nz>
X-From: git-owner@vger.kernel.org Fri Apr 13 01:24:43 2007
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1Hc8eh-0007mr-AA
	for gcvg-git@gmane.org; Fri, 13 Apr 2007 01:24:43 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753568AbXDLXYL (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 12 Apr 2007 19:24:11 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1753894AbXDLXYL
	(ORCPT <rfc822;git-outgoing>); Thu, 12 Apr 2007 19:24:11 -0400
Received: from theworths.org ([217.160.253.102]:52999 "EHLO theworths.org"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1753568AbXDLXYJ (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 12 Apr 2007 19:24:09 -0400
Received: (qmail 28254 invoked from network); 12 Apr 2007 19:24:07 -0400
Received: from localhost (HELO raht.cworth.org) (127.0.0.1)
  by localhost with SMTP; 12 Apr 2007 19:24:07 -0400
In-Reply-To: <461EA8C5.1070503@catalyst.net.nz>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/44366>

--pgp-sign-Multipart_Thu_Apr_12_16:23:58_2007-1
Content-Type: text/plain; charset=US-ASCII

On Fri, 13 Apr 2007 09:46:45 +1200, Martin Langhoff wrote:
> Hi Carl! Yes - this stuff should be simple, and _really hard to fsck up_.

I definitely agree. I think the use case of "tracking some branch
other than the default" is a really important one to make
easy. Precisely because there are a lot of users who will initially
use git for nothing other than this tracking, (not initially making
commits, or pushing, etc.).

So we would do well if this initial exposure were really easy. And
right now it's a bit too hard in my opinion, (in terms of commands,
concepts, and syntax the user has to use).

Is this correct sequence for the operation in 1.5.1 ?

	git clone <repo>
	cd <project>
	git branch --track <branch> origin/<branch>
	git checkout branch
	git pull # as needed

I'd love to get that down to:

	git clone <something with <repo> and <branch>>
	cd <project>
	git pull # as needed

and then adding a subsequent branch to track would be:

	git track <something with <repo> and <branch>>
	git checkout <branch>
	git pull # as needed

> Oops - looks like we are talking about different things. What you write
> above can be done with "git-branch --track" on 1.5.1 so it's already in
> existence.

The mechanics are there, yes. All that's missing is the common
<something> syntax which, as shown above, can be shared for both
cloning originally and later adding a branch to track.

And <repo>#<branch> seems as good a <something> as anything else I
could imagine.

> With my proposed git-track as a wrapper around git-clone _and_
> git-branch --track, you only need to say
>
>     To start working on foo, do
>
>       git track <repo>#branch

Yeah, that's the idea. I had just planned on publishing the
<repo>#branch part and the user would learn whether to pass that to
"git clone" or "git track" as appropriate.

Making one command do either one seems a little too DWIM and
error-prone to me. But whatever works, (and more importantly, whatever
you can implement and get accepted).

-Carl

--pgp-sign-Multipart_Thu_Apr_12_16:23:58_2007-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBGHr+V6JDdNq8qSWgRAqA+AKCOjsEI6sA8K7GolKF8Z/FilSsVvACfWB0A
4mZ6SCXZGZBrv0bobVZQ83c=
=pQv4
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Thu_Apr_12_16:23:58_2007-1--
