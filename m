Return-Path: <git-owner@kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
	aws-us-west-2-korg-lkml-1.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-8.8 required=3.0 tests=BAYES_00,
	HEADER_FROM_DIFFERENT_DOMAINS,MAILING_LIST_MULTI,MENTIONS_GIT_HOSTING,
	SPF_HELO_NONE,SPF_PASS autolearn=ham autolearn_force=no version=3.4.0
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
	by smtp.lore.kernel.org (Postfix) with ESMTP id 4A539C433E3
	for <git@archiver.kernel.org>; Mon, 29 Mar 2021 09:31:18 +0000 (UTC)
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.kernel.org (Postfix) with ESMTP id 1A92061999
	for <git@archiver.kernel.org>; Mon, 29 Mar 2021 09:31:18 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S232009AbhC2Jaq (ORCPT <rfc822;git@archiver.kernel.org>);
        Mon, 29 Mar 2021 05:30:46 -0400
Received: from smtp511.hk.chengmail.me ([113.10.190.157]:42156 "EHLO
        smtp511.hk.chengmail.me" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S231652AbhC2Jah (ORCPT <rfc822;git@vger.kernel.org>);
        Mon, 29 Mar 2021 05:30:37 -0400
X-CHENGMAILHOST: 113.10.190.157
X-CHENGMAIL-INSTANCEID: 5dd7.60619e34.d3e9c.0
Date:   Mon, 29 Mar 2021 17:30:29 +0800
From:   "lilinchao@oschina.cn" <lilinchao@oschina.cn>
To:     "Jeff King" <peff@peff.net>, "Junio C Hamano" <gitster@pobox.com>
Cc:     git <git@vger.kernel.org>
Subject: Re: Re: [PATCH 2/2] remote-curl.c: handle v1 when check_smart_http
References: <20210324053648.25584-1-lilinchao@oschina.cn>, 
        <006547b28c6311eb93820024e87935e7@oschina.cn>, 
        <xmqq7dlwxpn3.fsf@gitster.g>, 
        <e4d6bef08dfb11eb90f0a4badb2c2b1115536@peff.net>
X-Priority: 3
X-GUID: 2371E036-C745-4552-90C6-BDDC03FF5FEE
X-Has-Attach: no
X-Mailer: Foxmail 7.2.19.158[cn]
Mime-Version: 1.0
X-source-message-id: <2021032917292647593419@oschina.cn>
Content-Type: text/plain;
        charset="utf-8"
Content-Transfer-Encoding: base64
Message-ID: <68765f14907111eb8e180024e87935e7@oschina.cn>
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

CgoKLS0tLS0tLS0tLS0tLS0KbGlsaW5jaGFvQG9zY2hpbmEuY24KPk9uIFdlZCwgTWFyIDI0LCAy
MDIxIGF0IDAxOjI4OjMyUE0gLTA3MDAsIEp1bmlvIEMgSGFtYW5vIHdyb3RlOgo+Cj4+ID4gKwl9
IGVsc2UgaWYgKCFzdHJjbXAocmVhZGVyLmxpbmUsICJ2ZXJzaW9uIDEiKSkgewo+PiA+ICsJZGll
KF8oInYxIGlzIGp1c3QgdGhlIG9yaWdpbmFsIHByb3RvY29sIHdpdGggYSB2ZXJzaW9uIHN0cmlu
ZywgdXNlIHYwIG9yIHYyIGluc3RlYWQuIikpOwo+Pgo+PiBUaGUgdXNlciBtYXkgbm8gbG9uZ2Vy
IGdldCAiaW52YWxpZCByZXNwb25zZTsgZ290ICd2ZXJzaW9uIDEnIiwgYnV0Cj4+IHRoZSBhYm92
ZSBkb2VzIG5vdCBzdGlsbCBleHBsYWluIHdoeSB2MSBpcyBiYWQgYW5kIHYwIG9yIHYyIGlzCj4+
IHdlbGNvbWUsIGVpdGhlci7CoCBJT1csIEkgZG8gbm90IHRoaW5rIHRoZSBwYXRjaCBpbXByb3Zl
cyB0aGUgbWVzc2FnZQo+PiB0byBhY2hpZXZlIHdoYXQgaXQgYXR0ZW1wdGVkIHRvIGRvLCBpLmUu
Cj4+Cj4+wqDCoMKgwqAgLi4uIGJ1dCB0aGUgb3RoZXIgc2lkZSBqdXN0IHRyZWF0IGl0IGFzICJp
bnZhbGlkIHJlc3BvbnNlIiwgdGhpcwo+PsKgwqDCoMKgIGNhbid0IGV4cGxhaW4gd2h5IGlzIG5v
dCBvay4KPj4KPj4gSSB3b25kZXIgaWYgaXQgaXMgYSBzZW5zaWJsZSBhbmQgYmV0dGVyIGFsdGVy
bmF0aXZlIHRvIHRyZWF0IHYxCj4+IHJlc3BvbnNlIGFzIGlmIHdlIGdvdCB2MCAoaWYgdjEgaXMg
dHJ1bHkgdGhlIHNhbWUgYXMgdjAgZXhjZXB0IGZvcgo+PiB0aGUgaW5pdGlhbCB2ZXJzaW9uIGFk
dmVydGlzZW1lbnQpLgo+Pgo+PiBJbnB1dCBmcm9tIHRob3NlIHdobyBhcmUgZmFtaWxpYXIgd2l0
aCB0aGUgcHJvdG9jb2wgdmVyc2lvbnMgaXMgdmVyeQo+PiBtdWNoIGFwcHJlY2lhdGVkLgo+Cj5Z
ZXMsICJ2MSIgaXMgc3VwcG9zZWQgdG8gYmVoYXZlIGp1c3QgbGlrZSB2MCwgZXhjZXB0IHdpdGgg
dGhlIHZlcnNpb24KPmFkdmVydGlzZW1lbnQgKGl0IGlzIHRydWUgdGhhdCB0aGVyZSBpcyBubyBw
b2ludCBpbiBub3JtYWwgcGVvcGxlIHVzaW5nCj5pdCwgYnV0IHRoZSBwdXJwb3NlIHdhcyB0byBt
YWtlIHN1cmUgdGhlIHZlcnNpb24gYWR2ZXJ0aXNlbWVudCB3b3JrZWQpLgo+Cj5JIGFtIG5vdCBz
dXJlIHdobyBpcyByZWplY3RpbmcgaXQsIHRob3VnaC4gT3VyIHRlc3Qgc3VpdGUgcGFzc2VzIHdp
dGgKPkdJVF9URVNUX1BST1RPQ09MX1ZFUlNJT049MS4gUnVubmluZyBzb21ldGhpbmcgbGlrZToK
Pgo+ICQgR0lUX1RSQUNFX1BBQ0tFVD0xIGdpdCAtYyBwcm90b2NvbC52ZXJzaW9uPTEgbHMtcmVt
b3RlIGh0dHBzOi8vZ2l0aHViLmNvbS9naXQvZ2l0Cj4KPnlpZWxkcyBhIGNvbnZlcnNhdGlvbiBs
aWtlIChjdXQgZG93biBmb3IgY2xhcml0eSk6Cj4KPsKgIGdpdDwgIyBzZXJ2aWNlPWdpdC11cGxv
YWQtcGFjawo+wqAgZ2l0PCAwMDAwCj7CoCBnaXQ8IHZlcnNpb24gMQo+wqAgZ2l0PCAxMjM0YWJj
ZFsuLi5ldGMsIHRoaXMgaXMgYSBub3JtYWwgdjAvdjEgYWR2ZXJ0aXNlbWVudF0KPgo+U28gdGhl
IHZlcnNpb24gc3RyaW5nIGlzIHRoZXJlLCBidXQgaXQgZG9lcyBub3QgdHJpZ2dlciB0aGUgcHJv
YmxlbQo+ZGVzY3JpYmVkIGJ5IHRoaXMgcGF0Y2guIFRoYXQncyBiZWNhdXNlIGNoZWNrX3NtYXJ0
X2h0dHAoKSwgYWZ0ZXIgc2VlaW5nCj50aGUgIiMgc2VydmljZSIgbGluZSBhbmQgdGhlIGZsdXNo
LCB0YWtlcyBhbGwgdGhlIHJlc3Qgb2YgdGhlIHBhY2tldGl6ZWQKPmRhdGEgYW5kIGdpdmVzIGl0
IHRvIHBhcnNlX2dpdF9yZWZzKCksIHdoaWNoIGhhbmRsZXMgdGhlIHZlcnNpb24gZmllbGQKPmxp
bmUgdmlhIGRpc2NvdmVyX3ZlcnNpb24oKS4KPgo+wqAgQXNpZGU6IG9uIGdpdGxhYi5jb20sIHRo
ZSB2MSByZXNwb25zZSBsb29rcyBsaWtlIGEgdjAgcmVzcG9uc2UsIHdpdGgKPsKgIG5vIGV4dHJh
IGhlYWRlci4gSSBndWVzcyB0aGV5IGRpZCBub3QgYm90aGVyIHRvIGltcGxlbWVudCB2MSwgd2hp
Y2ggaXMKPsKgIE9LLCBzaW5jZSBpdCB3YXMgbm90IHVzZWZ1bCBhZnRlciB0aGUgaW5pdGlhbCBl
eHBlcmltZW50Lgo+Cj5TbyBldmVyeXRoaW5nIHNlZW1zIHRvIGJlIHdvcmtpbmcgYXMgaW50ZW5k
ZWQuIElzIHRoZXJlIHNvbWUgcGFydGljdWxhcgo+c2VydmVyIHRoYXQgcmV0dXJucyAidmVyc2lv
biAxIiBpbiB0aGUgd3Jvbmcgd2F5LCB0cmlnZ2VyaW5nIHRoZSBkaWUoKT8KPiAKT24gZ2l0ZWUu
Y29tLCBJIGdvdCAidmVyc2lvbiAxIiwgYW5kIHRoZSBwcm9jZXNzIGRpZWQgaGVyZS4KCj5PbmUg
Y3VyaW9zaXR5IGlzIHRoYXQgZm9yIHYyLCB0aGUgcmVzcG9uc2UgZnJvbSBnaXRodWIuY29tIGRv
ZXMgaW5jbHVkZQo+dGhlICJzZXJ2aWNlIiBsaW5lLiBTbyBpdCBmb2xsb3dzIHRoZSBzYW1lIHBh
dGggYXMgdjEsIGFuZCBuZXZlciBoaXRzCj50aGUgInZlcnNpb24gMiIgbGluZSBjaGVjayBoZXJl
LiBCdXQgaHR0cC1iYWNrZW5kIG9taXRzIHRoZSAic2VydmljZSIKPmxpbmUsIGR1ZSB0byAyMzdm
ZmVkZDQ2IChodHRwOiBlbGltaW5hdGUgIiMgc2VydmljZSIgbGluZSB3aGVuIHVzaW5nCj5wcm90
b2NvbCB2MiwgMjAxOC0wMy0xNSkuCj4gCktlZW4gb2JzZXJ2YXRpb24gOikKCj5TbyBpdCdzIGlu
dGVyZXN0aW5nIHRoYXQgR2l0SHViIGJlaGF2ZXMgZGlmZmVyZW50bHkgdGhhbiBodHRwLWJhY2tl
bmQKPmhlcmUuIEl0J3Mgbm90IHN1cnByaXNpbmcsIHNpbmNlIHRoZSBIVFRQIGZyYW1pbmcgaXMg
YWxsIGRvbmUgYnkgYQo+Y3VzdG9tIHNlcnZlciB0aGVyZSwgd2hpY2ggaW1wbGVtZW50ZWQgb2Zm
IHRoZSBzcGVjLsKgIFdoYXQgX2lzXwo+c3VycHJpc2luZyBpcyB0aGF0IHRoZSBjbGllbnQgc2Vl
bXMgcGVyZmVjdGx5IGhhcHB5IHRvIHNlZSBlaXRoZXIgZm9ybSwKPmFuZCBub2JvZHkgaGFzIG5v
dGljZWQgdGhlIGRpZmZlcmVuY2UgdW50aWwganVzdCBub3cuCj4KPklNSE8gdGhlIHNwZWMgaXMg
dmVyeSB1bmNsZWFyIGhlcmU7IGl0IHNheXMgImNsaWVudCBtYWtlcyBhIHNtYXJ0Cj5pbmZvL3Jl
ZnMgcmVxdWVzdCBhcyBkZXNjcmliZWQgaW4gaHR0cC1wcm90b2NvbC50eHQiLCBidXQgZG9lc24n
dCBjYWxsCj5vdXQgdGhlIGRpZmZlcmVuY2UgaW4gdGhlIHJlc3BvbnNlLiBJdCdzIG9ubHkgaW1w
bGllZCBieSB0aGUgZXhhbXBsZToKPgo+wqAgQSB2MiBzZXJ2ZXIgd291bGQgcmVwbHk6Cj4KPsKg
wqDCoMKgIFM6IDIwMCBPSwo+wqDCoMKgwqAgUzogPFNvbWUgaGVhZGVycz4KPsKgwqDCoMKgIFM6
IC4uLgo+wqDCoMKgwqAgUzoKPsKgwqDCoMKgIFM6IDAwMGV2ZXJzaW9uIDJcbgo+wqDCoMKgwqAg
UzogPGNhcGFiaWxpdHktYWR2ZXJ0aXNlbWVudD4KPgo+d2hlcmUgaXQgaXMgdW5jbGVhciB3aGV0
aGVyIHRoZSBibGFuayBsaW5lIGlzIHNlcGFyYXRpbmcgSFRUUCBoZWFkZXJzCj5mcm9tIHRoZSBi
b2R5IChhbmQgdGh1cyAiLi4uIiBpcyBzb21lIGhlYWRlcnMpLCBvciBpZiBpdCBpcyBzZXBhcmF0
aW5nCj50aGUgIiMgc2VydmljZSIgbGluZSBhbmQgbWF0Y2hpbmcgZmx1c2ggZnJvbSB0aGUgcmVz
dCBvZiB0aGUgcmVzcG9uc2UKPmJvZHkuCj4KPkkgbm90ZSB0aGF0IGdpdGxhYi5jb20gYWxzbyBy
ZXR1cm5zIHRoZSAic2VydmljZSIgbGluZSBmb3IgdjIgKEkgZG9uJ3QKPmtub3cgYW55dGhpbmcg
YWJvdXQgdGhlaXIgaW1wbGVtZW50YXRpb24sIGJ1dCBJIHdvdWxkIG5vdCBiZSBhdCBhbGwKPnN1
cnByaXNlZCBpZiB0aGV5IGFsc28gdXNlIGEgY3VzdG9tIEhUVFAgZW5kcG9pbnQ7IGFwYWNoZSto
dHRwLWJhY2tlbmQKPmlzIG5vdCB2ZXJ5IGZsZXhpYmxlIG9yIHNjYWxhYmxlKS4KPiAKZ2l0ZWUu
Y29tIHJldHVybnMgdGhlICJ2ZXJzaW9uIDEiIGxpbmUgZm9yIHYxLCBzbyBkaWVkIGZvcsKgaW52
YWxpZCBzZXJ2ZXIgcmVzcG9uc2UKYW5kIGl0IHJldHVybnMgdGhlICJ2ZXJzaW9uIDIiIGxpbmUg
Zm9yIHYyLCB3aGljaCBpcyBleHBlY3RlZC4KCj5Bbnl3YXksIHRoYXQncyBhbGwganVzdCBhbiBp
bnRlcmVzdGluZyBzaWRlIG5vdGUuIFRoZSBjbGllbnQgaXMgaGFwcHkKPndpdGggZWl0aGVyIGZv
cm0gKHRob3VnaCBpdCBtaWdodCBiZSBuaWNlIGlmIHdlIGhhZCB0ZXN0cyBmb3IgdGhlICIjCj5z
ZXJ2aWNlIiBmb3JtOyBJIHN1c3BlY3Qgb3VyIHRlc3RzIGRvbid0IGNvdmVyIHRoYXQgYmVjYXVz
ZSB0aGV5IGFyZSBhbGwKPnVzaW5nIGh0dHAtYmFja2VuZCkuCj4KPkdldHRpbmcgYmFjayB0byB0
aGUgcGF0Y2ggYXQgaGFuZCwgaWYgdGhlcmUgaXMgYSBzZXJ2ZXIgc2F5aW5nICJ2ZXJzaW9uCj4x
IiB3aXRob3V0IGEgInNlcnZpY2UiIGxpbmUsIHRoZW4gSSB0aGluayB0aGF0IGlzIGEgYnVnIGlu
IHRoYXQgc2VydmVyLgo+IApJZiB0aGUgcHJvYmxlbSBpcyBvbiB0aGUgc2VydmVyIHNpZGUsIHRo
ZW4sIGlzIHRoaXMgcGF0Y2ggd29ydGggY29udGludWluZz8KClRoYW5rcyEKCj4tUGVmZg==

