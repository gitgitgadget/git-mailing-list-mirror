From: Carl Worth <cworth@cworth.org>
Subject: git-push of new, tiny branch doing more work than necessary?
Date: Thu, 21 Sep 2006 15:29:04 -0700
Message-ID: <87fyekkg5r.wl%cworth@cworth.org>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Thu_Sep_21_15:29:04_2006-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Fri Sep 22 00:29:34 2006
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1GQX2k-0002C0-Hn
	for gcvg-git@gmane.org; Fri, 22 Sep 2006 00:29:19 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932073AbWIUW3N (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Sep 2006 18:29:13 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932074AbWIUW3M
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Sep 2006 18:29:12 -0400
Received: from mx1.redhat.com ([66.187.233.31]:54696 "EHLO mx1.redhat.com")
	by vger.kernel.org with ESMTP id S932073AbWIUW3L (ORCPT
	<rfc822;git@vger.kernel.org>); Thu, 21 Sep 2006 18:29:11 -0400
Received: from int-mx1.corp.redhat.com (int-mx1.corp.redhat.com [172.16.52.254])
	by mx1.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id k8LMTA2h000656
	for <git@vger.kernel.org>; Thu, 21 Sep 2006 18:29:10 -0400
Received: from mail.boston.redhat.com (mail.boston.redhat.com [172.16.76.12])
	by int-mx1.corp.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id k8LMT55Y020996
	for <git@vger.kernel.org>; Thu, 21 Sep 2006 18:29:05 -0400
Received: from raht.cworth.org (sebastian-int.corp.redhat.com [172.16.52.221])
	by mail.boston.redhat.com (8.12.8/8.12.8) with ESMTP id k8LMT43b009622
	for <git@vger.kernel.org>; Thu, 21 Sep 2006 18:29:04 -0400
To: git@vger.kernel.org
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/27506>

--pgp-sign-Multipart_Thu_Sep_21_15:29:04_2006-1
Content-Type: text/plain; charset=US-ASCII

I've run through something quite like the following scenario a few
times lately:

	git pull origin
	git checkout -b experiment
	# hack a file or two
	git commit -a -m "new experiment"
	git push origin experiment

What I expect at this point is for git to push the few newly created
objects out to the repository. Instead it talks about generating,
deltifying, transferring, and unpacking thousands of objects (see
below).

Shouldn't the same WANT/HAVE hand shaking that makes git-fetch
efficient be doing something similar here? Or am I just doing
something wrong?

-Carl

$ git --version
git version 1.4.2.rc2.gef1d9
$ git push cworth 8379
updating 'refs/heads/8379'
  from 0000000000000000000000000000000000000000
  to   44379202da96faf632b73cdcdd6c0a74fb4b54f4
Generating pack...
Done counting 4900 objects.
Result has 4622 objects.
Deltifying 4622 objects.
 100% (4622/4622) done
Unpacking 4622 objects
Total 4622, written 4622 (delta 3411), reused 1259 (delta 946)
refs/heads/8379: 0000000000000000000000000000000000000000 ->
44379202da96faf632b73cdcdd6c0a74fb4b54f4

--pgp-sign-Multipart_Thu_Sep_21_15:29:04_2006-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQBFExIw6JDdNq8qSWgRAjrgAJ9xNQHUNIh0egCsbEsWTxiqqVj+mwCgmZzj
KBzJUerO97mH51ggelWRjBM=
=3ImB
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Thu_Sep_21_15:29:04_2006-1--
