From: Carl Worth <cworth@cworth.org>
Subject: [PATCH] git-seek: Eliminate spurious warning. Fix errant reference to git-bisect in docs.
Date: Thu, 23 Feb 2006 17:01:55 -0800
Message-ID: <87vev5r2m4.wl%cworth@cworth.org>
References: <43F20532.5000609@iaglans.de>
	<Pine.LNX.4.64.0602140845080.3691@g5.osdl.org>
	<87k6bxvmj6.wl%cworth@cworth.org>
	<Pine.LNX.4.64.0602141026570.3691@g5.osdl.org>
	<87fymlvgzv.wl%cworth@cworth.org>
	<Pine.LNX.4.64.0602141224110.3691@g5.osdl.org>
	<87d5hpvc8p.wl%cworth@cworth.org>
	<7vu0b1pntl.fsf@assigned-by-dhcp.cox.net>
	<87zmkhrf4y.wl%cworth@cworth.org>
	<20060224001848.GB21094@fieldses.org>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Thu_Feb_23_17:01:54_2006-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Cc: Junio C Hamano <junkio@cox.net>, git@vger.kernel.org,
	Linus Torvalds <torvalds@osdl.org>
X-From: git-owner@vger.kernel.org Fri Feb 24 02:03:25 2006
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1FCRMg-0003v7-5n
	for gcvg-git@gmane.org; Fri, 24 Feb 2006 02:03:22 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932318AbWBXBDT (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 23 Feb 2006 20:03:19 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S932327AbWBXBDT
	(ORCPT <rfc822;git-outgoing>); Thu, 23 Feb 2006 20:03:19 -0500
Received: from theworths.org ([217.160.253.102]:16257 "EHLO theworths.org")
	by vger.kernel.org with ESMTP id S932318AbWBXBDT (ORCPT
	<rfc822;git@vger.kernel.org>); Thu, 23 Feb 2006 20:03:19 -0500
Received: (qmail 15021 invoked from network); 23 Feb 2006 20:03:15 -0500
Received: from localhost (HELO raht.cworth.org) (127.0.0.1)
  by localhost with SMTP; 23 Feb 2006 20:03:15 -0500
To: "J. Bruce Fields" <bfields@fieldses.org>
In-Reply-To: <20060224001848.GB21094@fieldses.org>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/16680>

--pgp-sign-Multipart_Thu_Feb_23_17:01:54_2006-1
Content-Type: text/plain; charset=US-ASCII

This fixed a bug that would cause "git seek" to mistakenly try to
checkout the seek branch just after deleting it. Of course, that would
never work, but fixing the bug does squelch the annoying error caused
by the bug.

Also fix an errant title of "git-bisect" in the git-seek documentation.

---

On Thu, 23 Feb 2006 19:18:48 -0500, "J. Bruce Fields" wrote:
> On Thu, Feb 23, 2006 at 12:31:25PM -0800, Carl Worth wrote:
> > +git-bisect(1)
> > +=============
> 
> Oops.

Thanks.

> I wonder if its a good idea to silently reset a branch named with a
> short common word?

It at least takes some care not to leave commits dangling when doing
this, (the seek branch must at least be a subset of the current
HEAD). I was pretty much following the lead of git-bisect here,
(though "bisect" is definitely a touch longer and less common than
"seek").

If it would be preferred to hide such "internal" branch names behind
some unlikely symbol or such, that would obviously be easy to do.

As is, the seek branch is at least documented, and rather well
advertised in operation, (for example, returning with "git seek"
reported "Deleted branch seek.").

> These long usage texts with language duplicated from the man pages seem
> like they'd be asking for bit-rot, when an update happens in one place
> but not the other.  I dunno.

Yeah, I don't know. Again, I was just imitating things I'd seen
elsewhere.

 Documentation/git-seek.txt |    4 ++--
 git-seek.sh                |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

43f042982c26859b6b7f6055fc03dda8e89f4e70
diff --git a/Documentation/git-seek.txt b/Documentation/git-seek.txt
index cb5c13d..513dbc7 100644
--- a/Documentation/git-seek.txt
+++ b/Documentation/git-seek.txt
@@ -1,5 +1,5 @@
-git-bisect(1)
-=============
+git-seek(1)
+===========
 
 NAME
 ----
diff --git a/git-seek.sh b/git-seek.sh
index 26f0b76..921c014 100644
--- a/git-seek.sh
+++ b/git-seek.sh
@@ -65,7 +65,7 @@ seek_reset() {
 		source 
 	fi
 	git checkout "$source" &&
-	(git branch -d seek || err=$? ; git checkout seek ; exit $err) &&
+	(git branch -d seek || (err=$? ; git checkout seek ; exit $err)) &&
 	rm -f "$GIT_DIR/head-name"
 }
 
-- 
1.2.3.g2656-dirty


--pgp-sign-Multipart_Thu_Feb_23_17:01:54_2006-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQBD/lsD6JDdNq8qSWgRAl8GAJ9+2kcVtHGjSZG97OXlqSb4WzpJuACgqUCt
xVVU0dd5AgNKHDCryNnFzRk=
=1s9t
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Thu_Feb_23_17:01:54_2006-1--
