From: Olaf Hering <olaf@aepfle.de>
Subject: [PATCH] git-gui: sort entries in tclIndex
Date: Mon, 26 Jan 2015 18:07:23 +0100
Message-ID: <1422292043-12711-1-git-send-email-olaf@aepfle.de>
Cc: Olaf Hering <olaf@aepfle.de>
To: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Mon Jan 26 18:13:49 2015
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@plane.gmane.org
Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <git-owner@vger.kernel.org>)
	id 1YFnES-0004S5-0Y
	for gcvg-git-2@plane.gmane.org; Mon, 26 Jan 2015 18:13:48 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1754665AbbAZRNp (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Mon, 26 Jan 2015 12:13:45 -0500
Received: from mo4-p00-ob.smtp.rzone.de ([81.169.146.216]:37791 "EHLO
	mo4-p00-ob.smtp.rzone.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1753100AbbAZRNn (ORCPT <rfc822;git@vger.kernel.org>);
	Mon, 26 Jan 2015 12:13:43 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; t=1422292422; l=827;
	s=domk; d=aepfle.de;
	h=Date:Subject:Cc:To:From;
	bh=g+EhkuiGWrIRyK5aPfmr3HxSc3dbenyrlCKiZwjkJDM=;
	b=j7kgHkwfXMqZr/Gpx4hH7OmbBdfpDqaceBiRUxwrOKfaFEuXd5g5eKNaSiENOJ5opBg
	AlgrBfMc2jdT8Ee3v3jARhw0EeIedowA1UYjUezNGrTfiKCo8kbEjgTE88SW6OBRkl3fd
	s78+/xtqE+W3F40aYQpc1UcZokaC2OMakHU=
X-RZG-AUTH: :P2EQZWCpfu+qG7CngxMFH1J+yackYocTD1iAi8x+OWi/zfN1cLnBYfssDIlSQZelGPTkz+JJHiQM2XCL4FiyQ+n/+A0DGQ==
X-RZG-CLASS-ID: mo00
Received: from probook.fritz.box ([2001:a60:1087:7e01:1ec1:deff:feb9:bb48])
	by smtp.strato.de (RZmta 37.1 AUTH)
	with ESMTPSA id U0260dr0QH7U1aG
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate);
	Mon, 26 Jan 2015 18:07:30 +0100 (CET)
Received: by probook.fritz.box (Postfix, from userid 1000)
	id E0AD45016F; Mon, 26 Jan 2015 18:07:29 +0100 (CET)
X-Mailer: git-send-email 2.2.2
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/263037>

ALL_LIBFILES uses wildcard, which provides the result in directory
order. This order depends on the underlying filesystem on the
buildhost. To get reproducible builds it is required to sort such list
before using them.

Signed-off-by: Olaf Hering <olaf@aepfle.de>
---
 git-gui/Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/git-gui/Makefile b/git-gui/Makefile
index cde8b2e..7564a18 100644
--- a/git-gui/Makefile
+++ b/git-gui/Makefile
@@ -258,7 +258,7 @@ lib/tclIndex: $(ALL_LIBFILES) GIT-GUI-VARS
 	 rm -f $@ ; \
 	 echo '# Autogenerated by git-gui Makefile' >$@ && \
 	 echo >>$@ && \
-	 $(foreach p,$(PRELOAD_FILES) $(ALL_LIBFILES),echo '$(subst lib/,,$p)' >>$@ &&) \
+	 $(foreach p,$(PRELOAD_FILES) $(sort $(ALL_LIBFILES)),echo '$(subst lib/,,$p)' >>$@ &&) \
 	 echo >>$@ ; \
 	fi
 
