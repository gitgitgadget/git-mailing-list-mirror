Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.1 (2015-04-28) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-3.8 required=3.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,HEADER_FROM_DIFFERENT_DOMAINS,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI shortcircuit=no autolearn=ham autolearn_force=no
	version=3.4.1
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id 444DF1F403
	for <e@80x24.org>; Wed, 13 Jun 2018 23:58:19 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S935789AbeFMX6Q (ORCPT <rfc822;e@80x24.org>);
        Wed, 13 Jun 2018 19:58:16 -0400
Received: from injection.crustytoothpaste.net ([192.241.140.119]:38852 "EHLO
        injection.crustytoothpaste.net" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S935764AbeFMX6P (ORCPT
        <rfc822;git@vger.kernel.org>); Wed, 13 Jun 2018 19:58:15 -0400
Received: from genre.crustytoothpaste.net (unknown [IPv6:2001:470:b978:101:b0c3:20dd:704c:b59d])
        (using TLSv1.2 with cipher ECDHE-RSA-CHACHA20-POLY1305 (256/256 bits))
        (No client certificate requested)
        by injection.crustytoothpaste.net (Postfix) with ESMTPSA id 4417960129;
        Wed, 13 Jun 2018 23:58:13 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=crustytoothpaste.net;
        s=default; t=1528934293;
        bh=EIPCCLOcO7V8OIwxWKP2bcSL3y1Vgu2byXOqz78GciM=;
        h=Date:From:To:Cc:Subject:References:Content-Type:
         Content-Disposition:In-Reply-To:From:Reply-To:Subject:Date:To:CC:
         Resent-Date:Resent-From:Resent-To:Resent-Cc:In-Reply-To:References:
         Content-Type:Content-Disposition;
        b=tzHWHEsr8d3xlyQPI1gUHcB++vOnxNKPQifrymGAkFSVk8XbDi5bS8N5deKcIJxeJ
         UFOc+VH+Zeop+EELGkCKBsRp5wH3LhK2ofU64UPK1ibRLCM6Q8Sr9XdytfFosuej9A
         8K27UkAfGG9tyfOC6NYhnyEXfWjovDvQ/JjgScjJ5hg6TLHowW7vyfA8TbyHs9lEHl
         /M3Cac3uXVW4Gh214Q/eOAqk0Jb5jKPg1TGrBanEllvXZbCZZQGShXTs55VgtZSGLd
         ObjIbhnVf8HI6l1FYOMg+gVEvIjjcCGt//udRpYv4pJdMQVA+iPeQ8KHjutkXY+qW4
         CYbESVJERtQVgsKRywx+JzoduUHdlJm2vKRo0kKy5a6ddZKI0jPKy+DVYeaV2KY25K
         V039eOJtSqiIe9VHjy2fy88NWYF9Zs3mr6AxEgv1pNwQRqhBLZaQI1FViBHxMf1RBZ
         9bxBpvIublf0AvJH5cpzztUH4ag4L3wXCEIqPOFBjOkTKJa7nWx
Date:   Wed, 13 Jun 2018 23:58:08 +0000
From:   "brian m. carlson" <sandals@crustytoothpaste.net>
To:     Gilles Van Assche <gilles.van.assche@noekeon.org>
Cc:     Jonathan Nieder <jrnieder@gmail.com>, git@vger.kernel.org,
        Johannes Schindelin <Johannes.Schindelin@gmx.de>,
        demerphq <demerphq@gmail.com>,
        Linus Torvalds <torvalds@linux-foundation.org>,
        Adam Langley <agl@google.com>, Keccak Team <keccak@noekeon.org>
Subject: Re: Hash algorithm analysis
Message-ID: <20180613235808.GM38834@genre.crustytoothpaste.net>
Mail-Followup-To: "brian m. carlson" <sandals@crustytoothpaste.net>,
        Gilles Van Assche <gilles.van.assche@noekeon.org>,
        Jonathan Nieder <jrnieder@gmail.com>, git@vger.kernel.org,
        Johannes Schindelin <Johannes.Schindelin@gmx.de>,
        demerphq <demerphq@gmail.com>,
        Linus Torvalds <torvalds@linux-foundation.org>,
        Adam Langley <agl@google.com>, Keccak Team <keccak@noekeon.org>
References: <20180609205628.GB38834@genre.crustytoothpaste.net>
 <20180609224913.GC38834@genre.crustytoothpaste.net>
 <20180611192942.GC20665@aiede.svl.corp.google.com>
 <20180611223520.GF38834@genre.crustytoothpaste.net>
 <8e3fa1dd-958c-c3d5-2d6e-d52a4b424982@noekeon.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha512;
        protocol="application/pgp-signature"; boundary="McpcKDxJRrEJVmOH"
Content-Disposition: inline
In-Reply-To: <8e3fa1dd-958c-c3d5-2d6e-d52a4b424982@noekeon.org>
X-Machine: Running on genre using GNU/Linux on x86_64 (Linux kernel
 4.16.0-2-amd64)
User-Agent: Mutt/1.10.0 (2018-05-17)
X-Scanned-By: MIMEDefang 2.79 on 127.0.1.1
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org


--McpcKDxJRrEJVmOH
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Tue, Jun 12, 2018 at 06:21:21PM +0200, Gilles Van Assche wrote:
> Hi,
>=20
> On 10/06/18 00:49, brian m. carlson wrote:
> > I imported the optimized 64-bit implementation of KangarooTwelve. The
> > AVX2 implementation was not considered for licensing reasons (it's
> > partially generated from external code, which falls foul of the GPL's
> > "preferred form for modifications" rule).
>=20
> Indeed part of the AVX2 code in the Keccak code package is an extension
> of the implementation in OpenSSL (written by Andy Polyakov). The
> assembly code is generated by a Perl script, and we extended it to fit
> in the KCP's internal API.
>=20
> Would it solve this licensing problem if we remap our extensions to the
> Perl script, which would then become "the source"?

The GPLv2 requires "the preferred form of the work for making
modifications to it".  If that form is the Perl script, then yes, that
would be sufficient.  If your code is dissimilar enough that editing it
directly is better than editing the Perl script, then it might already
meet the definition.

I don't do assembly programming, so I don't know what forms one
generally wants for editing assembly.  Apparently OpenSSL wants a Perl
script, but that is, I understand, less common.  What would you use if
you were going to improve it?

> On 12/06/18 00:35, brian m. carlson wrote:
> > While I think K12 is an interesting algorithm, I'm not sure we're
> > going to get as good of performance out of it as we might want due to
> > the lack of implementations.
>=20
> Implementation availability is indeed important. The effort to transform
> an implementation of SHAKE128 into one of K12 is limited due to the
> reuse of their main components (round function, sponge construction). So
> the availability of SHA-3/Keccak implementations can benefit that of K12
> if there is sufficient interest. E.g., the SHA-3/Keccak instructions in
> ARMv8.2 can speed up K12 as well.

That's good to know.  I wasn't aware that ARM was providing Keccak
instructions, but it's good to see that new chips are providing them.
--=20
brian m. carlson: Houston, Texas, US
OpenPGP: https://keybase.io/bk2204

--McpcKDxJRrEJVmOH
Content-Type: application/pgp-signature; name="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.2.8 (GNU/Linux)

iQIzBAABCgAdFiEEX8OngXdrJt+H9ww3v1NdgR9S9osFAlshr5AACgkQv1NdgR9S
9ouj6Q/8CY4h4YbCpBr+i5e1Bv2pJvmt+g+fpPd8tguscyWwWvEXcjACS1cNt2bp
BwC0CkrHk6ka+anx1Vgcg4ltqh5OP33bVSAZpHcBcEHI7qc/lDXN2BbbJU4YuEYi
uHRVafMgegRnIn3/BvDZHHH5uqETok3WN9KU8Fg7cHPRqcFYTFPqaONEGUCdJW5A
sNTSHMwUIo83ar02uJzRi6vYZgzDO8soXT5hr4tjyYzidj22pD+iWvf9NsUAeE1y
MV9XWVEhtcQ2QCUO2lJ5nYkffew3Zd3483oNjNAdfkU25C/2la596+bcSaKMQZEL
TyxYA/jiyp5tS3fOLb6dB4HUpIt9JP+4DwJ3ijUbV4Eup36oUq0qTZCkO4YXdzad
KrHJVf2C8VXFGbycd6uqtDv6tVCMlrlPc7rUASjXEnxA0fWu5Q+NNRqZNqtf4duT
7n94j/l5DWyfcrw2B4OjrtG3l6hH8pZRc1aOiTXpjNkHwX4SyJLdvYZINPzUFWWg
Z2zOAh0/fYF0rJXBMcBW+QV8KXwZ4bBCIH56cU5wdns6+fi+bdQsrYkaWRYCioKv
ZfZhoa+QrHJiEDUpVFpnjBpRn9I2Un+hA/4tytiNyX667GYrtyjVSuw/Iiywmwlr
p8ijL9u7Fga0dDaYL1FqAtdBp9W6Qr2fakjtR4pM1EDC2rICLPc=
=JVnX
-----END PGP SIGNATURE-----

--McpcKDxJRrEJVmOH--
