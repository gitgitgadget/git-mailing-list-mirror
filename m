X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.176.0/21
X-Spam-Status: No, score=-3.5 required=3.0 tests=AWL,BAYES_00,
	HEADER_FROM_DIFFERENT_DOMAINS,MSGID_FROM_MTA_HEADER,RP_MATCHES_RCVD
	shortcircuit=no autolearn=ham autolearn_force=no version=3.4.0
From: Carl Worth <cworth@cworth.org>
Subject: Re: [PATCH] git-merge: preserve and merge local changes when doing fast forward
Date: Wed, 29 Nov 2006 23:32:42 -0800
Message-ID: <87psb5tmn9.wl%cworth@cworth.org>
References: <7v1wnlmyba.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Wed_Nov_29_23:32:42_2006-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
NNTP-Posting-Date: Thu, 30 Nov 2006 07:33:31 +0000 (UTC)
Cc: git@vger.kernel.org
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git@gmane.org
In-Reply-To: <7v1wnlmyba.fsf@assigned-by-dhcp.cox.net>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.4 Mule/5.0 (SAKAKI)
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/32707>
Received: from vger.kernel.org ([209.132.176.167]) by ciao.gmane.org with
 esmtp (Exim 4.43) id 1GpgQD-0004qF-4D for gcvg-git@gmane.org; Thu, 30 Nov
 2006 08:33:29 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand id
 S1758562AbWK3HdZ (ORCPT <rfc822;gcvg-git@m.gmane.org>); Thu, 30 Nov 2006
 02:33:25 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1758572AbWK3HdY
 (ORCPT <rfc822;git-outgoing>); Thu, 30 Nov 2006 02:33:24 -0500
Received: from mx1.redhat.com ([66.187.233.31]:63447 "EHLO mx1.redhat.com")
 by vger.kernel.org with ESMTP id S1758562AbWK3HdY (ORCPT
 <rfc822;git@vger.kernel.org>); Thu, 30 Nov 2006 02:33:24 -0500
Received: from int-mx1.corp.redhat.com (int-mx1.corp.redhat.com
 [172.16.52.254]) by mx1.redhat.com (8.12.11.20060308/8.12.11) with ESMTP id
 kAU7XL7q014260; Thu, 30 Nov 2006 02:33:21 -0500
Received: from mail.boston.redhat.com (mail.boston.redhat.com [172.16.76.12])
 by int-mx1.corp.redhat.com (8.13.1/8.13.1) with ESMTP id kAU7XLp6003622; Thu,
 30 Nov 2006 02:33:21 -0500
Received: from raht.cworth.org (sebastian-int.corp.redhat.com
 [172.16.52.221]) by mail.boston.redhat.com (8.12.11.20060308/8.12.11) with
 ESMTP id kAU7XKQ3004429; Thu, 30 Nov 2006 02:33:20 -0500
To: Junio C Hamano <junkio@cox.net>
Sender: git-owner@vger.kernel.org

--pgp-sign-Multipart_Wed_Nov_29_23:32:42_2006-1
Content-Type: text/plain; charset=US-ASCII

On Wed, 29 Nov 2006 19:02:33 -0800, Junio C Hamano wrote:
> The idea and the logic are identical to what "checkout -m" does
> when switching the branches.  Instead of refusing the two-way
> merge, perform the three-way merge between the old head, the
> working tree and the new head, and leave the (potentially
> conflicted) merge result in the working tree.

This looks very appealing to me. I know I've often been frustrated
when git refuses to fast-forward just because I have dirty state, (and
stashing the diff manually into a patch file, then re-applying it
after fast forward is really annoying---getting work done in spite of
the tool and not because of it).

>  * I am not sure if this is worth doing in general; it can leave
>    a huge mess if the conflict with the merge and the local
>    change is too extensive and does not give a good way to
>    recover from it,

As I said above it seems very reasonable to me. As for the problem you
mention here, isn't "no good way to recover from it" the real problem,
and not this merge possibility? And is there enough information in the
index file such that one could implement a way to recover from this?

-Carl

--pgp-sign-Multipart_Wed_Nov_29_23:32:42_2006-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQBFboka6JDdNq8qSWgRAiNcAJ43Jd29vMcoJmm4H74S1ViuTjt68QCfccEc
ROb8lFMesdaW8eayChwjD+A=
=OPw+
-----END PGP SIGNATURE-----

