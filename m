Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-4.1 required=3.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FORGED_FROMDOMAIN,FREEMAIL_FROM,
	HEADER_FROM_DIFFERENT_DOMAINS,MAILING_LIST_MULTI,RCVD_IN_DNSWL_HI,
	SPF_HELO_NONE,SPF_NONE shortcircuit=no autolearn=ham
	autolearn_force=no version=3.4.2
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id 7B8F91F461
	for <e@80x24.org>; Tue,  3 Sep 2019 18:51:50 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726490AbfICSvt (ORCPT <rfc822;e@80x24.org>);
        Tue, 3 Sep 2019 14:51:49 -0400
Received: from mail-lj1-f193.google.com ([209.85.208.193]:36965 "EHLO
        mail-lj1-f193.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1725883AbfICSvt (ORCPT <rfc822;git@vger.kernel.org>);
        Tue, 3 Sep 2019 14:51:49 -0400
Received: by mail-lj1-f193.google.com with SMTP id t14so17162664lji.4
        for <git@vger.kernel.org>; Tue, 03 Sep 2019 11:51:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=from:to:cc:subject:date:message-id:in-reply-to:references
         :mime-version:content-transfer-encoding;
        bh=9yvllAI/IBbKE00UiSpoEm8mtnFOrbKBuj75WHYoh7w=;
        b=cb/+LhH9/lmpl8uPEET6Mp2rRuFYnEWj8HLbhlvDGjf0mG1nrRr1GE/ebbAx+gSuUO
         TVes944PEa0elAgjwzf3zGjPDBweJxpJosKXudgI/rDKArP/I+nQ+ppLFkWrXa6pLOqh
         54HMX4TXaU4Dehdph5YdTpGPQetiZK8CF+SyMQoBmmhovcHOvz7A6d+wicUDx2rHXBz3
         QoRtRH+8lzbG3naP1JCTHeDjXUqcxo5F7T7djPYBAbfe6+93xmnV4eJpt5MuLPKa9rJv
         ugykpLFaXkvVKlTMUhqkm2DZ9JpLI7tZ3614q02PT/UHDGusF0Lm0elWmfLMA839d8pq
         JLvA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
         :references:mime-version:content-transfer-encoding;
        bh=9yvllAI/IBbKE00UiSpoEm8mtnFOrbKBuj75WHYoh7w=;
        b=VqnA4VmYJhG3HB4C2ux6WPlGElGanPvETC36u27+CwfanCSdFxXQrf0iKCSiPI3fuG
         okFH3vOq3mYOb00iKDHJmQmWo9YesQBThVSTKFjFnA24QKv0cQCVZBGB+g+EHgTBr1h8
         kHopHXfYDl+Jv6bnyrmUa9HEo7ibVh24Dqr2AUOsI0/pKn7CxSW7NFaCtZDhwLEk0IcH
         NoFhRzfxBObZPX+cayHGaGXTi2tR1LFEiVTjlSijUeWzJ1PV6ZqesWAr+Pbhq61mMqXH
         o5NAdV7vhq6iCfHlbhqL0BmJT2JBh0v1zqFWd+eoGBSi69Vm2DCcLBDcyY4cg3+haHgG
         AWnA==
X-Gm-Message-State: APjAAAWpIG9IWcRTyQQtsUhaJZjNe7F01xFl4F2s1PCiD7ijLqJUg9j8
        p67zZoCVZlslGr5dNwNRYX839DCD
X-Google-Smtp-Source: APXvYqwiHvFz0xoTUyqOw0ibb/nxCbO4HyqlmEHOlEoDjDlDoEZngqBL9JS7GJx6H1llwWJdJ6FC9Q==
X-Received: by 2002:a2e:8e90:: with SMTP id z16mr4666643ljk.178.1567536707325;
        Tue, 03 Sep 2019 11:51:47 -0700 (PDT)
Received: from localhost.localdomain (31-211-229-121.customers.ownit.se. [31.211.229.121])
        by smtp.gmail.com with ESMTPSA id s21sm2971443ljm.28.2019.09.03.11.51.45
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Tue, 03 Sep 2019 11:51:46 -0700 (PDT)
From:   =?UTF-8?q?Martin=20=C3=85gren?= <martin.agren@gmail.com>
To:     git@vger.kernel.org
Cc:     Todd Zullinger <tmz@pobox.com>, Jeff King <peff@peff.net>,
        =?UTF-8?q?SZEDER=20G=C3=A1bor?= <szeder.dev@gmail.com>,
        "brian m. carlson" <sandals@crustytoothpaste.net>,
        Junio C Hamano <gitster@pobox.com>
Subject: [PATCH v2 0/2] asciidoctor-extensions: provide `<refmiscinfo/>`
Date:   Tue,  3 Sep 2019 20:51:19 +0200
Message-Id: <cover.1567534373.git.martin.agren@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <CAN0heSr2zCQMM6wOM0UnD28qj_VygQ5CQHGHhMR9+H23snpt5Q@mail.gmail.com>
References: <CAN0heSr2zCQMM6wOM0UnD28qj_VygQ5CQHGHhMR9+H23snpt5Q@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

Almost half a year ago, I wrote:
> To be clear. *This* patch has a sufficiently incorrect commit message
> that it really needs a makeover. You can expect a v2.

Finally, here's that v2. I should probably refresh memories: The goal of
the main patch here is to make the headers and footers of our manpages
built by Asciidoctor look a lot more like those generated by AsciiDoc.
In particular, this gets rid of the ugly "[FIXME: source]".

I spent a little bit of time trying to work on the XML as XML, and
quite a lot of time procrastinating on that. In the end, I decided that
the outcome of my attempts wouldn't get better and that there is some
value to the stupid approach from v1 of doing a simple search-and-replace
in the text. I've preserved my attempts in the commit message.

When I posted v1, it turned into quite a thread [1] on AsciiDoc vs
Asciidoctor vs Asciidoctor 2.0 and differences in rendering. (I am on
Asciidoctor 1.5.5.)

Among other things, the v1-thread discussed switching the rendering
toolchain entirely to avoid the detour over xmlto. Doing that would
render this patch obsolete. While I agree that such a switch is the
correct long-term goal and that we can be fairly aggressive about it, I
do also think it makes sense to first make the "softer" switch to
Asciidoctor-by-default and get that particular hurdle behind us. Then,
once we're ok with dropping AsciiDoc entirely, we can do the switch to
an Asciidoctor-only toolchain.

(I'm preparing a second, independent series of patches that should halve
the difference (sans headers/footers) between these two engines -- at
least the versions of them that I'm using. The remaining differences are
then mainly, but not exclusively, in favor of Asciidoctor. That series
should appear on the list within the next couple of days. After that,
there's user-manual.html/pdf that needs looking into...)

[1] https://public-inbox.org/git/20190317144747.2418514-1-martin.agren@gmail.com/

Martin Ã…gren (2):
  asciidoctor-extensions: provide `<refmiscinfo/>`
  doc-diff: replace --cut-header-footer with --cut-footer

 Documentation/asciidoctor-extensions.rb | 15 +++++++++++++++
 Documentation/doc-diff                  | 17 ++++++++---------
 2 files changed, 23 insertions(+), 9 deletions(-)

-- 
2.23.0

