Return-Path: <git-owner@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on dcvr.yhbt.net
X-Spam-Level: 
X-Spam-ASN: AS31976 209.132.180.0/23
X-Spam-Status: No, score=-3.6 required=3.0 tests=AWL,BAYES_00,
	FREEMAIL_FORGED_FROMDOMAIN,FREEMAIL_FROM,HEADER_FROM_DIFFERENT_DOMAINS,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_HI shortcircuit=no autolearn=ham
	autolearn_force=no version=3.4.2
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by dcvr.yhbt.net (Postfix) with ESMTP id F29581F405
	for <e@80x24.org>; Mon, 17 Dec 2018 12:51:15 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727450AbeLQMvP (ORCPT <rfc822;e@80x24.org>);
        Mon, 17 Dec 2018 07:51:15 -0500
Received: from mout.gmx.net ([212.227.17.22]:53287 "EHLO mout.gmx.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1727370AbeLQMvO (ORCPT <rfc822;git@vger.kernel.org>);
        Mon, 17 Dec 2018 07:51:14 -0500
Received: from [192.168.0.129] ([37.201.193.149]) by mail.gmx.com (mrgmx101
 [212.227.17.168]) with ESMTPSA (Nemesis) id 0LwW8p-1hUHt92TAl-018HDL; Mon, 17
 Dec 2018 13:51:12 +0100
Date:   Mon, 17 Dec 2018 13:50:56 +0100 (STD)
From:   Johannes Schindelin <Johannes.Schindelin@gmx.de>
X-X-Sender: virtualbox@gitforwindows.org
To:     =?UTF-8?Q?SZEDER_G=C3=A1bor?= <szeder.dev@gmail.com>
cc:     Gennady Uraltsev <gennady.uraltsev@gmail.com>, git@vger.kernel.org
Subject: Re: Bug in git-remote
In-Reply-To: <20181215130204.GZ30222@szeder.dev>
Message-ID: <nycvar.QRO.7.76.6.1812171347530.43@tvgsbejvaqbjf.bet>
References: <650b15f4-5e13-7a83-9f2e-072efc4815e4@gmail.com> <20181215130204.GZ30222@szeder.dev>
User-Agent: Alpine 2.21.1 (DEB 209 2017-03-23)
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="8323328-211375727-1545051072=:43"
X-Provags-ID: V03:K1:2YRt3CFGW+oQGT63uYVem4LNf/Psj5JaN6bvGXFwSaImBcIrElB
 LTDQj6GtJ1XEszM8taous1/J/B17rUJMueppytQUdcIyw0ngDi+UCSCimoQqO8PG5DG3Yif
 //sXYpWTXN4fRKdY8BsDfdvguPlicUy5OHGg/sbW+iQzzb0UEwhOjBhG0tSY/bKdssB918o
 5Vfp8jBBD/oIFEcCSWS4g==
X-UI-Out-Filterresults: notjunk:1;V03:K0:EXdYS3w/38w=:MWUf624Ti39j7n7jSUOQpI
 zriUNo4dHIo2Nj2YlYkkuLk2oD4Lvp/vJ9yVW1UkvkhgECBQ/eF8XSG/gMuHoIRwxf2JYUa/B
 GPweZsBi8MH3co91fEckNtrXypZxv8LNTX861s25P/Hkhm1G1JddwNYyQbT9BT0ryHVvrmA6B
 x/ogExoTBJjH7WLL/t2TJpQF/QR/kPMToxVs3dOU4AY2UvIlFcQHiqK5dQqJfN6JaVwbjcV5i
 1XsORkcoSWah/8GgBmNA6W7A5znXmJ0MuMeAIuKm+6OSyFcojF/V5+AWe04kVBLiFdmZ+Twx5
 zwEdn2Xn/3q/PnBycA8Jsa5cAYrMdczTMHWkRjDd7vw4gbm3dnBjpbN7ERLaKxv/n1zdSygRG
 Pc9eZc93U5W1RbdwLiCjYm8CuCeCw519RzFwITdSRV74y5XjXEQTu6ThbOh8yopZDsooZnVrZ
 JTfKIaSQrZjm8UnDc7rt1zfXSbGinQitdrwtoIWPUA68cVtfzkW1jXKbx9ZRDPku31AZZav4J
 t0J5tZ3LXc+KEQpZFo2IEfgieqOUIQ4EgBzrRdyyCU5iBqu+PZSNrulW81y0LxvMykKBdo3AC
 v9pjc6gJbLnqGi2J+oAonsxFUMjVczmVvaP3bEdtD659mfcVQcrr1+tVLQa36LsvO2vJ7n123
 OjUL49eHvOUc+Kdt1b3g4WK+B/F/pI0cNgJ47fthvzdyTHOUBiizB92UBcOSCd/6029bFSBZ8
 SDW52Sl/XowTgAH4fZ0t8wdHUcHn2G2qqbakCGB3VzJ3kMk3qC/U1zr1o1GwL65S3vT3QI1Ff
 YWnoF90IKzUFBJF5AIM/Wo0hpNAfXbvJ2/cUbaMTELGObXJNZuPuQznwNQvwSNTA5Y3goSuAc
 EMEl20ZyF/leUDB63YsYksQINtFnqH0iiFS1xh/DpGgsoZIDEs8fKHuCxvZuuDaxf6GamG319
 46hgeMfnW9w==
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--8323328-211375727-1545051072=:43
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8BIT

Hi Gábor,

On Sat, 15 Dec 2018, SZEDER Gábor wrote:

> On Sat, Dec 15, 2018 at 02:14:56AM -0500, Gennady Uraltsev wrote:
> > I am on git version 2.20.0
> > 
> > $ git remote
> > 
> > does not show remotes configured in named files in $GIT_DIR/remotes/
> >
> > I do not think that this is the intended behavior.
> 
> It's a known bug.  When 'git remote' was rewritten as a builtin
> command in C in commit 211c89682e (Make git-remote a builtin,
> 2008-02-29) the parts dealing with remotes under 'GIT_DIR/remotes/'
> were not rewritten.  I don't know whether that was intended or not,
> but storing remote information as configuration was about two years
> old back then.  Given that since then '$GIT_DIR/remotes/' got marked
> as "This mechanism is legacy and not likely to be found in modern
> repositories", I'm not sure it's worth fixing.  Perhaps it's time for
> calling it deprecated.

I would be in favor of deprecating it, and then removing it.

However, when I tried a similar thing with the completely obsolete
`$GIT_DIR/branches/` feature, it was shot down IIRC on the mere suspicion
that there was a single remaining user among the Linux kernel lieutenants.

And I fear that the suspected workflow of that lieutenant involved having
those legacy remotes, too.

Hopefully this issue will be resolved somehow, as it is not exactly a
splendid idea to keep a legacy feature of a software used by millions,
just for a single user, I would think.

Ciao,
Dscho

> 
> 
> > In particular:
> > 
> > $ git init --bare test.git
> > Initialized empty Git repository in /home/guraltsev/admin/test/git/test.git/
> > 
> > $ cd test.git
> > 
> > $ mkdir -p remotes
> > mkdir: created directory 'remotes'
> > 
> > $ echo -e "URL: /testremote.git \n Push: *:* \n Pull:
> > refs/heads/*:refs/remotes/testremote/* " > remotes/testremote
> > 
> > $ git remote
> > 
> > $ git remote show testremote
> > fatal: '/testremote.git' does not appear to be a git repository
> > fatal: Could not read from remote repository.
> > 
> > Please make sure you have the correct access rights
> > and the repository exists.
> > 
> > 
> > 
> > The second to last command should show testremote as a remote.
> > 
> > 
> > Best,
> > 
> > Gennady
> > 
> 
> 
> 
> 
--8323328-211375727-1545051072=:43--
