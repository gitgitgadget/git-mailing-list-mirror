From: "Greg A. Woods" <woods@planix.com>
Subject: Re: multiple working directories for long-running builds (was:	"git merge" merges too much!)
Date: Tue, 01 Dec 2009 13:58:05 -0500
Message-ID: <m1NFXvL-000kn2C@most.weird.com>
References: <m1NEaLp-000kn1C@most.weird.com>
	<7vskbxewti.fsf@alter.siamese.dyndns.org>
	<m1NFBAx-000kmgC@most.weird.com>
	<20091130211744.GA27278@dpotapov.dyndns.org>
	<m1NFGXS-000kn2C@most.weird.com>
	<20091201054734.GB11235@dpotapov.dyndns.org>
	<m1NFX19-000kn4C@most.weird.com>
	<20091201185114.GC11235@dpotapov.dyndns.org>
Reply-To: The Git Mailing List <git@vger.kernel.org>
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Tue_Dec__1_13:58:05_2009-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
To: The Git Mailing List <git@vger.kernel.org>
X-From: git-owner@vger.kernel.org Tue Dec 01 19:58:21 2009
Return-path: <git-owner@vger.kernel.org>
Envelope-to: gcvg-git-2@lo.gmane.org
Received: from vger.kernel.org ([209.132.176.167])
	by lo.gmane.org with esmtp (Exim 4.50)
	id 1NFXvU-0003v8-Lz
	for gcvg-git-2@lo.gmane.org; Tue, 01 Dec 2009 19:58:17 +0100
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1752302AbZLAS6E (ORCPT <rfc822;gcvg-git-2@m.gmane.org>);
	Tue, 1 Dec 2009 13:58:04 -0500
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S1751352AbZLAS6E
	(ORCPT <rfc822;git-outgoing>); Tue, 1 Dec 2009 13:58:04 -0500
Received: from mail.robohack.planix.com ([204.92.254.2]:61988 "EHLO
	most.weird.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1751320AbZLAS6D (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 1 Dec 2009 13:58:03 -0500
Received: from once.weird.com
	([204.92.254.13] port=50523)
	by most.weird.com([204.92.254.2] port=25)
	via TCP with esmtp (3733 bytes)
	(sender: <woods@once.weird.com>)
	(ident <woods> using rfc1413)
	id <m1NFXvL-000kn2C@most.weird.com>
	for <git@vger.kernel.org>;
	Tue, 1 Dec 2009 13:58:07 -0500 (EST)
	(Smail-3.2.0.122-Pre 2005-Nov-17 #1 built 2009-Feb-3)
In-Reply-To: <20091201185114.GC11235@dpotapov.dyndns.org>
User-Agent: Wanderlust/2.15.6 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.7 (=?ISO-8859-4?Q?Sanj=F2?=) APEL/10.7 Emacs/22.3
 (i386--netbsdelf) MULE/5.0 (SAKAKI)
X-Face: ;j3Eth2XV8h1Yfu<eXd9JL+"t;iT8?{X]Fjm`Qb]>*uL{<:dQ$#E[DB0gemGZJ"J#4fH*][
 lz;@-iwMv_u\6uIEKR0KY"=MzoQH#CrqBN`nG_5B@rrM8,f~Gr&h5a\=<t0loVf0$}bP=]i3OMh"n_
 _@m4/,~2`V=(-9LyW.)'`@E_fE^<4y7)BIe`A''/j-Y#gDNZERh%CCij'q-NA4F<|yjznEhd7=l^xH
 2.qD3o0IanGHERTW+z$G
Sender: git-owner@vger.kernel.org
Precedence: bulk
List-ID: <git.vger.kernel.org>
X-Mailing-List: git@vger.kernel.org
Archived-At: <http://permalink.gmane.org/gmane.comp.version-control.git/134248>

--pgp-sign-Multipart_Tue_Dec__1_13:58:05_2009-1
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

At Tue, 1 Dec 2009 21:51:14 +0300, Dmitry Potapov <dpotapov@gmail.com> wrot=
e:
Subject: Re: multiple working directories for long-running builds (was:	"gi=
t merge" merges too much!)
>=20
> Obviously, switching branches while running build may produce very
> confusing results, but it is not any different than editing files by
> hands during built -- any concurrent modification may confuse the build
> system.

That's what I said.  This is why multiple working directories is an
essential feature for any significantly large project.


> > I just disagreed that "git archive" was a reasonable alternative to
> > leaving the working directory alone during the entire time of the build.
>=20
> Using "git archive" allows you avoid running long time procedure such as
> full clean build and testing in the working tree. Also, it is guaranteed
> that you test exactly what you put in Git and some other garbage in your
> working tree does not affect the result.

Sure, but let's be very clear here:  "git archive" is likely even more
impossible for some large projects to use than "git clone" would be to
use to create build directories.

Disk bandwidth is almost always more expensive than disk space.

>   But my point was that switching
> between branches and recompile a few changed files may be faster than
> going to another working tree.

That's possibly going to generate even more unnecessary churn in the
working directory, and thus even more unnecessary re-compiles.

Multiple working directories are really the only sane solution
sometimes.

--=20
						Greg A. Woods
						Planix, Inc.

<woods@planix.com>       +1 416 218 0099        http://www.planix.com/

--pgp-sign-Multipart_Tue_Dec__1_13:58:05_2009-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (NetBSD)

iD8DBQBLFWc9Zn1xt3i/9H8RAjZJAJ9LbRTVUaNsgFDHhiJ96GafWDczfACeN5SR
56dYP2Dm2Gwo2lE+1ZXGhr8=
=fc4y
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Tue_Dec__1_13:58:05_2009-1--
